import{A as qi,B as In,a as L,b as Ee,c as O1,d as Zo,e as $m,f as V,g as KE,h as bh,i as QE,j as YE,k as ZE,l as Hm,m as JE,n as Nu,o as qm,p as Eh,q as XE,r as eI,s as zm,t as rt,u as Jo,v as Ir,w as Ih,x as Pu,y as tI,z as nI}from"./chunk-QO7GNF4R.js";var fo=O1((Or,f_)=>{"use strict";(function(n,e){typeof Or=="object"&&typeof f_<"u"?f_.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Or,function(){"use strict";function n(l,h,y){if(typeof l=="function"?l===h:l.has(h))return arguments.length<3?h:y;throw new TypeError("Private element is not present on this object")}function e(l,h){if(h.has(l))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(l,h){return l.get(n(l,h))}function r(l,h,y){e(l,h),h.set(l,y)}function i(l,h,y){return l.set(n(l,h),y),y}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},c=l=>new Promise(h=>{if(!l)return h();let y=window.scrollX,_=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),h()},o),window.scrollTo(y,_)}),d="swal2-",p=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((l,h)=>(l[h]=d+h,l),{}),b=["success","warning","info","question","error"].reduce((l,h)=>(l[h]=d+h,l),{}),M="SweetAlert2:",P=l=>l.charAt(0).toUpperCase()+l.slice(1),R=l=>{console.warn(`${M} ${typeof l=="object"?l.join(" "):l}`)},U=l=>{console.error(`${M} ${l}`)},Y=[],H=l=>{Y.includes(l)||(Y.push(l),R(l))},ne=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;H(`"${l}" is deprecated and will be removed in the next major release.${h?` Use "${h}" instead.`:""}`)},ae=l=>typeof l=="function"?l():l,ie=l=>l&&typeof l.toPromise=="function",D=l=>ie(l)?l.toPromise():Promise.resolve(l),E=l=>l&&Promise.resolve(l)===l,I=()=>document.body.querySelector(`.${p.container}`),S=l=>{let h=I();return h?h.querySelector(l):null},A=l=>S(`.${l}`),T=()=>A(p.popup),C=()=>A(p.icon),Gn=()=>A(p["icon-content"]),Ci=()=>A(p.title),uu=()=>A(p["html-container"]),Di=()=>A(p.image),Gr=()=>A(p["progress-steps"]),Ti=()=>A(p["validation-message"]),bn=()=>S(`.${p.actions} .${p.confirm}`),Si=()=>S(`.${p.actions} .${p.cancel}`),zt=()=>S(`.${p.actions} .${p.deny}`),Rt=()=>A(p["input-label"]),Ai=()=>S(`.${p.loader}`),Wn=()=>A(p.actions),Nd=()=>A(p.footer),gr=()=>A(p["timer-progress-bar"]),lu=()=>A(p.close),Em=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,xi=()=>{let l=T();if(!l)return[];let h=l.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(h).sort((W,ye)=>{let xe=parseInt(W.getAttribute("tabindex")||"0"),nt=parseInt(ye.getAttribute("tabindex")||"0");return xe>nt?1:xe<nt?-1:0}),_=l.querySelectorAll(Em),N=Array.from(_).filter(W=>W.getAttribute("tabindex")!=="-1");return[...new Set(y.concat(N))].filter(W=>Bt(W))},Mi=()=>En(document.body,p.shown)&&!En(document.body,p["toast-shown"])&&!En(document.body,p["no-backdrop"]),Ri=()=>{let l=T();return l?En(l,p.toast):!1},du=()=>{let l=T();return l?l.hasAttribute("data-loading"):!1},jt=(l,h)=>{if(l.textContent="",h){let _=new DOMParser().parseFromString(h,"text/html"),N=_.querySelector("head");N&&Array.from(N.childNodes).forEach(ye=>{l.appendChild(ye)});let W=_.querySelector("body");W&&Array.from(W.childNodes).forEach(ye=>{ye instanceof HTMLVideoElement||ye instanceof HTMLAudioElement?l.appendChild(ye.cloneNode(!0)):l.appendChild(ye)})}},En=(l,h)=>{if(!h)return!1;let y=h.split(/\s+/);for(let _=0;_<y.length;_++)if(!l.classList.contains(y[_]))return!1;return!0},Pd=(l,h)=>{Array.from(l.classList).forEach(y=>{!Object.values(p).includes(y)&&!Object.values(b).includes(y)&&!Object.values(h.showClass||{}).includes(y)&&l.classList.remove(y)})},Gt=(l,h,y)=>{if(Pd(l,h),!h.customClass)return;let _=h.customClass[y];if(_){if(typeof _!="string"&&!_.forEach){R(`Invalid type of customClass.${y}! Expected string or iterable object, got "${typeof _}"`);return}be(l,_)}},ea=(l,h)=>{if(!h)return null;switch(h){case"select":case"textarea":case"file":return l.querySelector(`.${p.popup} > .${p[h]}`);case"checkbox":return l.querySelector(`.${p.popup} > .${p.checkbox} input`);case"radio":return l.querySelector(`.${p.popup} > .${p.radio} input:checked`)||l.querySelector(`.${p.popup} > .${p.radio} input:first-child`);case"range":return l.querySelector(`.${p.popup} > .${p.range} input`);default:return l.querySelector(`.${p.popup} > .${p.input}`)}},hu=l=>{if(l.focus(),l.type!=="file"){let h=l.value;l.value="",l.value=h}},fu=(l,h,y)=>{!l||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(_=>{Array.isArray(l)?l.forEach(N=>{y?N.classList.add(_):N.classList.remove(_)}):y?l.classList.add(_):l.classList.remove(_)}))},be=(l,h)=>{fu(l,h,!0)},Yt=(l,h)=>{fu(l,h,!1)},mr=(l,h)=>{let y=Array.from(l.children);for(let _=0;_<y.length;_++){let N=y[_];if(N instanceof HTMLElement&&En(N,h))return N}},Kn=(l,h,y)=>{y===`${parseInt(y)}`&&(y=parseInt(y)),y||parseInt(y)===0?l.style.setProperty(h,typeof y=="number"?`${y}px`:y):l.style.removeProperty(h)},st=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";l&&(l.style.display=h)},gt=l=>{l&&(l.style.display="none")},mt=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";l&&new MutationObserver(()=>{yr(l,l.innerHTML,h)}).observe(l,{childList:!0,subtree:!0})},Nt=(l,h,y,_)=>{let N=l.querySelector(h);N&&N.style.setProperty(y,_)},yr=function(l,h){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?st(l,y):gt(l)},Bt=l=>!!(l&&(l.offsetWidth||l.offsetHeight||l.getClientRects().length)),kd=()=>!Bt(bn())&&!Bt(zt())&&!Bt(Si()),Od=l=>l.scrollHeight>l.clientHeight,Ni=l=>{let h=window.getComputedStyle(l),y=parseFloat(h.getPropertyValue("animation-duration")||"0"),_=parseFloat(h.getPropertyValue("transition-duration")||"0");return y>0||_>0},ta=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=gr();y&&Bt(y)&&(h&&(y.style.transition="none",y.style.width="100%"),setTimeout(()=>{y.style.transition=`width ${l/1e3}s linear`,y.style.width="0%"},10))},Fd=()=>{let l=gr();if(!l)return;let h=parseInt(window.getComputedStyle(l).width);l.style.removeProperty("transition"),l.style.width="100%";let y=parseInt(window.getComputedStyle(l).width),_=h/y*100;l.style.width=`${_}%`},pu=()=>typeof window>"u"||typeof document>"u",Im=`
 <div aria-labelledby="${p.title}" aria-describedby="${p["html-container"]}" class="${p.popup}" tabindex="-1">
   <button type="button" class="${p.close}"></button>
   <ul class="${p["progress-steps"]}"></ul>
   <div class="${p.icon}"></div>
   <img class="${p.image}" />
   <h2 class="${p.title}" id="${p.title}"></h2>
   <div class="${p["html-container"]}" id="${p["html-container"]}"></div>
   <input class="${p.input}" id="${p.input}" />
   <input type="file" class="${p.file}" />
   <div class="${p.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${p.select}" id="${p.select}"></select>
   <div class="${p.radio}"></div>
   <label class="${p.checkbox}">
     <input type="checkbox" id="${p.checkbox}" />
     <span class="${p.label}"></span>
   </label>
   <textarea class="${p.textarea}" id="${p.textarea}"></textarea>
   <div class="${p["validation-message"]}" id="${p["validation-message"]}"></div>
   <div class="${p.actions}">
     <div class="${p.loader}"></div>
     <button type="button" class="${p.confirm}"></button>
     <button type="button" class="${p.deny}"></button>
     <button type="button" class="${p.cancel}"></button>
   </div>
   <div class="${p.footer}"></div>
   <div class="${p["timer-progress-bar-container"]}">
     <div class="${p["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Cm=()=>{let l=I();return l?(l.remove(),Yt([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0):!1},Qn=()=>{s.currentInstance.resetValidationMessage()},Vd=()=>{let l=T(),h=mr(l,p.input),y=mr(l,p.file),_=l.querySelector(`.${p.range} input`),N=l.querySelector(`.${p.range} output`),W=mr(l,p.select),ye=l.querySelector(`.${p.checkbox} input`),xe=mr(l,p.textarea);h.oninput=Qn,y.onchange=Qn,W.onchange=Qn,ye.onchange=Qn,xe.oninput=Qn,_.oninput=()=>{Qn(),N.value=_.value},_.onchange=()=>{Qn(),N.value=_.value}},Ld=l=>typeof l=="string"?document.querySelector(l):l,Oo=l=>{let h=T();h.setAttribute("role",l.toast?"alert":"dialog"),h.setAttribute("aria-live",l.toast?"polite":"assertive"),l.toast||h.setAttribute("aria-modal","true")},gu=l=>{window.getComputedStyle(l).direction==="rtl"&&be(I(),p.rtl)},mu=l=>{let h=Cm();if(pu()){U("SweetAlert2 requires document to initialize");return}let y=document.createElement("div");y.className=p.container,h&&be(y,p["no-transition"]),jt(y,Im),y.dataset.swal2Theme=l.theme;let _=Ld(l.target);_.appendChild(y),Oo(l),gu(_),Vd()},Yn=(l,h)=>{l instanceof HTMLElement?h.appendChild(l):typeof l=="object"?jd(l,h):l&&jt(h,l)},jd=(l,h)=>{l.jquery?na(h,l):jt(h,l.toString())},na=(l,h)=>{if(l.textContent="",0 in h)for(let y=0;y in h;y++)l.appendChild(h[y].cloneNode(!0));else l.appendChild(h.cloneNode(!0))},Bd=(l,h)=>{let y=Wn(),_=Ai();!y||!_||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?gt(y):st(y),Gt(y,h,"actions"),Fo(y,_,h),jt(_,h.loaderHtml||""),Gt(_,h,"loader"))};function Fo(l,h,y){let _=bn(),N=zt(),W=Si();!_||!N||!W||(It(_,"confirm",y),It(N,"deny",y),It(W,"cancel",y),Ud(_,N,W,y),y.reverseButtons&&(y.toast?(l.insertBefore(W,_),l.insertBefore(N,_)):(l.insertBefore(W,h),l.insertBefore(N,h),l.insertBefore(_,h))))}function Ud(l,h,y,_){if(!_.buttonsStyling){Yt([l,h,y],p.styled);return}be([l,h,y],p.styled),_.confirmButtonColor&&(l.style.backgroundColor=_.confirmButtonColor,be(l,p["default-outline"])),_.denyButtonColor&&(h.style.backgroundColor=_.denyButtonColor,be(h,p["default-outline"])),_.cancelButtonColor&&(y.style.backgroundColor=_.cancelButtonColor,be(y,p["default-outline"]))}function It(l,h,y){let _=P(h);yr(l,y[`show${_}Button`],"inline-block"),jt(l,y[`${h}ButtonText`]||""),l.setAttribute("aria-label",y[`${h}ButtonAriaLabel`]||""),l.className=p[h],Gt(l,y,`${h}Button`)}let $d=(l,h)=>{let y=lu();y&&(jt(y,h.closeButtonHtml||""),Gt(y,h,"closeButton"),yr(y,h.showCloseButton),y.setAttribute("aria-label",h.closeButtonAriaLabel||""))},Vo=(l,h)=>{let y=I();y&&(Lo(y,h.backdrop),Dm(y,h.position),Tm(y,h.grow),Gt(y,h,"container"))};function Lo(l,h){typeof h=="string"?l.style.background=h:h||be([document.documentElement,document.body],p["no-backdrop"])}function Dm(l,h){h&&(h in p?be(l,p[h]):(R('The "position" parameter is not valid, defaulting to "center"'),be(l,p.center)))}function Tm(l,h){h&&be(l,p[`grow-${h}`])}var ke={innerParams:new WeakMap,domCache:new WeakMap};let Sm=["input","file","range","select","radio","checkbox","textarea"],Am=(l,h)=>{let y=T();if(!y)return;let _=ke.innerParams.get(l),N=!_||h.input!==_.input;Sm.forEach(W=>{let ye=mr(y,p[W]);ye&&(yu(W,h.inputAttributes),ye.className=p[W],N&&gt(ye))}),h.input&&(N&&ra(h),ia(h))},ra=l=>{if(!l.input)return;if(!Qe[l.input]){U(`Unexpected type of input! Expected ${Object.keys(Qe).join(" | ")}, got "${l.input}"`);return}let h=vu(l.input);if(!h)return;let y=Qe[l.input](h,l);st(h),l.inputAutoFocus&&setTimeout(()=>{hu(y)})},Hd=l=>{for(let h=0;h<l.attributes.length;h++){let y=l.attributes[h].name;["id","type","value","style"].includes(y)||l.removeAttribute(y)}},yu=(l,h)=>{let y=T();if(!y)return;let _=ea(y,l);if(_){Hd(_);for(let N in h)_.setAttribute(N,h[N])}},ia=l=>{if(!l.input)return;let h=vu(l.input);h&&Gt(h,l,"input")},Rn=(l,h)=>{!l.placeholder&&h.inputPlaceholder&&(l.placeholder=h.inputPlaceholder)},Pi=(l,h,y)=>{if(y.inputLabel){let _=document.createElement("label"),N=p["input-label"];_.setAttribute("for",l.id),_.className=N,typeof y.customClass=="object"&&be(_,y.customClass.inputLabel),_.innerText=y.inputLabel,h.insertAdjacentElement("beforebegin",_)}},vu=l=>{let h=T();if(h)return mr(h,p[l]||p.input)},ki=(l,h)=>{["string","number"].includes(typeof h)?l.value=`${h}`:E(h)||R(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof h}"`)},Qe={};Qe.text=Qe.email=Qe.password=Qe.number=Qe.tel=Qe.url=Qe.search=Qe.date=Qe["datetime-local"]=Qe.time=Qe.week=Qe.month=(l,h)=>(ki(l,h.inputValue),Pi(l,l,h),Rn(l,h),l.type=h.input,l),Qe.file=(l,h)=>(Pi(l,l,h),Rn(l,h),l),Qe.range=(l,h)=>{let y=l.querySelector("input"),_=l.querySelector("output");return ki(y,h.inputValue),y.type=h.input,ki(_,h.inputValue),Pi(y,l,h),l},Qe.select=(l,h)=>{if(l.textContent="",h.inputPlaceholder){let y=document.createElement("option");jt(y,h.inputPlaceholder),y.value="",y.disabled=!0,y.selected=!0,l.appendChild(y)}return Pi(l,l,h),l},Qe.radio=l=>(l.textContent="",l),Qe.checkbox=(l,h)=>{let y=ea(T(),"checkbox");y.value="1",y.checked=!!h.inputValue;let _=l.querySelector("span");return jt(_,h.inputPlaceholder||h.inputLabel),y},Qe.textarea=(l,h)=>{ki(l,h.inputValue),Rn(l,h),Pi(l,l,h);let y=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let _=parseInt(window.getComputedStyle(T()).width),N=()=>{if(!document.body.contains(l))return;let W=l.offsetWidth+y(l);W>_?T().style.width=`${W}px`:Kn(T(),"width",h.width)};new MutationObserver(N).observe(l,{attributes:!0,attributeFilter:["style"]})}}),l};let qd=(l,h)=>{let y=uu();y&&(mt(y),Gt(y,h,"htmlContainer"),h.html?(Yn(h.html,y),st(y,"block")):h.text?(y.textContent=h.text,st(y,"block")):gt(y),Am(l,h))},zd=(l,h)=>{let y=Nd();y&&(mt(y),yr(y,h.footer,"block"),h.footer&&Yn(h.footer,y),Gt(y,h,"footer"))},xm=(l,h)=>{let y=ke.innerParams.get(l),_=C();if(!_)return;if(y&&h.icon===y.icon){vr(_,h),jo(_,h);return}if(!h.icon&&!h.iconHtml){gt(_);return}if(h.icon&&Object.keys(b).indexOf(h.icon)===-1){U(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${h.icon}"`),gt(_);return}st(_),vr(_,h),jo(_,h),be(_,h.showClass&&h.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",wu)},jo=(l,h)=>{for(let[y,_]of Object.entries(b))h.icon!==y&&Yt(l,_);be(l,h.icon&&b[h.icon]),bu(l,h),wu(),Gt(l,h,"icon")},wu=()=>{let l=T();if(!l)return;let h=window.getComputedStyle(l).getPropertyValue("background-color"),y=l.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<y.length;_++)y[_].style.backgroundColor=h},_u=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Bo=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,vr=(l,h)=>{if(!h.icon&&!h.iconHtml)return;let y=l.innerHTML,_="";h.iconHtml?_=Gd(h.iconHtml):h.icon==="success"?(_=_u,y=y.replace(/ style=".*?"/g,"")):h.icon==="error"?_=Bo:h.icon&&(_=Gd({question:"?",warning:"!",info:"i"}[h.icon])),y.trim()!==_.trim()&&jt(l,_)},bu=(l,h)=>{if(h.iconColor){l.style.color=h.iconColor,l.style.borderColor=h.iconColor;for(let y of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Nt(l,y,"background-color",h.iconColor);Nt(l,".swal2-success-ring","border-color",h.iconColor)}},Gd=l=>`<div class="${p["icon-content"]}">${l}</div>`,Wd=(l,h)=>{let y=Di();if(y){if(!h.imageUrl){gt(y);return}st(y,""),y.setAttribute("src",h.imageUrl),y.setAttribute("alt",h.imageAlt||""),Kn(y,"width",h.imageWidth),Kn(y,"height",h.imageHeight),y.className=p.image,Gt(y,h,"image")}},oa=!1,Eu=0,sa=0,aa=0,Iu=0,Kd=l=>{l.addEventListener("mousedown",ca),document.body.addEventListener("mousemove",Uo),l.addEventListener("mouseup",$o),l.addEventListener("touchstart",ca),document.body.addEventListener("touchmove",Uo),l.addEventListener("touchend",$o)},Mm=l=>{l.removeEventListener("mousedown",ca),document.body.removeEventListener("mousemove",Uo),l.removeEventListener("mouseup",$o),l.removeEventListener("touchstart",ca),document.body.removeEventListener("touchmove",Uo),l.removeEventListener("touchend",$o)},ca=l=>{let h=T();if(l.target===h||C().contains(l.target)){oa=!0;let y=Qd(l);Eu=y.clientX,sa=y.clientY,aa=parseInt(h.style.insetInlineStart)||0,Iu=parseInt(h.style.insetBlockStart)||0,be(h,"swal2-dragging")}},Uo=l=>{let h=T();if(oa){let{clientX:y,clientY:_}=Qd(l);h.style.insetInlineStart=`${aa+(y-Eu)}px`,h.style.insetBlockStart=`${Iu+(_-sa)}px`}},$o=()=>{let l=T();oa=!1,Yt(l,"swal2-dragging")},Qd=l=>{let h=0,y=0;return l.type.startsWith("mouse")?(h=l.clientX,y=l.clientY):l.type.startsWith("touch")&&(h=l.touches[0].clientX,y=l.touches[0].clientY),{clientX:h,clientY:y}},Wr=(l,h)=>{let y=I(),_=T();if(!(!y||!_)){if(h.toast){Kn(y,"width",h.width),_.style.width="100%";let N=Ai();N&&_.insertBefore(N,C())}else Kn(_,"width",h.width);Kn(_,"padding",h.padding),h.color&&(_.style.color=h.color),h.background&&(_.style.background=h.background),gt(Ti()),Zn(_,h),h.draggable&&!h.toast?(be(_,p.draggable),Kd(_)):(Yt(_,p.draggable),Mm(_))}},Zn=(l,h)=>{let y=h.showClass||{};l.className=`${p.popup} ${Bt(l)?y.popup:""}`,h.toast?(be([document.documentElement,document.body],p["toast-shown"]),be(l,p.toast)):be(l,p.modal),Gt(l,h,"popup"),typeof h.customClass=="string"&&be(l,h.customClass),h.icon&&be(l,p[`icon-${h.icon}`])},ua=(l,h)=>{let y=Gr();if(!y)return;let{progressSteps:_,currentProgressStep:N}=h;if(!_||_.length===0||N===void 0){gt(y);return}st(y),y.textContent="",N>=_.length&&R("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.forEach((W,ye)=>{let xe=la(W);if(y.appendChild(xe),ye===N&&be(xe,p["active-progress-step"]),ye!==_.length-1){let nt=Yd(h);y.appendChild(nt)}})},la=l=>{let h=document.createElement("li");return be(h,p["progress-step"]),jt(h,l),h},Yd=l=>{let h=document.createElement("li");return be(h,p["progress-step-line"]),l.progressStepsDistance&&Kn(h,"width",l.progressStepsDistance),h},qe=(l,h)=>{let y=Ci();y&&(mt(y),yr(y,h.title||h.titleText,"block"),h.title&&Yn(h.title,y),h.titleText&&(y.innerText=h.titleText),Gt(y,h,"title"))},Ho=(l,h)=>{Wr(l,h),Vo(l,h),ua(l,h),xm(l,h),Wd(l,h),qe(l,h),$d(l,h),qd(l,h),Bd(l,h),zd(l,h);let y=T();typeof h.didRender=="function"&&y&&h.didRender(y),s.eventEmitter.emit("didRender",y)},qo=()=>Bt(T()),Oi=()=>{var l;return(l=bn())===null||l===void 0?void 0:l.click()},Rm=()=>{var l;return(l=zt())===null||l===void 0?void 0:l.click()},Zd=()=>{var l;return(l=Si())===null||l===void 0?void 0:l.click()},Fi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Jd=l=>{l.keydownTarget&&l.keydownHandlerAdded&&(l.keydownTarget.removeEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!1)},Nm=(l,h,y)=>{Jd(l),h.toast||(l.keydownHandler=_=>Xd(h,_,y),l.keydownTarget=h.keydownListenerCapture?window:T(),l.keydownListenerCapture=h.keydownListenerCapture,l.keydownTarget.addEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!0)},Cu=(l,h)=>{var y;let _=xi();if(_.length){l=l+h,l===_.length?l=0:l===-1&&(l=_.length-1),_[l].focus();return}(y=T())===null||y===void 0||y.focus()},Vi=["ArrowRight","ArrowDown"],wr=["ArrowLeft","ArrowUp"],Xd=(l,h,y)=>{l&&(h.isComposing||h.keyCode===229||(l.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?eh(h,l):h.key==="Tab"?th(h):[...Vi,...wr].includes(h.key)?Li(h.key):h.key==="Escape"&&Pm(h,l,y)))},eh=(l,h)=>{if(!ae(h.allowEnterKey))return;let y=ea(T(),h.input);if(l.target&&y&&l.target instanceof HTMLElement&&l.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(h.input))return;Oi(),l.preventDefault()}},th=l=>{let h=l.target,y=xi(),_=-1;for(let N=0;N<y.length;N++)if(h===y[N]){_=N;break}l.shiftKey?Cu(_,-1):Cu(_,1),l.stopPropagation(),l.preventDefault()},Li=l=>{let h=Wn(),y=bn(),_=zt(),N=Si();if(!h||!y||!_||!N)return;let W=[y,_,N];if(document.activeElement instanceof HTMLElement&&!W.includes(document.activeElement))return;let ye=Vi.includes(l)?"nextElementSibling":"previousElementSibling",xe=document.activeElement;if(xe){for(let nt=0;nt<h.children.length;nt++){if(xe=xe[ye],!xe)return;if(xe instanceof HTMLButtonElement&&Bt(xe))break}xe instanceof HTMLButtonElement&&xe.focus()}},Pm=(l,h,y)=>{ae(h.allowEscapeKey)&&(l.preventDefault(),y(Fi.esc))};var ji={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let km=()=>{let l=I();Array.from(document.body.children).forEach(y=>{y.contains(l)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},Jn=()=>{Array.from(document.body.children).forEach(h=>{h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},nh=typeof window<"u"&&!!window.GestureEvent,Om=()=>{if(nh&&!En(document.body,p.iosfix)){let l=document.body.scrollTop;document.body.style.top=`${l*-1}px`,be(document.body,p.iosfix),zo()}},zo=()=>{let l=I();if(!l)return;let h;l.ontouchstart=y=>{h=da(y)},l.ontouchmove=y=>{h&&(y.preventDefault(),y.stopPropagation())}},da=l=>{let h=l.target,y=I(),_=uu();return!y||!_||rh(l)||Go(l)?!1:h===y||!Od(y)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(Od(_)&&_.contains(h))},rh=l=>l.touches&&l.touches.length&&l.touches[0].touchType==="stylus",Go=l=>l.touches&&l.touches.length>1,Wo=()=>{if(En(document.body,p.iosfix)){let l=parseInt(document.body.style.top,10);Yt(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=l*-1}},ih=()=>{let l=document.createElement("div");l.className=p["scrollbar-measure"],document.body.appendChild(l);let h=l.getBoundingClientRect().width-l.clientWidth;return document.body.removeChild(l),h},_r=null,Xe=l=>{_r===null&&(document.body.scrollHeight>window.innerHeight||l==="scroll")&&(_r=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${_r+ih()}px`)},Fm=()=>{_r!==null&&(document.body.style.paddingRight=`${_r}px`,_r=null)};function oh(l,h,y,_){Ri()?Ui(l,_):(c(y).then(()=>Ui(l,_)),Jd(s)),nh?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),Mi()&&(Fm(),Wo(),Jn()),sh()}function sh(){Yt([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}function Xn(l){l=er(l);let h=ji.swalPromiseResolve.get(this),y=ah(this);this.isAwaitingPromise?l.isDismissed||(Bi(this),h(l)):y&&h(l)}let ah=l=>{let h=T();if(!h)return!1;let y=ke.innerParams.get(l);if(!y||En(h,y.hideClass.popup))return!1;Yt(h,y.showClass.popup),be(h,y.hideClass.popup);let _=I();return Yt(_,y.showClass.backdrop),be(_,y.hideClass.backdrop),ch(l,h,y),!0};function Ko(l){let h=ji.swalPromiseReject.get(this);Bi(this),h&&h(l)}let Bi=l=>{l.isAwaitingPromise&&(delete l.isAwaitingPromise,ke.innerParams.get(l)||l._destroy())},er=l=>typeof l>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},l),ch=(l,h,y)=>{var _;let N=I(),W=Ni(h);typeof y.willClose=="function"&&y.willClose(h),(_=s.eventEmitter)===null||_===void 0||_.emit("willClose",h),W?Vm(l,h,N,y.returnFocus,y.didClose):oh(l,N,y.returnFocus,y.didClose)},Vm=(l,h,y,_,N)=>{s.swalCloseEventFinishedCallback=oh.bind(null,l,y,_,N);let W=function(ye){if(ye.target===h){var xe;(xe=s.swalCloseEventFinishedCallback)===null||xe===void 0||xe.call(s),delete s.swalCloseEventFinishedCallback,h.removeEventListener("animationend",W),h.removeEventListener("transitionend",W)}};h.addEventListener("animationend",W),h.addEventListener("transitionend",W)},Ui=(l,h)=>{setTimeout(()=>{var y;typeof h=="function"&&h.bind(l.params)(),(y=s.eventEmitter)===null||y===void 0||y.emit("didClose"),l._destroy&&l._destroy()})},Kr=l=>{let h=T();if(h||new _h,h=T(),!h)return;let y=Ai();Ri()?gt(C()):Du(h,l),st(y),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()},Du=(l,h)=>{let y=Wn(),_=Ai();!y||!_||(!h&&Bt(bn())&&(h=bn()),st(y),h&&(gt(h),_.setAttribute("data-button-to-replace",h.className),y.insertBefore(_,h)),be([l,y],p.loading))},ha=(l,h)=>{h.input==="select"||h.input==="radio"?Qo(l,h):["text","email","number","tel","textarea"].some(y=>y===h.input)&&(ie(h.inputValue)||E(h.inputValue))&&(Kr(bn()),dh(l,h))},uh=(l,h)=>{let y=l.getInput();if(!y)return null;switch(h.input){case"checkbox":return fa(y);case"radio":return Lm(y);case"file":return lh(y);default:return h.inputAutoTrim?y.value.trim():y.value}},fa=l=>l.checked?1:0,Lm=l=>l.checked?l.value:null,lh=l=>l.files&&l.files.length?l.getAttribute("multiple")!==null?l.files:l.files[0]:null,Qo=(l,h)=>{let y=T();if(!y)return;let _=N=>{h.input==="select"?hh(y,$i(N),h):h.input==="radio"&&Tu(y,$i(N),h)};ie(h.inputOptions)||E(h.inputOptions)?(Kr(bn()),D(h.inputOptions).then(N=>{l.hideLoading(),_(N)})):typeof h.inputOptions=="object"?_(h.inputOptions):U(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof h.inputOptions}`)},dh=(l,h)=>{let y=l.getInput();y&&(gt(y),D(h.inputValue).then(_=>{y.value=h.input==="number"?`${parseFloat(_)||0}`:`${_}`,st(y),y.focus(),l.hideLoading()}).catch(_=>{U(`Error in inputValue promise: ${_}`),y.value="",st(y),y.focus(),l.hideLoading()}))};function hh(l,h,y){let _=mr(l,p.select);if(!_)return;let N=(W,ye,xe)=>{let nt=document.createElement("option");nt.value=xe,jt(nt,ye),nt.selected=Su(xe,y.inputValue),W.appendChild(nt)};h.forEach(W=>{let ye=W[0],xe=W[1];if(Array.isArray(xe)){let nt=document.createElement("optgroup");nt.label=ye,nt.disabled=!1,_.appendChild(nt),xe.forEach(ya=>N(nt,ya[1],ya[0]))}else N(_,xe,ye)}),_.focus()}function Tu(l,h,y){let _=mr(l,p.radio);if(!_)return;h.forEach(W=>{let ye=W[0],xe=W[1],nt=document.createElement("input"),ya=document.createElement("label");nt.type="radio",nt.name=p.radio,nt.value=ye,Su(ye,y.inputValue)&&(nt.checked=!0);let Um=document.createElement("span");jt(Um,xe),Um.className=p.label,ya.appendChild(nt),ya.appendChild(Um),_.appendChild(ya)});let N=_.querySelectorAll("input");N.length&&N[0].focus()}let $i=l=>{let h=[];return l instanceof Map?l.forEach((y,_)=>{let N=y;typeof N=="object"&&(N=$i(N)),h.push([_,N])}):Object.keys(l).forEach(y=>{let _=l[y];typeof _=="object"&&(_=$i(_)),h.push([y,_])}),h},Su=(l,h)=>!!h&&h.toString()===l.toString(),pa=l=>{let h=ke.innerParams.get(l);l.disableButtons(),h.input?br(l,"confirm"):Hi(l,!0)},fh=l=>{let h=ke.innerParams.get(l);l.disableButtons(),h.returnInputValueOnDeny?br(l,"deny"):ga(l,!1)},ph=(l,h)=>{l.disableButtons(),h(Fi.cancel)},br=(l,h)=>{let y=ke.innerParams.get(l);if(!y.input){U(`The "input" parameter is needed to be set when using returnInputValueOn${P(h)}`);return}let _=l.getInput(),N=uh(l,y);y.inputValidator?gh(l,N,h):_&&!_.checkValidity()?(l.enableButtons(),l.showValidationMessage(y.validationMessage||_.validationMessage)):h==="deny"?ga(l,N):Hi(l,N)},gh=(l,h,y)=>{let _=ke.innerParams.get(l);l.disableInput(),Promise.resolve().then(()=>D(_.inputValidator(h,_.validationMessage))).then(W=>{l.enableButtons(),l.enableInput(),W?l.showValidationMessage(W):y==="deny"?ga(l,h):Hi(l,h)})},ga=(l,h)=>{let y=ke.innerParams.get(l||void 0);y.showLoaderOnDeny&&Kr(zt()),y.preDeny?(l.isAwaitingPromise=!0,Promise.resolve().then(()=>D(y.preDeny(h,y.validationMessage))).then(N=>{N===!1?(l.hideLoading(),Bi(l)):l.close({isDenied:!0,value:typeof N>"u"?h:N})}).catch(N=>xu(l||void 0,N))):l.close({isDenied:!0,value:h})},Au=(l,h)=>{l.close({isConfirmed:!0,value:h})},xu=(l,h)=>{l.rejectPromise(h)},Hi=(l,h)=>{let y=ke.innerParams.get(l||void 0);y.showLoaderOnConfirm&&Kr(),y.preConfirm?(l.resetValidationMessage(),l.isAwaitingPromise=!0,Promise.resolve().then(()=>D(y.preConfirm(h,y.validationMessage))).then(N=>{Bt(Ti())||N===!1?(l.hideLoading(),Bi(l)):Au(l,typeof N>"u"?h:N)}).catch(N=>xu(l||void 0,N))):Au(l,h)};function Pt(){let l=ke.innerParams.get(this);if(!l)return;let h=ke.domCache.get(this);gt(h.loader),Ri()?l.icon&&st(C()):mh(h),Yt([h.popup,h.actions],p.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}let mh=l=>{let h=l.popup.getElementsByClassName(l.loader.getAttribute("data-button-to-replace"));h.length?st(h[0],"inline-block"):kd()&&gt(l.actions)};function Mu(){let l=ke.innerParams.get(this),h=ke.domCache.get(this);return h?ea(h.popup,l.input):null}function Qr(l,h,y){let _=ke.domCache.get(l);h.forEach(N=>{_[N].disabled=y})}function u(l,h){let y=T();if(!(!y||!l))if(l.type==="radio"){let _=y.querySelectorAll(`[name="${p.radio}"]`);for(let N=0;N<_.length;N++)_[N].disabled=h}else l.disabled=h}function f(){Qr(this,["confirmButton","denyButton","cancelButton"],!1)}function m(){Qr(this,["confirmButton","denyButton","cancelButton"],!0)}function v(){u(this.getInput(),!1)}function x(){u(this.getInput(),!0)}function O(l){let h=ke.domCache.get(this),y=ke.innerParams.get(this);jt(h.validationMessage,l),h.validationMessage.className=p["validation-message"],y.customClass&&y.customClass.validationMessage&&be(h.validationMessage,y.customClass.validationMessage),st(h.validationMessage);let _=this.getInput();_&&(_.setAttribute("aria-invalid","true"),_.setAttribute("aria-describedby",p["validation-message"]),hu(_),be(_,p.inputerror))}function q(){let l=ke.domCache.get(this);l.validationMessage&&gt(l.validationMessage);let h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),Yt(h,p.inputerror))}let Se={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ct=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Ae={allowEnterKey:void 0},kt=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Dt=l=>Object.prototype.hasOwnProperty.call(Se,l),Yr=l=>Ct.indexOf(l)!==-1,un=l=>Ae[l],ma=l=>{Dt(l)||R(`Unknown parameter "${l}"`)},Ru=l=>{kt.includes(l)&&R(`The parameter "${l}" is incompatible with toasts`)},$N=l=>{let h=un(l);h&&ne(l,h)},VE=l=>{l.backdrop===!1&&l.allowOutsideClick&&R('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),l.theme&&!["light","dark","auto","borderless"].includes(l.theme)&&R(`Invalid theme "${l.theme}". Expected "light", "dark", "auto", or "borderless"`);for(let h in l)ma(h),l.toast&&Ru(h),$N(h)};function LE(l){let h=I(),y=T(),_=ke.innerParams.get(this);if(!y||En(y,_.hideClass.popup)){R("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let N=HN(l),W=Object.assign({},_,N);VE(W),h.dataset.swal2Theme=W.theme,Ho(this,W),ke.innerParams.set(this,W),Object.defineProperties(this,{params:{value:Object.assign({},this.params,l),writable:!1,enumerable:!0}})}let HN=l=>{let h={};return Object.keys(l).forEach(y=>{Yr(y)?h[y]=l[y]:R(`Invalid parameter to update: ${y}`)}),h};function jE(){let l=ke.domCache.get(this),h=ke.innerParams.get(this);if(!h){BE(this);return}l.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof h.didDestroy=="function"&&h.didDestroy(),s.eventEmitter.emit("didDestroy"),qN(this)}let qN=l=>{BE(l),delete l.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},BE=l=>{l.isAwaitingPromise?(jm(ke,l),l.isAwaitingPromise=!0):(jm(ji,l),jm(ke,l),delete l.isAwaitingPromise,delete l.disableButtons,delete l.enableButtons,delete l.getInput,delete l.disableInput,delete l.enableInput,delete l.hideLoading,delete l.disableLoading,delete l.showValidationMessage,delete l.resetValidationMessage,delete l.close,delete l.closePopup,delete l.closeModal,delete l.closeToast,delete l.rejectPromise,delete l.update,delete l._destroy)},jm=(l,h)=>{for(let y in l)l[y].delete(h)};var zN=Object.freeze({__proto__:null,_destroy:jE,close:Xn,closeModal:Xn,closePopup:Xn,closeToast:Xn,disableButtons:m,disableInput:x,disableLoading:Pt,enableButtons:f,enableInput:v,getInput:Mu,handleAwaitingPromise:Bi,hideLoading:Pt,rejectPromise:Ko,resetValidationMessage:q,showValidationMessage:O,update:LE});let GN=(l,h,y)=>{l.toast?WN(l,h,y):(QN(h),YN(h),ZN(l,h,y))},WN=(l,h,y)=>{h.popup.onclick=()=>{l&&(KN(l)||l.timer||l.input)||y(Fi.close)}},KN=l=>!!(l.showConfirmButton||l.showDenyButton||l.showCancelButton||l.showCloseButton),yh=!1,QN=l=>{l.popup.onmousedown=()=>{l.container.onmouseup=function(h){l.container.onmouseup=()=>{},h.target===l.container&&(yh=!0)}}},YN=l=>{l.container.onmousedown=h=>{h.target===l.container&&h.preventDefault(),l.popup.onmouseup=function(y){l.popup.onmouseup=()=>{},(y.target===l.popup||y.target instanceof HTMLElement&&l.popup.contains(y.target))&&(yh=!0)}}},ZN=(l,h,y)=>{h.container.onclick=_=>{if(yh){yh=!1;return}_.target===h.container&&ae(l.allowOutsideClick)&&y(Fi.backdrop)}},JN=l=>typeof l=="object"&&l.jquery,UE=l=>l instanceof Element||JN(l),XN=l=>{let h={};return typeof l[0]=="object"&&!UE(l[0])?Object.assign(h,l[0]):["title","html","icon"].forEach((y,_)=>{let N=l[_];typeof N=="string"||UE(N)?h[y]=N:N!==void 0&&U(`Unexpected type of ${y}! Expected "string" or "Element", got ${typeof N}`)}),h};function e1(){for(var l=arguments.length,h=new Array(l),y=0;y<l;y++)h[y]=arguments[y];return new this(...h)}function t1(l){class h extends this{_main(_,N){return super._main(_,Object.assign({},l,N))}}return h}let n1=()=>s.timeout&&s.timeout.getTimerLeft(),$E=()=>{if(s.timeout)return Fd(),s.timeout.stop()},HE=()=>{if(s.timeout){let l=s.timeout.start();return ta(l),l}},r1=()=>{let l=s.timeout;return l&&(l.running?$E():HE())},i1=l=>{if(s.timeout){let h=s.timeout.increase(l);return ta(h,!0),h}},o1=()=>!!(s.timeout&&s.timeout.isRunning()),qE=!1,Bm={};function s1(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Bm[l]=this,qE||(document.body.addEventListener("click",a1),qE=!0)}let a1=l=>{for(let h=l.target;h&&h!==document;h=h.parentNode)for(let y in Bm){let _=h.getAttribute(y);if(_){Bm[y].fire({template:_});return}}};class c1{constructor(){this.events={}}_getHandlersByEventName(h){return typeof this.events[h]>"u"&&(this.events[h]=[]),this.events[h]}on(h,y){let _=this._getHandlersByEventName(h);_.includes(y)||_.push(y)}once(h,y){var _=this;let N=function(){_.removeListener(h,N);for(var W=arguments.length,ye=new Array(W),xe=0;xe<W;xe++)ye[xe]=arguments[xe];y.apply(_,ye)};this.on(h,N)}emit(h){for(var y=arguments.length,_=new Array(y>1?y-1:0),N=1;N<y;N++)_[N-1]=arguments[N];this._getHandlersByEventName(h).forEach(W=>{try{W.apply(this,_)}catch(ye){console.error(ye)}})}removeListener(h,y){let _=this._getHandlersByEventName(h),N=_.indexOf(y);N>-1&&_.splice(N,1)}removeAllListeners(h){this.events[h]!==void 0&&(this.events[h].length=0)}reset(){this.events={}}}s.eventEmitter=new c1;var u1=Object.freeze({__proto__:null,argsToParams:XN,bindClickHandler:s1,clickCancel:Zd,clickConfirm:Oi,clickDeny:Rm,enableLoading:Kr,fire:e1,getActions:Wn,getCancelButton:Si,getCloseButton:lu,getConfirmButton:bn,getContainer:I,getDenyButton:zt,getFocusableElements:xi,getFooter:Nd,getHtmlContainer:uu,getIcon:C,getIconContent:Gn,getImage:Di,getInputLabel:Rt,getLoader:Ai,getPopup:T,getProgressSteps:Gr,getTimerLeft:n1,getTimerProgressBar:gr,getTitle:Ci,getValidationMessage:Ti,increaseTimer:i1,isDeprecatedParameter:un,isLoading:du,isTimerRunning:o1,isUpdatableParameter:Yr,isValidParameter:Dt,isVisible:qo,mixin:t1,off:(l,h)=>{if(!l){s.eventEmitter.reset();return}h?s.eventEmitter.removeListener(l,h):s.eventEmitter.removeAllListeners(l)},on:(l,h)=>{s.eventEmitter.on(l,h)},once:(l,h)=>{s.eventEmitter.once(l,h)},resumeTimer:HE,showLoading:Kr,stopTimer:$E,toggleTimer:r1});class l1{constructor(h,y){this.callback=h,this.remaining=y,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(h){let y=this.running;return y&&this.stop(),this.remaining+=h,y&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let zE=["swal-title","swal-html","swal-footer"],d1=l=>{let h=typeof l.template=="string"?document.querySelector(l.template):l.template;if(!h)return{};let y=h.content;return w1(y),Object.assign(h1(y),f1(y),p1(y),g1(y),m1(y),y1(y),v1(y,zE))},h1=l=>{let h={};return Array.from(l.querySelectorAll("swal-param")).forEach(_=>{Yo(_,["name","value"]);let N=_.getAttribute("name"),W=_.getAttribute("value");!N||!W||(typeof Se[N]=="boolean"?h[N]=W!=="false":typeof Se[N]=="object"?h[N]=JSON.parse(W):h[N]=W)}),h},f1=l=>{let h={};return Array.from(l.querySelectorAll("swal-function-param")).forEach(_=>{let N=_.getAttribute("name"),W=_.getAttribute("value");!N||!W||(h[N]=new Function(`return ${W}`)())}),h},p1=l=>{let h={};return Array.from(l.querySelectorAll("swal-button")).forEach(_=>{Yo(_,["type","color","aria-label"]);let N=_.getAttribute("type");!N||!["confirm","cancel","deny"].includes(N)||(h[`${N}ButtonText`]=_.innerHTML,h[`show${P(N)}Button`]=!0,_.hasAttribute("color")&&(h[`${N}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(h[`${N}ButtonAriaLabel`]=_.getAttribute("aria-label")))}),h},g1=l=>{let h={},y=l.querySelector("swal-image");return y&&(Yo(y,["src","width","height","alt"]),y.hasAttribute("src")&&(h.imageUrl=y.getAttribute("src")||void 0),y.hasAttribute("width")&&(h.imageWidth=y.getAttribute("width")||void 0),y.hasAttribute("height")&&(h.imageHeight=y.getAttribute("height")||void 0),y.hasAttribute("alt")&&(h.imageAlt=y.getAttribute("alt")||void 0)),h},m1=l=>{let h={},y=l.querySelector("swal-icon");return y&&(Yo(y,["type","color"]),y.hasAttribute("type")&&(h.icon=y.getAttribute("type")),y.hasAttribute("color")&&(h.iconColor=y.getAttribute("color")),h.iconHtml=y.innerHTML),h},y1=l=>{let h={},y=l.querySelector("swal-input");y&&(Yo(y,["type","label","placeholder","value"]),h.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(h.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(h.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(h.inputValue=y.getAttribute("value")));let _=Array.from(l.querySelectorAll("swal-input-option"));return _.length&&(h.inputOptions={},_.forEach(N=>{Yo(N,["value"]);let W=N.getAttribute("value");if(!W)return;let ye=N.innerHTML;h.inputOptions[W]=ye})),h},v1=(l,h)=>{let y={};for(let _ in h){let N=h[_],W=l.querySelector(N);W&&(Yo(W,[]),y[N.replace(/^swal-/,"")]=W.innerHTML.trim())}return y},w1=l=>{let h=zE.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(l.children).forEach(y=>{let _=y.tagName.toLowerCase();h.includes(_)||R(`Unrecognized element <${_}>`)})},Yo=(l,h)=>{Array.from(l.attributes).forEach(y=>{h.indexOf(y.name)===-1&&R([`Unrecognized attribute "${y.name}" on <${l.tagName.toLowerCase()}>.`,`${h.length?`Allowed attributes are: ${h.join(", ")}`:"To set the value, use HTML within the element."}`])})},GE=10,_1=l=>{let h=I(),y=T();typeof l.willOpen=="function"&&l.willOpen(y),s.eventEmitter.emit("willOpen",y);let N=window.getComputedStyle(document.body).overflowY;I1(h,y,l),setTimeout(()=>{b1(h,y)},GE),Mi()&&(E1(h,l.scrollbarPadding,N),km()),!Ri()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof l.didOpen=="function"&&setTimeout(()=>l.didOpen(y)),s.eventEmitter.emit("didOpen",y),Yt(h,p["no-transition"])},vh=l=>{let h=T();if(l.target!==h)return;let y=I();h.removeEventListener("animationend",vh),h.removeEventListener("transitionend",vh),y.style.overflowY="auto"},b1=(l,h)=>{Ni(h)?(l.style.overflowY="hidden",h.addEventListener("animationend",vh),h.addEventListener("transitionend",vh)):l.style.overflowY="auto"},E1=(l,h,y)=>{Om(),h&&y!=="hidden"&&Xe(y),setTimeout(()=>{l.scrollTop=0})},I1=(l,h,y)=>{be(l,y.showClass.backdrop),y.animation?(h.style.setProperty("opacity","0","important"),st(h,"grid"),setTimeout(()=>{be(h,y.showClass.popup),h.style.removeProperty("opacity")},GE)):st(h,"grid"),be([document.documentElement,document.body],p.shown),y.heightAuto&&y.backdrop&&!y.toast&&be([document.documentElement,document.body],p["height-auto"])};var WE={email:(l,h)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid email address"),url:(l,h)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid URL")};function C1(l){l.inputValidator||(l.input==="email"&&(l.inputValidator=WE.email),l.input==="url"&&(l.inputValidator=WE.url))}function D1(l){(!l.target||typeof l.target=="string"&&!document.querySelector(l.target)||typeof l.target!="string"&&!l.target.appendChild)&&(R('Target parameter is not valid, defaulting to "body"'),l.target="body")}function T1(l){C1(l),l.showLoaderOnConfirm&&!l.preConfirm&&R(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),D1(l),typeof l.title=="string"&&(l.title=l.title.split(`
`).join("<br />")),mu(l)}let Er;var wh=new WeakMap;class lt{constructor(){if(r(this,wh,void 0),typeof window>"u")return;Er=this;for(var h=arguments.length,y=new Array(h),_=0;_<h;_++)y[_]=arguments[_];let N=Object.freeze(this.constructor.argsToParams(y));this.params=N,this.isAwaitingPromise=!1,i(wh,this,this._main(Er.params))}_main(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(VE(Object.assign({},y,h)),s.currentInstance){let W=ji.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:ye}=s.currentInstance;s.currentInstance._destroy(),ye||W({isDismissed:!0}),Mi()&&Jn()}s.currentInstance=Er;let _=A1(h,y);T1(_),Object.freeze(_),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let N=x1(Er);return Ho(Er,_),ke.innerParams.set(Er,_),S1(Er,N,_)}then(h){return t(wh,this).then(h)}finally(h){return t(wh,this).finally(h)}}let S1=(l,h,y)=>new Promise((_,N)=>{let W=ye=>{l.close({isDismissed:!0,dismiss:ye})};ji.swalPromiseResolve.set(l,_),ji.swalPromiseReject.set(l,N),h.confirmButton.onclick=()=>{pa(l)},h.denyButton.onclick=()=>{fh(l)},h.cancelButton.onclick=()=>{ph(l,W)},h.closeButton.onclick=()=>{W(Fi.close)},GN(y,h,W),Nm(s,y,W),ha(l,y),_1(y),M1(s,y,W),R1(h,y),setTimeout(()=>{h.container.scrollTop=0})}),A1=(l,h)=>{let y=d1(l),_=Object.assign({},Se,h,y,l);return _.showClass=Object.assign({},Se.showClass,_.showClass),_.hideClass=Object.assign({},Se.hideClass,_.hideClass),_.animation===!1&&(_.showClass={backdrop:"swal2-noanimation"},_.hideClass={}),_},x1=l=>{let h={popup:T(),container:I(),actions:Wn(),confirmButton:bn(),denyButton:zt(),cancelButton:Si(),loader:Ai(),closeButton:lu(),validationMessage:Ti(),progressSteps:Gr()};return ke.domCache.set(l,h),h},M1=(l,h,y)=>{let _=gr();gt(_),h.timer&&(l.timeout=new l1(()=>{y("timer"),delete l.timeout},h.timer),h.timerProgressBar&&(st(_),Gt(_,h,"timerProgressBar"),setTimeout(()=>{l.timeout&&l.timeout.running&&ta(h.timer)})))},R1=(l,h)=>{if(!h.toast){if(!ae(h.allowEnterKey)){ne("allowEnterKey"),k1();return}N1(l)||P1(l,h)||Cu(-1,1)}},N1=l=>{let h=Array.from(l.popup.querySelectorAll("[autofocus]"));for(let y of h)if(y instanceof HTMLElement&&Bt(y))return y.focus(),!0;return!1},P1=(l,h)=>h.focusDeny&&Bt(l.denyButton)?(l.denyButton.focus(),!0):h.focusCancel&&Bt(l.cancelButton)?(l.cancelButton.focus(),!0):h.focusConfirm&&Bt(l.confirmButton)?(l.confirmButton.focus(),!0):!1,k1=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let l=new Date,h=localStorage.getItem("swal-initiation");h?(l.getTime()-Date.parse(h))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(()=>{y.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${l}`)}lt.prototype.disableButtons=m,lt.prototype.enableButtons=f,lt.prototype.getInput=Mu,lt.prototype.disableInput=x,lt.prototype.enableInput=v,lt.prototype.hideLoading=Pt,lt.prototype.disableLoading=Pt,lt.prototype.showValidationMessage=O,lt.prototype.resetValidationMessage=q,lt.prototype.close=Xn,lt.prototype.closePopup=Xn,lt.prototype.closeModal=Xn,lt.prototype.closeToast=Xn,lt.prototype.rejectPromise=Ko,lt.prototype.update=LE,lt.prototype._destroy=jE,Object.assign(lt,u1),Object.keys(zN).forEach(l=>{lt[l]=function(){return Er&&Er[l]?Er[l](...arguments):null}}),lt.DismissReason=Fi,lt.version="11.17.2";let _h=lt;return _h.default=_h,_h});typeof Or<"u"&&Or.Sweetalert2&&(Or.swal=Or.sweetAlert=Or.Swal=Or.SweetAlert=Or.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});function rI(n,e){return Object.is(n,e)}var Tt=null,Ch=!1,Dh=1,Zr=Symbol("SIGNAL");function Oe(n){let e=Tt;return Tt=n,e}function iI(){return Tt}var Ou={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Km(n){if(Ch)throw new Error("");if(Tt===null)return;Tt.consumerOnSignalRead(n);let e=Tt.nextProducerIndex++;if(xh(Tt),e<Tt.producerNode.length&&Tt.producerNode[e]!==n&&ku(Tt)){let t=Tt.producerNode[e];Ah(t,Tt.producerIndexOfThis[e])}Tt.producerNode[e]!==n&&(Tt.producerNode[e]=n,Tt.producerIndexOfThis[e]=ku(Tt)?cI(n,Tt,e):0),Tt.producerLastReadVersion[e]=n.version}function F1(){Dh++}function oI(n){if(!(ku(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Dh)){if(!n.producerMustRecompute(n)&&!Ym(n)){n.dirty=!1,n.lastCleanEpoch=Dh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Dh}}function sI(n){if(n.liveConsumerNode===void 0)return;let e=Ch;Ch=!0;try{for(let t of n.liveConsumerNode)t.dirty||V1(t)}finally{Ch=e}}function aI(){return Tt?.consumerAllowSignalWrites!==!1}function V1(n){n.dirty=!0,sI(n),n.consumerMarkedDirty?.(n)}function Sh(n){return n&&(n.nextProducerIndex=0),Oe(n)}function Qm(n,e){if(Oe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ku(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ah(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ym(n){xh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(oI(t),r!==t.version))return!0}return!1}function Zm(n){if(xh(n),ku(n))for(let e=0;e<n.producerNode.length;e++)Ah(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cI(n,e,t){if(uI(n),n.liveConsumerNode.length===0&&lI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=cI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ah(n,e){if(uI(n),n.liveConsumerNode.length===1&&lI(n))for(let r=0;r<n.producerNode.length;r++)Ah(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];xh(i),i.producerIndexOfThis[r]=e}}function ku(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function xh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function lI(n){return n.producerNode!==void 0}function dI(n){let e=Object.create(L1);e.computation=n;let t=()=>{if(oI(e),Km(e),e.value===Th)throw e.error;return e.value};return t[Zr]=e,t}var Gm=Symbol("UNSET"),Wm=Symbol("COMPUTING"),Th=Symbol("ERRORED"),L1=Ee(L({},Ou),{value:Gm,dirty:!0,error:null,equal:rI,producerMustRecompute(n){return n.value===Gm||n.value===Wm},producerRecomputeValue(n){if(n.value===Wm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Wm;let t=Sh(n),r;try{r=n.computation()}catch(i){r=Th,n.error=i}finally{Qm(n,t)}if(e!==Gm&&e!==Th&&r!==Th&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function j1(){throw new Error}var hI=j1;function fI(){hI()}function pI(n){hI=n}var B1=null;function gI(n){let e=Object.create(yI);e.value=n;let t=()=>(Km(e),e.value);return t[Zr]=e,t}function Jm(n,e){aI()||fI(),n.equal(n.value,e)||(n.value=e,U1(n))}function mI(n,e){aI()||fI(),Jm(n,e(n.value))}var yI=Ee(L({},Ou),{equal:rI,value:void 0});function U1(n){n.version++,F1(),sI(n),B1?.()}function le(n){return typeof n=="function"}function va(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mh=va(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var at=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof Mh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vI(o)}catch(s){e=e??[],s instanceof Mh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Mh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xo(t,e)}remove(e){let{_finalizers:t}=this;t&&Xo(t,e),e instanceof n&&e._removeParent(this)}};at.EMPTY=(()=>{let n=new at;return n.closed=!0,n})();var Xm=at.EMPTY;function Rh(n){return n instanceof at||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function vI(n){le(n)?n():n.unsubscribe()}var tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wa={setTimeout(n,e,...t){let{delegate:r}=wa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=wa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Nh(n){wa.setTimeout(()=>{let{onUnhandledError:e}=tr;if(e)e(n);else throw n})}function Fu(){}var wI=ey("C",void 0,void 0);function _I(n){return ey("E",void 0,n)}function bI(n){return ey("N",n,void 0)}function ey(n,e,t){return{kind:n,value:e,error:t}}var es=null;function _a(n){if(tr.useDeprecatedSynchronousErrorHandling){let e=!es;if(e&&(es={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=es;if(es=null,t)throw r}}else n()}function EI(n){tr.useDeprecatedSynchronousErrorHandling&&es&&(es.errorThrown=!0,es.error=n)}var ts=class extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rh(e)&&e.add(this)):this.destination=q1}static create(e,t,r){return new Jr(e,t,r)}next(e){this.isStopped?ny(bI(e),this):this._next(e)}error(e){this.isStopped?ny(_I(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ny(wI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$1=Function.prototype.bind;function ty(n,e){return $1.call(n,e)}var ry=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ph(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ph(r)}else Ph(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ph(t)}}},Jr=class extends ts{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&tr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ty(e.next,o),error:e.error&&ty(e.error,o),complete:e.complete&&ty(e.complete,o)}):i=e}this.destination=new ry(i)}};function Ph(n){tr.useDeprecatedSynchronousErrorHandling?EI(n):Nh(n)}function H1(n){throw n}function ny(n,e){let{onStoppedNotification:t}=tr;t&&wa.setTimeout(()=>t(n,e))}var q1={closed:!0,next:Fu,error:H1,complete:Fu};var ba=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zt(n){return n}function iy(...n){return oy(n)}function oy(n){return n.length===0?Zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=G1(t)?t:new Jr(t,r,i);return _a(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=II(r),new r((i,o)=>{let s=new Jr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ba](){return this}pipe(...t){return oy(t)(this)}toPromise(t){return t=II(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function II(n){var e;return(e=n??tr.Promise)!==null&&e!==void 0?e:Promise}function z1(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function G1(n){return n&&n instanceof ts||z1(n)&&Rh(n)}function sy(n){return le(n?.lift)}function ve(n){return e=>{if(sy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(n,e,t,r,i){return new ay(n,e,t,r,i)}var ay=class extends ts{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ea(){return ve((n,e)=>{let t=null;n._refCount++;let r=we(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ia=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;let t=this.getSubject();e.add(this.source.subscribe(we(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return Ea()(this)}};var CI=va(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new kh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new CI}next(t){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Xm:(this.currentObservers=null,o.push(t),new at(()=>{this.currentObservers=null,Xo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new kh(e,t),n})(),kh=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Xm}};var Ut=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vu={now(){return(Vu.delegate||Date).now()},delegate:void 0};var Oh=class extends et{constructor(e=1/0,t=1/0,r=Vu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Fh=class extends at{constructor(e,t){super()}schedule(e,t=0){return this}};var Lu={setInterval(n,e,...t){let{delegate:r}=Lu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Lu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ca=class extends Fh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Lu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Lu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Da=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Da.now=Vu.now;var Ta=class extends Da{constructor(e,t=Da.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ju=new Ta(Ca);var Vh=class extends Ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lh=class extends Ta{};var cy=new Lh(Vh);var Jt=new Ie(n=>n.complete());function DI(n){return n&&le(n.schedule)}function uy(n){return n[n.length-1]}function jh(n){return le(uy(n))?n.pop():void 0}function Cr(n){return DI(uy(n))?n.pop():void 0}function TI(n,e){return typeof uy(n)=="number"?n.pop():e}var Bh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Uh(n){return le(n?.then)}function $h(n){return le(n[ba])}function Hh(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function qh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function W1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zh=W1();function Gh(n){return le(n?.[zh])}function Wh(n){return QE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield bh(t.read());if(i)return yield bh(void 0);yield yield bh(r)}}finally{t.releaseLock()}})}function Kh(n){return le(n?.getReader)}function Ye(n){if(n instanceof Ie)return n;if(n!=null){if($h(n))return K1(n);if(Bh(n))return Q1(n);if(Uh(n))return Y1(n);if(Hh(n))return SI(n);if(Gh(n))return Z1(n);if(Kh(n))return J1(n)}throw qh(n)}function K1(n){return new Ie(e=>{let t=n[ba]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Q1(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Y1(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Nh)})}function Z1(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function SI(n){return new Ie(e=>{X1(n,e).catch(t=>e.error(t))})}function J1(n){return SI(Wh(n))}function X1(n,e){var t,r,i,o;return KE(this,void 0,void 0,function*(){try{for(t=YE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ln(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Nn(n,e=0){return ve((t,r)=>{t.subscribe(we(r,i=>ln(r,n,()=>r.next(i),e),()=>ln(r,n,()=>r.complete(),e),i=>ln(r,n,()=>r.error(i),e)))})}function nr(n,e=0){return ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AI(n,e){return Ye(n).pipe(nr(e),Nn(e))}function xI(n,e){return Ye(n).pipe(nr(e),Nn(e))}function MI(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function RI(n,e){return new Ie(t=>{let r;return ln(t,e,()=>{r=n[zh](),ln(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function Qh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{ln(t,e,()=>{let r=n[Symbol.asyncIterator]();ln(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function NI(n,e){return Qh(Wh(n),e)}function PI(n,e){if(n!=null){if($h(n))return AI(n,e);if(Bh(n))return MI(n,e);if(Uh(n))return xI(n,e);if(Hh(n))return Qh(n,e);if(Gh(n))return RI(n,e);if(Kh(n))return NI(n,e)}throw qh(n)}function Fe(n,e){return e?PI(n,e):Ye(n)}function ce(...n){let e=Cr(n);return Fe(n,e)}function Sa(n,e){let t=le(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function ly(n){return!!n&&(n instanceof Ie||le(n.lift)&&le(n.subscribe))}var Xr=va(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return ve((t,r)=>{let i=0;t.subscribe(we(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:eP}=Array;function tP(n,e){return eP(e)?n(...e):n(e)}function Yh(n){return te(e=>tP(n,e))}var{isArray:nP}=Array,{getPrototypeOf:rP,prototype:iP,keys:oP}=Object;function Zh(n){if(n.length===1){let e=n[0];if(nP(e))return{args:e,keys:null};if(sP(e)){let t=oP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sP(n){return n&&typeof n=="object"&&rP(n)===iP}function Jh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Bu(...n){let e=Cr(n),t=jh(n),{args:r,keys:i}=Zh(n);if(r.length===0)return Fe([],e);let o=new Ie(aP(r,e,i?s=>Jh(i,s):Zt));return t?o.pipe(Yh(t)):o}function aP(n,e,t=Zt){return r=>{kI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)kI(e,()=>{let d=Fe(n[c],e),g=!1;d.subscribe(we(r,p=>{o[c]=p,g||(g=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kI(n,e,t){n?ln(t,n,e):e()}function OI(n,e,t,r,i,o,s,a){let c=[],d=0,g=0,p=!1,w=()=>{p&&!c.length&&!d&&e.complete()},b=P=>d<r?M(P):c.push(P),M=P=>{o&&e.next(P),d++;let R=!1;Ye(t(P,g++)).subscribe(we(e,U=>{i?.(U),o?b(U):e.next(U)},()=>{R=!0},void 0,()=>{if(R)try{for(d--;c.length&&d<r;){let U=c.shift();s?ln(e,s,()=>M(U)):M(U)}w()}catch(U){e.error(U)}}))};return n.subscribe(we(e,b,()=>{p=!0,w()})),()=>{a?.()}}function yt(n,e,t=1/0){return le(e)?yt((r,i)=>te((o,s)=>e(r,o,i,s))(Ye(n(r,i))),t):(typeof e=="number"&&(t=e),ve((r,i)=>OI(r,i,n,t)))}function zi(n=1/0){return yt(Zt,n)}function FI(){return zi(1)}function Aa(...n){return FI()(Fe(n,Cr(n)))}function Xh(n){return new Ie(e=>{Ye(n()).subscribe(e)})}function dy(...n){let e=jh(n),{args:t,keys:r}=Zh(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let g=0;g<s;g++){let p=!1;Ye(t[g]).subscribe(we(o,w=>{p||(p=!0,d--),a[g]=w},()=>c--,void 0,()=>{(!c||!p)&&(d||o.next(r?Jh(r,a):a),o.complete())}))}});return e?i.pipe(Yh(e)):i}function hy(...n){let e=Cr(n),t=TI(n,1/0),r=n;return r.length?r.length===1?Ye(r[0]):zi(t)(Fe(r,e)):Jt}function $t(n,e){return ve((t,r)=>{let i=0;t.subscribe(we(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Gi(n){return ve((e,t)=>{let r=null,i=!1,o;r=e.subscribe(we(t,void 0,void 0,s=>{o=Ye(n(s,Gi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function VI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,d=0;o.subscribe(we(s,g=>{let p=d++;c=a?n(c,g,p):(a=!0,g),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ns(n,e){return le(e)?yt(n,e,1):yt(n,1)}function Wi(n){return ve((e,t)=>{let r=!1;e.subscribe(we(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ei(n){return n<=0?()=>Jt:ve((e,t)=>{let r=0;e.subscribe(we(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fy(n){return te(()=>n)}function py(n,e=Zt){return n=n??cP,ve((t,r)=>{let i,o=!0;t.subscribe(we(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function cP(n,e){return n===e}function ef(n=uP){return ve((e,t)=>{let r=!1;e.subscribe(we(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uP(){return new Xr}function Uu(n){return ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?$t((i,o)=>n(i,o,r)):Zt,ei(1),t?Wi(e):ef(()=>new Xr))}function xa(n){return n<=0?()=>Jt:ve((e,t)=>{let r=[];e.subscribe(we(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?$t((i,o)=>n(i,o,r)):Zt,xa(1),t?Wi(e):ef(()=>new Xr))}function $u(){return ve((n,e)=>{let t,r=!1;n.subscribe(we(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function rs(n,e){return ve(VI(n,e,arguments.length>=2,!0))}function LI(n={}){let{connector:e=()=>new et,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,d=0,g=!1,p=!1,w=()=>{a?.unsubscribe(),a=void 0},b=()=>{w(),s=c=void 0,g=p=!1},M=()=>{let P=s;b(),P?.unsubscribe()};return ve((P,R)=>{d++,!p&&!g&&w();let U=c=c??e();R.add(()=>{d--,d===0&&!p&&!g&&(a=my(M,i))}),U.subscribe(R),!s&&d>0&&(s=new Jr({next:Y=>U.next(Y),error:Y=>{p=!0,w(),a=my(b,t,Y),U.error(Y)},complete:()=>{g=!0,w(),a=my(b,r),U.complete()}}),Ye(P).subscribe(s))})(o)}}function my(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Jr({next:()=>{r.unsubscribe(),n()}});return Ye(e(...t)).subscribe(r)}function tf(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,LI({connector:()=>new Oh(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function is(...n){let e=Cr(n);return ve((t,r)=>{(e?Aa(n,t,e):Aa(n,t)).subscribe(r)})}function ct(n,e){return ve((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(we(r,c=>{i?.unsubscribe();let d=0,g=o++;Ye(n(c,g)).subscribe(i=we(r,p=>r.next(e?e(c,p,g,d++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function nf(n,e){return le(e)?ct(()=>n,e):ct(()=>n)}function yy(n){return ve((e,t)=>{Ye(n).subscribe(we(t,()=>t.complete(),Fu)),!t.closed&&e.subscribe(t)})}function St(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?ve((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(we(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Zt}var DC="https://g.co/ng/security#xss",oe=class extends Error{constructor(e,t){super(vv(e,t)),this.code=e}};function vv(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ju(n){return{toString:n}.toString()}var rf="__parameters__";function lP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function TC(n,e,t){return Ju(()=>{let r=lP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,d,g){let p=c.hasOwnProperty(rf)?c[rf]:Object.defineProperty(c,rf,{value:[]})[rf];for(;p.length<=g;)p.push(null);return(p[g]=p[g]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var or=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function dP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function dn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(dn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function jI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var hP=ze({__forward_ref__:ze});function Ya(n){return n.__forward_ref__=Ya,n.toString=function(){return dn(this())},n}function Xt(n){return SC(n)?n():n}function SC(n){return typeof n=="function"&&n.hasOwnProperty(hP)&&n.__forward_ref__===Ya}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function $f(n){return BI(n,xC)||BI(n,MC)}function AC(n){return $f(n)!==null}function BI(n,e){return n.hasOwnProperty(e)?n[e]:null}function fP(n){let e=n&&(n[xC]||n[MC]);return e||null}function UI(n){return n&&(n.hasOwnProperty($I)||n.hasOwnProperty(pP))?n[$I]:null}var xC=ze({\u0275prov:ze}),$I=ze({\u0275inj:ze}),MC=ze({ngInjectableDef:ze}),pP=ze({ngInjectorDef:ze}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function RC(n){return n&&!!n.\u0275providers}var gP=ze({\u0275cmp:ze}),mP=ze({\u0275dir:ze}),yP=ze({\u0275pipe:ze}),vP=ze({\u0275mod:ze}),pf=ze({\u0275fac:ze}),qu=ze({__NG_ELEMENT_ID__:ze}),HI=ze({__NG_ENV_ID__:ze});function Fa(n){return typeof n=="string"?n:n==null?"":String(n)}function wP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fa(n)}function _P(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,n)}function wv(n,e){throw new oe(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),Ry;function NC(){return Ry}function kn(n){let e=Ry;return Ry=n,e}function PC(n,e,t){let r=$f(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;wv(n,"Injector")}var bP={},Gu=bP,Ny="__NG_DI_FLAG__",gf="ngTempTokenPath",EP="ngTokenPath",IP=/\n/gm,CP="\u0275",qI="__source",ka;function DP(){return ka}function Ki(n){let e=ka;return ka=n,e}function TP(n,e=_e.Default){if(ka===void 0)throw new oe(-203,!1);return ka===null?PC(n,void 0,e):ka.get(n,e&_e.Optional?null:void 0,e)}function $(n,e=_e.Default){return(NC()||TP)(Xt(n),e)}function z(n,e=_e.Default){return $(n,Hf(e))}function Hf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Py(n){let e=[];for(let t=0;t<n.length;t++){let r=Xt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let a=r[s],c=SP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push($(i,o))}else e.push($(r))}return e}function kC(n,e){return n[Ny]=e,n.prototype[Ny]=e,n}function SP(n){return n[Ny]}function AP(n,e,t,r){let i=n[gf];throw e[qI]&&i.unshift(e[qI]),n.message=xP(`
`+n.message,i,t,r),n[EP]=i,n[gf]=null,n}function xP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CP?n.slice(2):n;let i=dn(e);if(Array.isArray(e))i=e.map(dn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IP,`
  `)}`}var Za=kC(TC("Optional"),8);var _v=kC(TC("SkipSelf"),4);function Va(n,e){let t=n.hasOwnProperty(pf);return t?n[pf]:null}function bv(n,e){n.forEach(t=>Array.isArray(t)?bv(t,e):e(t))}function OC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function mf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function MP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function RP(n,e,t){let r=Xu(n,e);return r>=0?n[r|1]=t:(r=~r,MP(n,r,e,t)),r}function vy(n,e){let t=Xu(n,e);if(t>=0)return n[t|1]}function Xu(n,e){return NP(n,e,1)}function NP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var La={},On=[],ja=new X(""),FC=new X("",-1),VC=new X(""),yf=class{get(e,t=Gu){if(t===Gu){let r=new Error(`NullInjectorError: No provider for ${dn(e)}!`);throw r.name="NullInjectorError",r}return t}},LC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LC||{}),Sr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Sr||{}),Zi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Zi||{});function PP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function ky(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];kP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jC(n){return n===3||n===4||n===6}function kP(n){return n.charCodeAt(0)===64}function Wu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zI(n,t,i,null,e[++r]):zI(n,t,i,null,null))}}return n}function zI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var BC="ng-template";function OP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ev(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ev(n){return n.type===4&&n.value!==BC}function FP(n,e,t){let r=n.type===4&&!t?BC:n.value;return e===r}function VP(n,e,t){let r=4,i=n.attrs,o=i!==null?BP(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!rr(r)&&!rr(c))return!1;if(s&&rr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!FP(n,c,t)||c===""&&e.length===1){if(rr(r))return!1;s=!0}}else if(r&8){if(i===null||!OP(n,i,c,t)){if(rr(r))return!1;s=!0}}else{let d=e[++a],g=LP(c,i,Ev(n),t);if(g===-1){if(rr(r))return!1;s=!0;continue}if(d!==""){let p;if(g>o?p="":p=i[g+1].toLowerCase(),r&2&&d!==p){if(rr(r))return!1;s=!0}}}}return rr(r)||s}function rr(n){return(n&1)===0}function LP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return UP(e,n)}function jP(n,e,t=!1){for(let r=0;r<e.length;r++)if(VP(n,e[r],t))return!0;return!1}function BP(n){for(let e=0;e<n.length;e++){let t=n[e];if(jC(t))return e}return n.length}function UP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GI(n,e){return n?":not("+e.trim()+")":e}function $P(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rr(s)&&(e+=GI(o,i),i=""),r=s,o=o||!rr(r);t++}return i!==""&&(e+=GI(o,i)),e}function HP(n){return n.map($P).join(",")}function qP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!rr(i))break;i=o}r++}return{attrs:e,classes:t}}function Ft(n){return Ju(()=>{let e=zC(n),t=Ee(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,styles:n.styles||On,_:null,schemas:n.schemas||null,tView:null,id:""});GC(t);let r=n.dependencies;return t.directiveDefs=KI(r,!1),t.pipeDefs=KI(r,!0),t.id=WP(t),t})}function zP(n){return Ji(n)||UC(n)}function GP(n){return n!==null}function Vt(n){return Ju(()=>({type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function WI(n,e){if(n==null)return La;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Zi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Zi.None?[r,a]:r,e[o]=s):t[o]=r}return t}function hn(n){return Ju(()=>{let e=zC(n);return GC(e),e})}function Ji(n){return n[gP]||null}function UC(n){return n[mP]||null}function $C(n){return n[yP]||null}function HC(n){let e=Ji(n)||UC(n)||$C(n);return e!==null?e.standalone:!1}function qC(n,e){let t=n[vP]||null;if(!t&&e===!0)throw new Error(`Type ${dn(n)} does not have '\u0275mod' property.`);return t}function zC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||La,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:WI(n.inputs,e),outputs:WI(n.outputs),debugInfo:null}}function GC(n){n.features?.forEach(e=>e(n))}function KI(n,e){if(!n)return null;let t=e?$C:zP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(GP)}function WP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function KP(...n){return{\u0275providers:WC(!0,n),\u0275fromNgModule:!0}}function WC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return bv(e,s=>{let a=s;Oy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&KC(i,o),t}function KC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Iv(i,o=>{e(o,r)})}}function Oy(n,e,t,r){if(n=Xt(n),!n)return!1;let i=null,o=UI(n),s=!o&&Ji(n);if(!o&&!s){let c=n.ngModule;if(o=UI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Oy(d,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{bv(o.imports,g=>{Oy(g,e,t,r)&&(d||=[],d.push(g))})}finally{}d!==void 0&&KC(d,e)}if(!a){let d=Va(i)||(()=>new i);e({provide:i,useFactory:d,deps:On},i),e({provide:VC,useValue:i,multi:!0},i),e({provide:ja,useValue:()=>$(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=n;Iv(c,g=>{e(g,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Iv(n,e){for(let t of n)RC(t)&&(t=t.\u0275providers),Array.isArray(t)?Iv(t,e):e(t)}var QP=ze({provide:String,useValue:ze});function QC(n){return n!==null&&typeof n=="object"&&QP in n}function YP(n){return!!(n&&n.useExisting)}function ZP(n){return!!(n&&n.useFactory)}function Ba(n){return typeof n=="function"}function JP(n){return!!n.useClass}var qf=new X(""),lf={},XP={},wy;function Cv(){return wy===void 0&&(wy=new yf),wy}var Cn=class{},Ku=class extends Cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vy(e,s=>this.processProvider(s)),this.records.set(FC,Ma(void 0,this)),i.has("environment")&&this.records.set(Cn,Ma(void 0,this));let o=this.records.get(qf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(VC,On,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ki(this),r=kn(void 0),i;try{return e()}finally{Ki(t),kn(r)}}get(e,t=Gu,r=_e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(HI))return e[HI](this);r=Hf(r);let i,o=Ki(this),s=kn(void 0);try{if(!(r&_e.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=ik(e)&&$f(e);d&&this.injectableDefInScope(d)?c=Ma(Fy(e),lf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&_e.Self?Cv():this.parent;return t=r&_e.Optional&&t===Gu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[gf]=a[gf]||[]).unshift(dn(e)),o)throw a;return AP(a,e,"R3InjectorError",this.source)}else throw a}finally{kn(s),Ki(o)}}resolveInjectorInitializers(){let e=Oe(null),t=Ki(this),r=kn(void 0),i;try{let o=this.get(ja,On,_e.Self);for(let s of o)s()}finally{Ki(t),kn(r),Oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(dn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){e=Xt(e);let t=Ba(e)?e:Xt(e&&e.provide),r=tk(e);if(!Ba(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ma(void 0,lf,!0),i.factory=()=>Py(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Oe(null);try{return t.value===lf&&(t.value=XP,t.value=t.factory()),typeof t.value=="object"&&t.value&&rk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Fy(n){let e=$f(n),t=e!==null?e.factory:Va(n);if(t!==null)return t;if(n instanceof X)throw new oe(204,!1);if(n instanceof Function)return ek(n);throw new oe(204,!1)}function ek(n){if(n.length>0)throw new oe(204,!1);let t=fP(n);return t!==null?()=>t.factory(n):()=>new n}function tk(n){if(QC(n))return Ma(void 0,n.useValue);{let e=YC(n);return Ma(e,lf)}}function YC(n,e,t){let r;if(Ba(n)){let i=Xt(n);return Va(i)||Fy(i)}else if(QC(n))r=()=>Xt(n.useValue);else if(ZP(n))r=()=>n.useFactory(...Py(n.deps||[]));else if(YP(n))r=()=>$(Xt(n.useExisting));else{let i=Xt(n&&(n.useClass||n.provide));if(nk(n))r=()=>new i(...Py(n.deps));else return Va(i)||Fy(i)}return r}function Ma(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nk(n){return!!n.deps}function rk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ik(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function Vy(n,e){for(let t of n)Array.isArray(t)?Vy(t,e):t&&RC(t)?Vy(t.\u0275providers,e):e(t)}function Rr(n,e){n instanceof Ku&&n.assertNotDestroyed();let t,r=Ki(n),i=kn(void 0);try{return e()}finally{Ki(r),kn(i)}}function ZC(){return NC()!==void 0||DP()!=null}function ok(n){if(!ZC())throw new oe(-203,!1)}function sk(n){let e=or.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function ak(n){return typeof n=="function"}var ii=0,De=1,de=2,en=3,ir=4,ar=5,vf=6,wf=7,sr=8,Ua=9,Ar=10,At=11,Qu=12,QI=13,Ja=14,xr=15,$a=16,Ra=17,Ha=18,zf=19,JC=20,Qi=21,_y=22,Fn=23,Xi=25,XC=1;var ss=7,_f=8,bf=9,Vn=10,Ef=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ef||{});function Yi(n){return Array.isArray(n)&&typeof n[XC]=="object"}function oi(n){return Array.isArray(n)&&n[XC]===!0}function eD(n){return(n.flags&4)!==0}function Gf(n){return n.componentOffset>-1}function Dv(n){return(n.flags&1)===1}function eo(n){return!!n.template}function Ly(n){return(n[de]&512)!==0}var jy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ps(){return nD}function nD(n){return n.type.prototype.ngOnChanges&&(n.setInput=uk),ck}ps.ngInherit=!0;function ck(){let n=iD(this),e=n?.current;if(e){let t=n.previous;if(t===La)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uk(n,e,t,r,i){let o=this.declaredInputs[r],s=iD(n)||lk(n,{previous:La,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new jy(d&&d.currentValue,t,c===La),tD(n,e,i,t)}var rD="__ngSimpleChanges__";function iD(n){return n[rD]||null}function lk(n,e){return n[rD]=e}var YI=null;var Dr=function(n,e,t){YI?.(n,e,t)},dk="svg",hk="math";function Mr(n){for(;Array.isArray(n);)n=n[ii];return n}function oD(n,e){return Mr(e[n])}function Ln(n,e){return Mr(e[n.index])}function sD(n,e){return n.data[e]}function no(n,e){let t=e[n];return Yi(t)?t:t[ii]}function Tv(n){return(n[de]&128)===128}function fk(n){return oi(n[en])}function If(n,e){return e==null?null:n[e]}function aD(n){n[Ra]=0}function cD(n){n[de]&1024||(n[de]|=1024,Tv(n)&&Kf(n))}function pk(n,e){for(;n>0;)e=e[Ja],n--;return e}function Wf(n){return!!(n[de]&9216||n[Fn]?.dirty)}function By(n){n[Ar].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),Wf(n)&&Kf(n)}function Kf(n){n[Ar].changeDetectionScheduler?.notify(0);let e=as(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Tv(e)));)e=as(e)}function uD(n,e){if((n[de]&256)===256)throw new oe(911,!1);n[Qi]===null&&(n[Qi]=[]),n[Qi].push(e)}function gk(n,e){if(n[Qi]===null)return;let t=n[Qi].indexOf(e);t!==-1&&n[Qi].splice(t,1)}function as(n){let e=n[en];return oi(e)?e[en]:e}var Ce={lFrame:wD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lD=!1;function mk(){return Ce.lFrame.elementDepthCount}function yk(){Ce.lFrame.elementDepthCount++}function vk(){Ce.lFrame.elementDepthCount--}function dD(){return Ce.bindingsEnabled}function wk(){return Ce.skipHydrationRootTNode!==null}function _k(n){return Ce.skipHydrationRootTNode===n}function bk(){Ce.skipHydrationRootTNode=null}function We(){return Ce.lFrame.lView}function Tn(){return Ce.lFrame.tView}function jn(n){return Ce.lFrame.contextLView=n,n[sr]}function Bn(n){return Ce.lFrame.contextLView=null,n}function tn(){let n=hD();for(;n!==null&&n.type===64;)n=n.parent;return n}function hD(){return Ce.lFrame.currentTNode}function Ek(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function el(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function fD(){return Ce.lFrame.isParent}function Ik(){Ce.lFrame.isParent=!1}function pD(){return lD}function ZI(n){lD=n}function Ck(){return Ce.lFrame.bindingIndex}function Dk(n){return Ce.lFrame.bindingIndex=n}function Qf(){return Ce.lFrame.bindingIndex++}function gD(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Tk(){return Ce.lFrame.inI18n}function Sk(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uy(e)}function Ak(){return Ce.lFrame.currentDirectiveIndex}function Uy(n){Ce.lFrame.currentDirectiveIndex=n}function xk(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mD(n){Ce.lFrame.currentQueryIndex=n}function Mk(n){let e=n[De];return e.type===2?e.declTNode:e.type===1?n[ar]:null}function yD(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=Mk(o),i===null||(o=o[Ja],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ce.lFrame=vD();return r.currentTNode=e,r.lView=n,!0}function Sv(n){let e=vD(),t=n[De];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?wD(n):e}function wD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _D(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bD=_D;function Av(){let n=_D();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rk(n){return(Ce.lFrame.contextLView=pk(n,Ce.lFrame.contextLView))[sr]}function gs(){return Ce.lFrame.selectedIndex}function cs(n){Ce.lFrame.selectedIndex=n}function xv(){let n=Ce.lFrame;return sD(n.tView,n.selectedIndex)}function Nk(){return Ce.lFrame.currentNamespace}var ED=!0;function Mv(){return ED}function Rv(n){ED=n}function Pk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Nv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:g}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function df(n,e,t){ID(n,e,3,t)}function hf(n,e,t,r){(n[de]&3)===t&&ID(n,e,t,r)}function by(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function ID(n,e,t,r){let i=r!==void 0?n[Ra]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ra]+=65536),(a<o||o==-1)&&(kk(n,t,e,c),n[Ra]=(n[Ra]&4294901760)+c+2),c++}function JI(n,e){Dr(4,n,e);let t=Oe(null);try{e.call(n)}finally{Oe(t),Dr(5,n,e)}}function kk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[de]>>14<n[Ra]>>16&&(n[de]&3)===e&&(n[de]+=16384,JI(a,o)):JI(a,o)}var Oa=-1,us=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Ok(n){return n instanceof us}function Fk(n){return(n.flags&8)!==0}function Vk(n){return(n.flags&16)!==0}var Ey={},$y=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Hf(r);let i=this.injector.get(e,Ey,r);return i!==Ey||t===Ey?i:this.parentInjector.get(e,t,r)}};function CD(n){return n!==Oa}function Cf(n){return n&32767}function Lk(n){return n>>16}function Df(n,e){let t=Lk(n),r=e;for(;t>0;)r=r[Ja],t--;return r}var Hy=!0;function XI(n){let e=Hy;return Hy=n,e}var jk=256,DD=jk-1,TD=5,Bk=0,Tr={};function Uk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(qu)&&(r=t[qu]),r==null&&(r=t[qu]=Bk++);let i=r&DD,o=1<<i;e.data[n+(i>>TD)]|=o}function Tf(n,e){let t=SD(n,e);if(t!==-1)return t;let r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,Iy(r.data,n),Iy(e,null),Iy(r.blueprint,null));let i=Pv(n,e),o=n.injectorIndex;if(CD(i)){let s=Cf(i),a=Df(i,e),c=a[De].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=i,o}function Iy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function SD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Pv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ND(i),r===null)return Oa;if(t++,i=i[Ja],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Oa}function qy(n,e,t){Uk(n,e,t)}function $k(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(jC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function AD(n,e,t){if(t&_e.Optional||n!==void 0)return n;wv(e,"NodeInjector")}function xD(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),!(t&(_e.Self|_e.Host))){let i=n[Ua],o=kn(void 0);try{return i?i.get(e,r,t&_e.Optional):PC(e,r,t&_e.Optional)}finally{kn(o)}}return AD(r,e,t)}function MD(n,e,t,r=_e.Default,i){if(n!==null){if(e[de]&2048&&!(r&_e.Self)){let s=Wk(n,e,t,r,Tr);if(s!==Tr)return s}let o=RD(n,e,t,r,Tr);if(o!==Tr)return o}return xD(e,t,r,i)}function RD(n,e,t,r,i){let o=zk(t);if(typeof o=="function"){if(!yD(e,n,r))return r&_e.Host?AD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))wv(t);else return s}finally{bD()}}else if(typeof o=="number"){let s=null,a=SD(n,e),c=Oa,d=r&_e.Host?e[xr][ar]:null;for((a===-1||r&_e.SkipSelf)&&(c=a===-1?Pv(n,e):e[a+8],c===Oa||!tC(r,!1)?a=-1:(s=e[De],a=Cf(c),e=Df(c,e)));a!==-1;){let g=e[De];if(eC(o,a,g.data)){let p=Hk(a,e,t,s,r,d);if(p!==Tr)return p}c=e[a+8],c!==Oa&&tC(r,e[De].data[a+8]===d)&&eC(o,a,e)?(s=g,a=Cf(c),e=Df(c,e)):a=-1}}return i}function Hk(n,e,t,r,i,o){let s=e[De],a=s.data[n+8],c=r==null?Gf(a)&&Hy:r!=s&&(a.type&3)!==0,d=i&_e.Host&&o===a,g=qk(a,s,t,c,d);return g!==null?qa(e,s,g,a):Tr}function qk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,g=o>>20,p=r?a:a+g,w=i?a+g:d;for(let b=p;b<w;b++){let M=s[b];if(b<c&&t===M||b>=c&&M.type===t)return b}if(i){let b=s[c];if(b&&eo(b)&&b.type===t)return c}return null}function qa(n,e,t,r){let i=n[t],o=e.data;if(Ok(i)){let s=i;s.resolving&&_P(wP(o[t]));let a=XI(s.canSeeViewProviders);s.resolving=!0;let c,d=s.injectImpl?kn(s.injectImpl):null,g=yD(n,r,_e.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Pk(t,o[t],e)}finally{d!==null&&kn(d),XI(a),s.resolving=!1,bD()}}return i}function zk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qu)?n[qu]:void 0;return typeof e=="number"?e>=0?e&DD:Gk:e}function eC(n,e,t){let r=1<<n;return!!(t[e+(n>>TD)]&r)}function tC(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var os=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MD(this._tNode,this._lView,e,Hf(r),t)}};function Gk(){return new os(tn(),We())}function tl(n){return Ju(()=>{let e=n.prototype.constructor,t=e[pf]||zy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pf]||zy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zy(n){return SC(n)?()=>{let e=zy(Xt(n));return e&&e()}:Va(n)}function Wk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[de]&2048&&!(s[de]&512);){let a=RD(o,s,t,r|_e.Self,Tr);if(a!==Tr)return a;let c=o.parent;if(!c){let d=s[JC];if(d){let g=d.get(t,Tr,r);if(g!==Tr)return g}c=ND(s),s=s[Ja]}o=c}return i}function ND(n){let e=n[De],t=e.type;return t===2?e.declTNode:t===1?n[ar]:null}function kv(n){return $k(tn(),n)}function nC(n,e=null,t=null,r){let i=PD(n,e,t,r);return i.resolveInjectorInitializers(),i}function PD(n,e=null,t=null,r,i=new Set){let o=[t||On,KP(n)];return r=r||(typeof n=="object"?void 0:dn(n)),new Ku(o,e||Cv(),r||null,i)}var Dn=class n{static{this.THROW_IF_NOT_FOUND=Gu}static{this.NULL=new yf}static create(e,t){if(Array.isArray(e))return nC({name:""},t,e,"");{let r=e.name??"";return nC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Z({token:n,providedIn:"any",factory:()=>$(FC)})}static{this.__NG_ELEMENT_ID__=-1}};var Kk=new X("");Kk.__NG_ELEMENT_ID__=n=>{let e=tn();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(n&_e.Optional)return null;throw new oe(204,!1)};var Qk="ngOriginalError";function Cy(n){return n[Qk]}var kD=!0,Ov=(()=>{class n{static{this.__NG_ELEMENT_ID__=Yk}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gy=class extends Ov{constructor(e){super(),this._lView=e}onDestroy(e){return uD(this._lView,e),()=>gk(this._lView,e)}};function Yk(){return new Gy(We())}var Xa=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Wy=class extends et{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,ZC()&&(this.destroyRef=z(Ov,{optional:!0})??void 0,this.pendingTasks=z(Xa,{optional:!0})??void 0)}emit(e){let t=Oe(null);try{super.next(e)}finally{Oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof at&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},vt=Wy;function Sf(...n){}function OD(n){let e,t;function r(){n=Sf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rC(n){return queueMicrotask(()=>n()),()=>{n=Sf}}var Fv="isAngularZone",Af=Fv+"_ID",Zk=0,Me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kD}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Jk,Sf,Sf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Jk={};function Vv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){OD(()=>{n.callbackScheduled=!1,Ky(n),n.isCheckStableRunning=!0,Vv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ky(n)}function eO(n){let e=()=>{Xk(n)},t=Zk++;n._inner=n._inner.fork({name:"angular",properties:{[Fv]:!0,[Af]:t,[Af+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(tO(c))return r.invokeTask(o,s,a,c);try{return iC(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),oC(n)}},onInvoke:(r,i,o,s,a,c,d)=>{try{return iC(n),r.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nO(c)&&e(),oC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ky(n),Vv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ky(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function oC(n){n._nesting--,Vv(n)}var xf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tO(n){return FD(n,"__ignore_ng_zone__")}function nO(n){return FD(n,"__scheduler_tick__")}function FD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function rO(n="zone.js",e){return n==="noop"?new xf:n==="zone.js"?new Me(e):n}var ti=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Cy(e);for(;t&&Cy(t);)t=Cy(t);return t||null}},iO=new X("",{providedIn:"root",factory:()=>{let n=z(Me),e=z(ti);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function oO(){return Yf(tn(),We())}function Yf(n,e){return new ro(Ln(n,e))}var ro=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=oO}}return n})();function VD(n){return(n.flags&128)===128}var LD=new Map,sO=0;function aO(){return sO++}function cO(n){LD.set(n[zf],n)}function Qy(n){LD.delete(n[zf])}var sC="__ngContext__";function ls(n,e){Yi(e)?(n[sC]=e[zf],cO(e)):n[sC]=e}function jD(n){return UD(n[Qu])}function BD(n){return UD(n[ir])}function UD(n){for(;n!==null&&!oi(n);)n=n[ir];return n}var Yy;function $D(n){Yy=n}function uO(){if(Yy!==void 0)return Yy;if(typeof document<"u")return document;throw new oe(210,!1)}var Zf=new X("",{providedIn:"root",factory:()=>lO}),lO="ng",Lv=new X(""),fn=new X("",{providedIn:"platform",factory:()=>"unknown"});var jv=new X("",{providedIn:"root",factory:()=>uO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dO="h",hO="b";var fO=()=>null;function Bv(n,e,t=!1){return fO(n,e,t)}var HD=!1,pO=new X("",{providedIn:"root",factory:()=>HD});var of;function gO(){if(of===void 0&&(of=null,or.trustedTypes))try{of=or.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return of}function aC(n){return gO()?.createScriptURL(n)||n}var Mf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DC})`}};function nl(n){return n instanceof Mf?n.changingThisBreaksApplicationSecurity:n}function Uv(n,e){let t=mO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${DC})`)}return t===e}function mO(n){return n instanceof Mf&&n.getTypeName()||null}var yO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qD(n){return n=String(n),n.match(yO)?n:"unsafe:"+n}var Jf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Jf||{});function vO(n){let e=GD();return e?e.sanitize(Jf.URL,n)||"":Uv(n,"URL")?nl(n):qD(Fa(n))}function wO(n){let e=GD();if(e)return aC(e.sanitize(Jf.RESOURCE_URL,n)||"");if(Uv(n,"ResourceURL"))return aC(nl(n));throw new oe(904,!1)}function _O(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?wO:vO}function zD(n,e,t){return _O(e,t)(n)}function GD(){let n=We();return n&&n[Ar].sanitizer}function WD(n){return n instanceof Function?n():n}function bO(n){return(n??z(Dn)).get(fn)==="browser"}var ni=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ni||{}),EO;function $v(n,e){return EO(n,e)}function Na(n,e,t,r,i){if(r!=null){let o,s=!1;oi(r)?o=r:Yi(r)&&(s=!0,r=r[ii]);let a=Mr(r);n===0&&t!==null?i==null?JD(e,t,a):Rf(e,t,a,i||null,!0):n===1&&t!==null?Rf(e,t,a,i||null,!0):n===2?VO(e,a,s):n===3&&e.destroyNode(a),o!=null&&jO(e,n,o,t,i)}}function IO(n,e){return n.createText(e)}function CO(n,e,t){n.setValue(e,t)}function KD(n,e,t){return n.createElement(e,t)}function DO(n,e){QD(n,e),e[ii]=null,e[ar]=null}function TO(n,e,t,r,i,o){r[ii]=i,r[ar]=e,Xf(n,r,t,1,i,o)}function QD(n,e){e[Ar].changeDetectionScheduler?.notify(9),Xf(n,e,e[At],2,null,null)}function SO(n){let e=n[Qu];if(!e)return Dy(n[De],n);for(;e;){let t=null;if(Yi(e))t=e[Qu];else{let r=e[Vn];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)Yi(e)&&Dy(e[De],e),e=e[en];e===null&&(e=n),Yi(e)&&Dy(e[De],e),t=e&&e[ir]}e=t}}function AO(n,e,t,r){let i=Vn+r,o=t.length;r>0&&(t[i-1][ir]=e),r<o-Vn?(e[ir]=t[i],OC(t,Vn+r,e)):(t.push(e),e[ir]=null),e[en]=t;let s=e[$a];s!==null&&t!==s&&YD(s,e);let a=e[Ha];a!==null&&a.insertView(n),By(e),e[de]|=128}function YD(n,e){let t=n[bf],r=e[en];if(Yi(r))n[de]|=Ef.HasTransplantedViews;else{let i=r[en][xr];e[xr]!==i&&(n[de]|=Ef.HasTransplantedViews)}t===null?n[bf]=[e]:t.push(e)}function Hv(n,e){let t=n[bf],r=t.indexOf(e);t.splice(r,1)}function Zy(n,e){if(n.length<=Vn)return;let t=Vn+e,r=n[t];if(r){let i=r[$a];i!==null&&i!==n&&Hv(i,r),e>0&&(n[t-1][ir]=r[ir]);let o=mf(n,Vn+e);DO(r[De],r);let s=o[Ha];s!==null&&s.detachView(o[De]),r[en]=null,r[ir]=null,r[de]&=-129}return r}function ZD(n,e){if(!(e[de]&256)){let t=e[At];t.destroyNode&&Xf(n,e,t,3,null,null),SO(e)}}function Dy(n,e){if(e[de]&256)return;let t=Oe(null);try{e[de]&=-129,e[de]|=256,e[Fn]&&Zm(e[Fn]),MO(n,e),xO(n,e),e[De].type===1&&e[At].destroy();let r=e[$a];if(r!==null&&oi(e[en])){r!==e[en]&&Hv(r,e);let i=e[Ha];i!==null&&i.detachView(n)}Qy(e)}finally{Oe(t)}}function xO(n,e){let t=n.cleanup,r=e[wf];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[wf]=null);let i=e[Qi];if(i!==null){e[Qi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function MO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof us)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Dr(4,a,c);try{c.call(a)}finally{Dr(5,a,c)}}else{Dr(4,i,o);try{o.call(i)}finally{Dr(5,i,o)}}}}}function RO(n,e,t){return NO(n,e.parent,t)}function NO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ii];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Sr.None||o===Sr.Emulated)return null}return Ln(r,t)}}function Rf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function cC(n,e,t,r,i){r!==null?Rf(n,e,t,r,i):JD(n,e,t)}function XD(n,e){return n.parentNode(e)}function PO(n,e){return n.nextSibling(e)}function kO(n,e,t){return FO(n,e,t)}function OO(n,e,t){return n.type&40?Ln(n,t):null}var FO=OO,uC;function qv(n,e,t,r){let i=RO(n,r,e),o=e[At],s=r.parent||e[ar],a=kO(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)cC(o,i,t[c],a,!1);else cC(o,i,t,a,!1);uC!==void 0&&uC(o,r,e,t,i)}function Hu(n,e){if(e!==null){let t=e.type;if(t&3)return Ln(e,n);if(t&4)return Jy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Hu(n,r);{let i=n[e.index];return oi(i)?Jy(-1,i):Mr(i)}}else{if(t&128)return Hu(n,e.next);if(t&32)return $v(e,n)()||Mr(n[e.index]);{let r=eT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=as(n[xr]);return Hu(i,r)}else return Hu(n,e.next)}}}return null}function eT(n,e){if(e!==null){let r=n[xr][ar],i=e.projection;return r.projection[i]}return null}function Jy(n,e){let t=Vn+n+1;if(t<e.length){let r=e[t],i=r[De].firstChild;if(i!==null)return Hu(r,i)}return e[ss]}function VO(n,e,t){n.removeChild(null,e,t)}function zv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ls(Mr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)zv(n,e,t.child,r,i,o,!1),Na(e,n,i,a,o);else if(c&32){let d=$v(t,r),g;for(;g=d();)Na(e,n,i,g,o);Na(e,n,i,a,o)}else c&16?LO(n,e,r,t,i,o):Na(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Xf(n,e,t,r,i,o){zv(t,r,n.firstChild,e,i,o,!1)}function LO(n,e,t,r,i,o){let s=t[xr],c=s[ar].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let g=c[d];Na(e,n,i,g,o)}else{let d=c,g=s[en];VD(r)&&(d.flags|=128),zv(n,e,d,g,i,o,!0)}}function jO(n,e,t,r,i){let o=t[ss],s=Mr(t);o!==s&&Na(e,n,r,o,i);for(let a=Vn;a<t.length;a++){let c=t[a];Xf(c[De],c,n,e,r,o)}}function BO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ni.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ni.Important),n.setStyle(t,r,i,o))}}function UO(n,e,t){n.setAttribute(e,"style",t)}function tT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ky(n,e,r),i!==null&&tT(n,e,i),o!==null&&UO(n,e,o)}var io={};function ue(n=1){rT(Tn(),We(),gs()+n,!1)}function rT(n,e,t,r){if(!r)if((e[de]&3)===3){let o=n.preOrderCheckHooks;o!==null&&df(e,o,t)}else{let o=n.preOrderHooks;o!==null&&hf(e,o,0,t)}cs(t)}function he(n,e=_e.Default){let t=We();if(t===null)return $(n,e);let r=tn();return MD(r,t,Xt(n),e)}function iT(){let n="invalid";throw new Error(n)}function oT(n,e,t,r,i,o){let s=Oe(null);try{let a=null;i&Zi.SignalBased&&(a=e[r][Zr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Zi.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):tD(e,a,r,o)}finally{Oe(s)}}function $O(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)cs(~i);else{let o=i,s=t[++r],a=t[++r];Sk(s,o);let c=e[o];a(2,c)}}}finally{cs(-1)}}function ep(n,e,t,r,i,o,s,a,c,d,g){let p=e.blueprint.slice();return p[ii]=i,p[de]=r|4|128|8|64,(d!==null||n&&n[de]&2048)&&(p[de]|=2048),aD(p),p[en]=p[Ja]=n,p[sr]=t,p[Ar]=s||n&&n[Ar],p[At]=a||n&&n[At],p[Ua]=c||n&&n[Ua]||null,p[ar]=o,p[zf]=aO(),p[vf]=g,p[JC]=d,p[xr]=e.type==2?n[xr]:p,p}function tp(n,e,t,r,i){let o=n.data[e];if(o===null)o=HO(n,e,t,r,i),Tk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Ek();o.injectorIndex=s===null?-1:s.injectorIndex}return el(o,!0),o}function HO(n,e,t,r,i){let o=hD(),s=fD(),a=s?o:o&&o.parent,c=n.data[e]=KO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function sT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function aT(n,e,t,r,i){let o=gs(),s=r&2;try{cs(-1),s&&e.length>Xi&&rT(n,e,Xi,!1),Dr(s?2:0,i),t(r,i)}finally{cs(o),Dr(s?3:1,i)}}function cT(n,e,t){if(eD(e)){let r=Oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Oe(r)}}}function uT(n,e,t){dD()&&(eF(n,e,t,Ln(t,e)),(t.flags&64)===64&&gT(n,e,t))}function lT(n,e,t=Ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function dT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Gv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Gv(n,e,t,r,i,o,s,a,c,d,g){let p=Xi+r,w=p+i,b=qO(p,w),M=typeof d=="function"?d():d;return b[De]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:g}}function qO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:io);return t}function zO(n,e,t,r){let o=r.get(pO,HD)||t===Sr.ShadowDom,s=n.selectRootElement(e,o);return GO(s),s}function GO(n){WO(n)}var WO=()=>null;function KO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return wk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Zi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}n===0?dC(r,t,d,a,c):dC(r,t,d,a)}return r}function dC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function QO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,d=null;for(let g=r;g<i;g++){let p=o[g],w=t?t.get(p):null,b=w?w.inputs:null,M=w?w.outputs:null;c=lC(0,p.inputs,g,c,b),d=lC(1,p.outputs,g,d,M);let P=c!==null&&s!==null&&!Ev(e)?dF(c,g,s):null;a.push(P)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=d}function YO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hT(n,e,t,r,i,o,s,a){let c=Ln(e,t),d=e.inputs,g;!a&&d!=null&&(g=d[r])?(Wv(n,t,g,r,i),Gf(e)&&ZO(t,e.index)):e.type&3?(r=YO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function ZO(n,e){let t=no(e,n);t[de]&16||(t[de]|=64)}function fT(n,e,t,r){if(dD()){let i=r===null?null:{"":-1},o=nF(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&pT(n,e,t,s,i,a),i&&rF(t,r,i)}t.mergedAttrs=Wu(t.mergedAttrs,t.attrs)}function pT(n,e,t,r,i,o){for(let d=0;d<r.length;d++)qy(Tf(t,e),n,r[d].type);oF(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let g=r[d];g.providersResolver&&g.providersResolver(g)}let s=!1,a=!1,c=sT(n,e,r.length,null);for(let d=0;d<r.length;d++){let g=r[d];t.mergedAttrs=Wu(t.mergedAttrs,g.hostAttrs),sF(n,t,e,c,g),iF(c,g,i),g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let p=g.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}QO(n,t,o)}function JO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;XO(s)!=a&&s.push(a),s.push(t,r,o)}}function XO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eF(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Gf(t)&&aF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Tf(t,e),ls(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],d=qa(e,n,a,t);if(ls(d,e),s!==null&&lF(e,a-i,d,c,t,s),eo(c)){let g=no(t.index,e);g[sr]=qa(e,n,a,t)}}}function gT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Ak();try{cs(o);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Uy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&tF(c,d)}}finally{cs(-1),Uy(s)}}function tF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(jP(e,s.selectors,!1))if(r||(r=[]),eo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Xy(n,e,c)}else r.unshift(s),Xy(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new oe(-301,!1);r.push(e[i],o)}}}function iF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;eo(e)&&(t[""]=n)}}function oF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Va(i.type,!0)),s=new us(o,eo(i),he);n.blueprint[r]=s,t[r]=s,JO(n,e,r,sT(n,t,i.hostVars,io),i)}function aF(n,e,t){let r=Ln(e,n),i=dT(t),o=n[Ar].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=np(n,ep(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function cF(n,e,t,r,i,o){let s=Ln(n,e);uF(e[At],s,o,n.value,t,r,i)}function uF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Fa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],d=s[a++],g=s[a++],p=s[a++];oT(r,t,c,d,g,p)}}function dF(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function mT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yT(n,e){let t=n.contentQueries;if(t!==null){let r=Oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];mD(o),a.contentQueries(2,e[s],s)}}}finally{Oe(r)}}}function np(n,e){return n[Qu]?n[QI][ir]=e:n[Qu]=e,n[QI]=e,e}function ev(n,e,t){mD(0);let r=Oe(null);try{e(n,t)}finally{Oe(r)}}function hF(n){return n[wf]??=[]}function fF(n){return n.cleanup??=[]}function vT(n,e){let t=n[Ua],r=t?t.get(ti,null):null;r&&r.handleError(e)}function Wv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],d=e[s],g=n.data[s];oT(g,d,r,a,c,i)}}function wT(n,e,t){let r=oD(e,n);CO(n[At],r,t)}function pF(n,e){let t=no(e,n),r=t[De];gF(r,t);let i=t[ii];i!==null&&t[vf]===null&&(t[vf]=Bv(i,t[Ua])),Kv(r,t,t[sr])}function gF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Kv(n,e,t){Sv(e);try{let r=n.viewQuery;r!==null&&ev(1,r,t);let i=n.template;i!==null&&aT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ha]?.finishViewCreation(n),n.staticContentQueries&&yT(n,e),n.staticViewQueries&&ev(2,n.viewQuery,t);let o=n.components;o!==null&&mF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Av()}}function mF(n,e){for(let t=0;t<e.length;t++)pF(n,e[t])}function yF(n,e,t,r){let i=Oe(null);try{let o=e.tView,a=n[de]&4096?4096:16,c=ep(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[$a]=d;let g=n[Ha];return g!==null&&(c[Ha]=g.createEmbeddedView(o)),Kv(o,c,t),c}finally{Oe(i)}}function hC(n,e){return!e||e.firstChild===null||VD(n)}function vF(n,e,t,r=!0){let i=e[De];if(AO(i,e,n,t),r){let s=Jy(t,n),a=e[At],c=XD(a,n[ss]);c!==null&&TO(i,n[ar],a,e,c,s)}let o=e[vf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Nf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Mr(o)),oi(o)&&wF(o,r);let s=t.type;if(s&8)Nf(n,e,t.child,r);else if(s&32){let a=$v(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=eT(e,t);if(Array.isArray(a))r.push(...a);else{let c=as(e[xr]);Nf(c[De],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function wF(n,e){for(let t=Vn;t<n.length;t++){let r=n[t],i=r[De].firstChild;i!==null&&Nf(r[De],r,i,e)}n[ss]!==n[ii]&&e.push(n[ss])}var _T=[];function _F(n){return n[Fn]??bF(n)}function bF(n){let e=_T.pop()??Object.create(IF);return e.lView=n,e}function EF(n){n.lView[Fn]!==n&&(n.lView=null,_T.push(n))}var IF=Ee(L({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Kf(n.lView)},consumerOnSignalRead(){this.lView[Fn]=this}});function CF(n){let e=n[Fn]??Object.create(DF);return e.lView=n,e}var DF=Ee(L({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=as(n.lView);for(;e&&!bT(e[De]);)e=as(e);e&&cD(e)},consumerOnSignalRead(){this.lView[Fn]=this}});function bT(n){return n.type!==2}var TF=100;function ET(n,e=!0,t=0){let r=n[Ar],i=r.rendererFactory,o=!1;o||i.begin?.();try{SF(n,t)}catch(s){throw e&&vT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function SF(n,e){let t=pD();try{ZI(!0),tv(n,e);let r=0;for(;Wf(n);){if(r===TF)throw new oe(103,!1);r++,tv(n,1)}}finally{ZI(t)}}function AF(n,e,t,r){let i=e[de];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Ar].inlineEffectRunner?.flush(),Sv(e);let a=!0,c=null,d=null;o||(bT(n)?(d=_F(e),c=Sh(d)):iI()===null?(a=!1,d=CF(e),c=Sh(d)):e[Fn]&&(Zm(e[Fn]),e[Fn]=null));try{aD(e),Dk(n.bindingStartIndex),t!==null&&aT(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let b=n.preOrderCheckHooks;b!==null&&df(e,b,null)}else{let b=n.preOrderHooks;b!==null&&hf(e,b,0,null),by(e,0)}if(s||xF(e),IT(e,0),n.contentQueries!==null&&yT(n,e),!o)if(g){let b=n.contentCheckHooks;b!==null&&df(e,b)}else{let b=n.contentHooks;b!==null&&hf(e,b,1),by(e,1)}$O(n,e);let p=n.components;p!==null&&DT(e,p,0);let w=n.viewQuery;if(w!==null&&ev(2,w,r),!o)if(g){let b=n.viewCheckHooks;b!==null&&df(e,b)}else{let b=n.viewHooks;b!==null&&hf(e,b,2),by(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[_y]){for(let b of e[_y])b();e[_y]=null}o||(e[de]&=-73)}catch(g){throw o||Kf(e),g}finally{d!==null&&(Qm(d,c),a&&EF(d)),Av()}}function IT(n,e){for(let t=jD(n);t!==null;t=BD(t))for(let r=Vn;r<t.length;r++){let i=t[r];CT(i,e)}}function xF(n){for(let e=jD(n);e!==null;e=BD(e)){if(!(e[de]&Ef.HasTransplantedViews))continue;let t=e[bf];for(let r=0;r<t.length;r++){let i=t[r];cD(i)}}}function MF(n,e,t){let r=no(e,n);CT(r,t)}function CT(n,e){Tv(n)&&tv(n,e)}function tv(n,e){let r=n[De],i=n[de],o=n[Fn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ym(o)),s||=!1,o&&(o.dirty=!1),n[de]&=-9217,s)AF(r,n,r.template,n[sr]);else if(i&8192){IT(n,1);let a=r.components;a!==null&&DT(n,a,1)}}function DT(n,e,t){for(let r=0;r<e.length;r++)MF(n,e[r],t)}function Qv(n,e){let t=pD()?64:1088;for(n[Ar].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=as(n);if(Ly(n)&&!r)return n;n=r}return null}var ds=class{get rootNodes(){let e=this._lView,t=e[De];return Nf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sr]}set context(e){this._lView[sr]=e}get destroyed(){return(this._lView[de]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[en];if(oi(e)){let t=e[_f],r=t?t.indexOf(this):-1;r>-1&&(Zy(e,r),mf(t,r))}this._attachedToViewContainer=!1}ZD(this._lView[De],this._lView)}onDestroy(e){uD(this._lView,e)}markForCheck(){Qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){By(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,ET(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ly(this._lView),t=this._lView[$a];t!==null&&!e&&Hv(t,this._lView),QD(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=Ly(this._lView),r=this._lView[$a];r!==null&&!t&&YD(r,this._lView),By(this._lView)}},Yv=(()=>{class n{static{this.__NG_ELEMENT_ID__=PF}}return n})(),RF=Yv,NF=class extends RF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ds(i)}};function PF(){return kF(tn(),We())}function kF(n,e){return n.type&4?new NF(e,n,Yf(n,e)):null}var VG=new RegExp(`^(\\d+)*(${hO}|${dO})*(.*)`);var OF=()=>null;function fC(n,e){return OF(n,e)}var za=class{},Zv=new X("",{providedIn:"root",factory:()=>!1});var TT=new X(""),ST=new X(""),nv=class{},Pf=class{};function FF(n){let e=Error(`No component factory found for ${dn(n)}.`);return e[VF]=n,e}var VF="ngComponent";var rv=class{resolveComponentFactory(e){throw FF(e)}},Ga=class{static{this.NULL=new rv}},Wa=class{},ms=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>LF()}}return n})();function LF(){let n=We(),e=tn(),t=no(e.index,n);return(Yi(t)?t:n)[At]}var jF=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}}return n})();function iv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=jI(i,a);else if(o==2){let c=a,d=e[++s];r=jI(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var kf=class extends Ga{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ji(e);return new Ka(t,this.ngModule)}};function pC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Zi.None;e?t.push({propName:s,templateName:r,isSignal:(a&Zi.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function BF(n){let e=n.toLowerCase();return e==="svg"?dk:e==="math"?hk:null}var Ka=class extends Pf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=pC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return pC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=HP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Oe(null);try{i=i||this.ngModule;let s=i instanceof Cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new $y(e,s):e,c=a.get(Wa,null);if(c===null)throw new oe(407,!1);let d=a.get(jF,null),g=a.get(za,null),p={rendererFactory:c,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:g},w=c.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",M=r?zO(w,r,this.componentDef.encapsulation,a):KD(w,b,BF(b)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let R=null;M!==null&&(R=Bv(M,a,!0));let U=Gv(0,null,null,1,0,null,null,null,null,null,null),Y=ep(null,U,null,P,null,null,p,w,a,null,R);Sv(Y);let H,ne,ae=null;try{let ie=this.componentDef,D,E=null;ie.findHostDirectiveDefs?(D=[],E=new Map,ie.findHostDirectiveDefs(ie,D,E),D.push(ie)):D=[ie];let I=UF(Y,M);ae=$F(I,M,ie,D,Y,p,w),ne=sD(U,Xi),M&&zF(w,ie,M,r),t!==void 0&&GF(ne,this.ngContentSelectors,t),H=qF(ae,ie,D,E,Y,[WF]),Kv(U,Y,null)}catch(ie){throw ae!==null&&Qy(ae),Qy(Y),ie}finally{Av()}return new ov(this.componentType,H,Yf(ne,Y),Y,ne)}finally{Oe(o)}}},ov=class extends nv{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ds(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Wv(o[De],o,i,e,t),this.previousInputValues.set(e,t);let s=no(this._tNode.index,o);Qv(s,1)}}get injector(){return new os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function UF(n,e){let t=n[De],r=Xi;return n[r]=e,tp(t,r,2,"#host",null)}function $F(n,e,t,r,i,o,s){let a=i[De];HF(r,n,e,s);let c=null;e!==null&&(c=Bv(e,i[Ua]));let d=o.rendererFactory.createRenderer(e,t),g=16;t.signals?g=4096:t.onPush&&(g=64);let p=ep(i,dT(t),null,g,i[n.index],n,o,d,null,null,c);return a.firstCreatePass&&Xy(a,n,r.length-1),np(i,p),i[n.index]=p}function HF(n,e,t,r){for(let i of n)e.mergedAttrs=Wu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(iv(e,e.mergedAttrs,!0),t!==null&&nT(r,t,e))}function qF(n,e,t,r,i,o){let s=tn(),a=i[De],c=Ln(s,i);pT(a,i,s,t,null,r);for(let g=0;g<t.length;g++){let p=s.directiveStart+g,w=qa(i,a,p,s);ls(w,i)}gT(a,i,s),c&&ls(c,i);let d=qa(i,a,s.directiveStart+s.componentOffset,s);if(n[sr]=i[sr]=d,o!==null)for(let g of o)g(d,e);return cT(a,s,i),d}function zF(n,e,t,r){if(r)ky(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=qP(e.selectors[0]);i&&ky(n,t,i),o&&o.length>0&&tT(n,t,o.join(" "))}}function GF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function WF(){let n=tn();Nv(We()[De],n)}var rl=(()=>{class n{static{this.__NG_ELEMENT_ID__=KF}}return n})();function KF(){let n=tn();return YF(n,We())}var QF=rl,AT=class extends QF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yf(this._hostTNode,this._hostLView)}get injector(){return new os(this._hostTNode,this._hostLView)}get parentInjector(){let e=Pv(this._hostTNode,this._hostLView);if(CD(e)){let t=Df(e,this._hostLView),r=Cf(e),i=t[De].data[r+8];return new os(i,t)}else return new os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=fC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,hC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!ak(e),a;if(s)a=t;else{let M=t||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let c=s?e:new Ka(Ji(e)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let P=(s?d:this.parentInjector).get(Cn,null);P&&(o=P)}let g=Ji(c.componentType??{}),p=fC(this._lContainer,g?.id??null),w=p?.firstChild??null,b=c.create(d,i,w,o);return this.insertImpl(b.hostView,a,hC(this._hostTNode,p)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(fk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[en],d=new AT(c,c[ar],c[en]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return vF(s,i,o,r),e.attachToViewContainerRef(),OC(Ty(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Zy(this._lContainer,t);r&&(mf(Ty(this._lContainer),t),ZD(r[De],r))}detach(e){let t=this._adjustIndex(e,-1),r=Zy(this._lContainer,t);return r&&mf(Ty(this._lContainer),t)!=null?new ds(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gC(n){return n[_f]}function Ty(n){return n[_f]||(n[_f]=[])}function YF(n,e){let t,r=e[n.index];return oi(r)?t=r:(t=mT(r,e,null,n),e[n.index]=t,np(e,t)),JF(t,e,n,r),new AT(t,n,e)}function ZF(n,e){let t=n[At],r=t.createComment(""),i=Ln(e,n),o=XD(t,i);return Rf(t,o,r,PO(t,i),!1),r}var JF=t2,XF=()=>!1;function e2(n,e,t){return XF(n,e,t)}function t2(n,e,t,r){if(n[ss])return;let i;t.type&8?i=Mr(r):i=ZF(e,t),n[ss]=i}var mC=new Set;function il(n){mC.has(n)||(mC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function n2(n){return typeof n=="function"&&n[Zr]!==void 0}function ol(n,e){il("NgSignals");let t=gI(n),r=t[Zr];return e?.equal&&(r.equal=e.equal),t.set=i=>Jm(r,i),t.update=i=>mI(r,i),t.asReadonly=r2.bind(t),t}function r2(){let n=this[Zr];if(n.readonlyFn===void 0){let e=()=>this();e[Zr]=n,n.readonlyFn=e}return n.readonlyFn}function xT(n){return n2(n)&&typeof n.set=="function"}function i2(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(c2))}return o}return Of.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(d=>{i.template=d}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let d=i.styles.length,g=i.styleUrls;i.styleUrls.forEach((p,w)=>{a.push(""),s.push(r(p).then(b=>{a[d+w]=b,g.splice(g.indexOf(p),1),g.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(d=>{a.push(d),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>u2(o));e.push(c)}),s2(),Promise.all(e).then(()=>{})}var Of=new Map,o2=new Set;function s2(){let n=Of;return Of=new Map,n}function a2(){return Of.size===0}function c2(n){return typeof n=="string"?n:n.text()}function u2(n){o2.delete(n)}function l2(n){return Object.getPrototypeOf(n.prototype).constructor}function oo(n){let e=l2(n.type),t=!0,r=[n];for(;e;){let i;if(eo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=sf(n.inputs),s.inputTransforms=sf(n.inputTransforms),s.declaredInputs=sf(n.declaredInputs),s.outputs=sf(n.outputs);let a=i.hostBindings;a&&g2(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&f2(n,c),d&&p2(n,d),d2(n,i),dP(n.outputs,i.outputs),eo(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===oo&&(t=!1)}}e=Object.getPrototypeOf(e)}h2(r)}function d2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function h2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wu(i.hostAttrs,t=Wu(t,i.hostAttrs))}}function sf(n){return n===La?{}:n===On?[]:n}function f2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function p2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function g2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Jv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var to=class{},Yu=class{};var Ff=class extends to{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kf(this);let o=qC(e);this._bootstrapComponents=WD(o.bootstrap),this._r3Injector=PD(e,t,[{provide:to,useValue:this},{provide:Ga,useValue:this.componentFactoryResolver},...r],dn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Vf=class extends Yu{constructor(e){super(),this.moduleType=e}create(e){return new Ff(this.moduleType,e,[])}};function m2(n,e,t){return new Ff(n,e,t,!1)}var sv=class extends to{constructor(e){super(),this.componentFactoryResolver=new kf(this),this.instance=null;let t=new Ku([...e.providers,{provide:to,useValue:this},{provide:Ga,useValue:this.componentFactoryResolver}],e.parent||Cv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rp(n,e,t=null){return new sv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function MT(n){return v2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function y2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function v2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hs(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function w2(n,e,t,r){let i=hs(n,e,t);return hs(n,e+1,r)||i}function _2(n){return(n.flags&32)===32}function b2(n,e,t,r,i,o,s,a,c){let d=e.consts,g=tp(e,n,4,s||null,a||null);fT(e,t,g,If(d,c)),Nv(e,g);let p=g.tView=Gv(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,g),p.queries=e.queries.embeddedTView(g)),g}function E2(n,e,t,r,i,o,s,a,c,d){let g=t+Xi,p=e.firstCreatePass?b2(g,e,n,r,i,o,s,a,c):e.data[g];el(p,!1);let w=I2(e,n,p,t);Mv()&&qv(e,n,w,p),ls(w,n);let b=mT(w,n,w,p);return n[g]=b,np(n,b),e2(b,p,n),Dv(p)&&uT(e,n,p),c!=null&&lT(n,p,d),p}function si(n,e,t,r,i,o,s,a){let c=We(),d=Tn(),g=If(d.consts,o);return E2(c,d,n,e,t,r,i,g,s,a),si}var I2=C2;function C2(n,e,t,r){return Rv(!0),e[At].createComment("")}var Pa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Pa||{}),RT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),av=class n{constructor(){this.ngZone=z(Me),this.scheduler=z(za),this.errorHandler=z(ti,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Pa.EarlyRead,Pa.Write,Pa.MixedReadWrite,Pa.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}},cv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Xv(n,e){!e?.injector&&ok(Xv);let t=e?.injector??z(Dn);return bO(t)?(il("NgAfterNextRender"),T2(n,t,e,!0)):S2}function D2(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function T2(n,e,t,r){let i=e.get(RT);i.impl??=e.get(av);let o=t?.phase??Pa.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Ov):null,a=new cv(i.impl,D2(n,o),r,s);return i.impl.register(a),a}var S2={destroy(){}};function ip(n,e,t,r){let i=We(),o=Qf();if(hs(i,o,e)){let s=Tn(),a=xv();cF(a,i,n,e,t,r)}return ip}function A2(n,e,t,r){return hs(n,Qf(),t)?e+Fa(t)+r:io}function x2(n,e,t,r,i,o){let s=Ck(),a=w2(n,s,t,i);return gD(2),a?e+Fa(t)+r+Fa(i)+o:io}function af(n,e){return n<<17|e<<2}function fs(n){return n>>17&32767}function M2(n){return(n&2)==2}function R2(n,e){return n&131071|e<<17}function uv(n){return n|2}function Qa(n){return(n&131068)>>2}function Sy(n,e){return n&-131069|e<<2}function N2(n){return(n&1)===1}function lv(n){return n|1}function P2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fs(s),c=Qa(s);n[r]=t;let d=!1,g;if(Array.isArray(t)){let p=t;g=p[1],(g===null||Xu(p,g)>0)&&(d=!0)}else g=t;if(i)if(c!==0){let w=fs(n[a+1]);n[r+1]=af(w,a),w!==0&&(n[w+1]=Sy(n[w+1],r)),n[a+1]=R2(n[a+1],r)}else n[r+1]=af(a,0),a!==0&&(n[a+1]=Sy(n[a+1],r)),a=r;else n[r+1]=af(c,0),a===0?a=r:n[c+1]=Sy(n[c+1],r),c=r;d&&(n[r+1]=uv(n[r+1])),yC(n,g,r,!0),yC(n,g,r,!1),k2(e,g,n,r,o),s=af(a,c),o?e.classBindings=s:e.styleBindings=s}function k2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Xu(o,e)>=0&&(t[r+1]=lv(t[r+1]))}function yC(n,e,t,r){let i=n[t+1],o=e===null,s=r?fs(i):Qa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];O2(c,e)&&(a=!0,n[s+1]=r?lv(d):uv(d)),s=r?fs(d):Qa(d)}a&&(n[t+1]=r?uv(i):lv(i))}function O2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xu(n,e)>=0:!1}function ai(n,e,t){let r=We(),i=Qf();if(hs(r,i,e)){let o=Tn(),s=xv();hT(o,s,r,n,e,r[At],t,!1)}return ai}function vC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Wv(n,t,o[s],s,r)}function op(n,e){return F2(n,e,null,!0),op}function F2(n,e,t,r){let i=We(),o=Tn(),s=gD(2);if(o.firstUpdatePass&&L2(o,n,s,r),e!==io&&hs(i,s,e)){let a=o.data[gs()];H2(o,a,i,i[At],n,i[s+1]=q2(e,t),r,s)}}function V2(n,e){return e>=n.expandoStartIndex}function L2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[gs()],s=V2(n,t);z2(o,r)&&e===null&&!s&&(e=!1),e=j2(i,o,e,r),P2(i,o,e,t,s,r)}}function j2(n,e,t,r){let i=xk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ay(null,n,e,t,r),t=Zu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ay(i,n,e,t,r),o===null){let c=B2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Ay(null,n,e,c[1],r),c=Zu(c,e.attrs,r),U2(n,e,r,c))}else o=$2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function B2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Qa(r)!==0)return n[fs(r)]}function U2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fs(i)]=r}function $2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Zu(r,s,t)}return Zu(r,e.attrs,t)}function Ay(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Zu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Zu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),RP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function H2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],g=N2(d)?wC(c,e,t,i,Qa(d),s):void 0;if(!Lf(g)){Lf(o)||M2(d)&&(o=wC(c,null,t,i,a,s));let p=oD(gs(),t);BO(r,s,p,i,o)}}function wC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),g=d?c[1]:c,p=g===null,w=t[i+1];w===io&&(w=p?On:void 0);let b=p?vy(w,r):g===r?w:void 0;if(d&&!Lf(b)&&(b=vy(c,r)),Lf(b)&&(a=b,s))return a;let M=n[i+1];i=s?fs(M):Qa(M)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=vy(c,r))}return a}function Lf(n){return n!==void 0}function q2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=dn(nl(n)))),n}function z2(n,e){return(n.flags&(e?8:16))!==0}function G2(n,e,t,r,i,o){let s=e.consts,a=If(s,i),c=tp(e,n,2,r,a);return fT(e,t,c,If(s,o)),c.attrs!==null&&iv(c,c.attrs,!1),c.mergedAttrs!==null&&iv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(n,e,t,r){let i=We(),o=Tn(),s=Xi+n,a=i[At],c=o.firstCreatePass?G2(s,o,i,e,t,r):o.data[s],d=W2(o,i,c,a,e,n);i[s]=d;let g=Dv(c);return el(c,!0),nT(a,d,c),!_2(c)&&Mv()&&qv(o,i,d,c),mk()===0&&ls(d,i),yk(),g&&(uT(o,i,c),cT(o,c,i)),r!==null&&lT(i,c),G}function J(){let n=tn();fD()?Ik():(n=n.parent,el(n,!1));let e=n;_k(e)&&bk(),vk();let t=Tn();return t.firstCreatePass&&(Nv(t,n),eD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Fk(e)&&vC(t,e,We(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Vk(e)&&vC(t,e,We(),e.stylesWithoutHost,!1),J}function Re(n,e,t,r){return G(n,e,t,r),J(),Re}var W2=(n,e,t,r,i,o)=>(Rv(!0),KD(r,i,Nk()));function so(){return We()}var jf="en-US";var K2=jf;function Q2(n){typeof n=="string"&&(K2=n.toLowerCase().replace(/_/g,"-"))}var Y2=(n,e,t)=>{};function He(n,e,t,r){let i=We(),o=Tn(),s=tn();return NT(o,i,i[At],s,n,e,r),He}function Z2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[wf],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function NT(n,e,t,r,i,o,s){let a=Dv(r),d=n.firstCreatePass&&fF(n),g=e[sr],p=hF(e),w=!0;if(r.type&3||s){let P=Ln(r,e),R=s?s(P):P,U=p.length,Y=s?ne=>s(Mr(ne[r.index])):r.index,H=null;if(!s&&a&&(H=Z2(n,e,i,r.index)),H!==null){let ne=H.__ngLastListenerFn__||H;ne.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,w=!1}else{o=bC(r,e,g,o),Y2(P,i,o);let ne=t.listen(R,i,o);p.push(o,ne),d&&d.push(i,Y,U,U+1)}}else o=bC(r,e,g,o);let b=r.outputs,M;if(w&&b!==null&&(M=b[i])){let P=M.length;if(P)for(let R=0;R<P;R+=2){let U=M[R],Y=M[R+1],ae=e[U][Y].subscribe(o),ie=p.length;p.push(o,ae),d&&d.push(i,r.index,ie,-(ie+1))}}}function _C(n,e,t,r){let i=Oe(null);try{return Dr(6,e,t),t(r)!==!1}catch(o){return vT(n,o),!1}finally{Dr(7,e,t),Oe(i)}}function bC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?no(n.index,e):e;Qv(s,5);let a=_C(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=_C(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Un(n=1){return Rk(n)}function pe(n,e=""){let t=We(),r=Tn(),i=n+Xi,o=r.firstCreatePass?tp(r,i,1,e,null):r.data[i],s=J2(r,t,o,e,n);t[i]=s,Mv()&&qv(r,t,s,o),el(o,!1)}var J2=(n,e,t,r,i)=>(Rv(!0),IO(e[At],r));function nn(n){return PT("",n,""),nn}function PT(n,e,t){let r=We(),i=A2(r,n,e,t);return i!==io&&wT(r,gs(),i),PT}function ci(n,e,t,r,i){let o=We(),s=x2(o,n,e,t,r,i);return s!==io&&wT(o,gs(),s),ci}function Le(n,e,t){xT(e)&&(e=e());let r=We(),i=Qf();if(hs(r,i,e)){let o=Tn(),s=xv();hT(o,s,r,n,e,r[At],t,!1)}return Le}function Be(n,e){let t=xT(n);return t&&n.set(e),t}function je(n,e){let t=We(),r=Tn(),i=tn();return NT(r,t,t[At],i,n,e),je}function X2(n,e,t){let r=Tn();if(r.firstCreatePass){let i=eo(n);dv(t,r.data,r.blueprint,i,!0),dv(e,r.data,r.blueprint,i,!1)}}function dv(n,e,t,r,i){if(n=Xt(n),Array.isArray(n))for(let o=0;o<n.length;o++)dv(n[o],e,t,r,i);else{let o=Tn(),s=We(),a=tn(),c=Ba(n)?n:Xt(n.provide),d=YC(n),g=a.providerIndexes&1048575,p=a.directiveStart,w=a.providerIndexes>>20;if(Ba(n)||!n.multi){let b=new us(d,i,he),M=My(c,e,i?g:g+w,p);M===-1?(qy(Tf(a,s),o,c),xy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),s.push(b)):(t[M]=b,s[M]=b)}else{let b=My(c,e,g+w,p),M=My(c,e,g,g+w),P=b>=0&&t[b],R=M>=0&&t[M];if(i&&!R||!i&&!P){qy(Tf(a,s),o,c);let U=nV(i?tV:eV,t.length,i,r,d);!i&&R&&(t[M].providerFactory=U),xy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=kT(t[i?M:b],d,!i&&r);xy(o,n,b>-1?b:M,U)}!i&&r&&R&&t[M].componentProviders++}}}function xy(n,e,t,r){let i=Ba(e),o=JP(e);if(i||o){let c=(o?Xt(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=d.indexOf(t);g===-1?d.push(t,[r,c]):d[g+1].push(r,c)}else d.push(t,c)}}}function kT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function My(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eV(n,e,t,r){return hv(this.multi,[])}function tV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=qa(t,t[De],this.providerFactory.index,r);o=a.slice(0,s),hv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],hv(i,o);return o}function hv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function nV(n,e,t,r,i){let o=new us(n,t,he);return o.multi=[],o.index=e,o.componentProviders=0,kT(o,i,r&&!t),o}function sp(n,e=[]){return t=>{t.providersResolver=(r,i)=>X2(r,i?i(n):n,e)}}var rV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=WC(!1,t.type),i=r.length>0?rp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n($(Cn))})}}return n})();function OT(n){il("NgStandalone"),n.getStandaloneInjector=e=>e.get(rV).getOrCreateStandaloneInjector(n)}var cf=null;function iV(n){cf!==null&&(n.defaultEncapsulation!==cf.defaultEncapsulation||n.preserveWhitespaces!==cf.preserveWhitespaces)||(cf=n)}var ri=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},FT=new ri("18.2.13");var ap=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ew=new X(""),sl=new X(""),cp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tw||(oV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)($(Me),$(up),$(sl))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),up=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return tw?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function oV(n){tw=n}var tw;function ys(n){return!!n&&typeof n.then=="function"}function VT(n){return!!n&&typeof n.subscribe=="function"}var lp=new X(""),LT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=z(lp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ys(o))t.push(o);else if(VT(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nw=new X("");function sV(){pI(()=>{throw new oe(600,!1)})}function aV(n){return n.isBoundToModule}var cV=10;function uV(n,e,t){try{let r=t();return ys(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function jT(n,e){return Array.isArray(e)?e.reduce(jT,n):L(L({},n),e)}var ao=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=z(iO),this.afterRenderManager=z(RT),this.zonelessEnabled=z(Zv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new et,this.afterTick=new et,this.componentTypes=[],this.components=[],this.isStable=z(Xa).hasPendingTasks.pipe(te(t=>!t)),this._injector=z(Cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Pf;if(!this._injector.get(LT).done){let w=!i&&HC(t),b=!1;throw new oe(405,b)}let s;i?s=t:s=this._injector.get(Ga).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=aV(s)?void 0:this._injector.get(to),c=r||s.selector,d=s.create(Dn.NULL,[],c,a),g=d.location.nativeElement,p=d.injector.get(ew,null);return p?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),ff(this.components,d),p?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new oe(101,!1);let t=Oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Oe(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Wa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<cV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)lV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ff(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(nw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ff(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ff(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lV(n,e,t,r){if(!t&&!Wf(n))return;ET(n,e,t&&!r?0:1)}var fv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},dp=(()=>{class n{compileModuleSync(t){return new Vf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=qC(t),o=WD(i.declarations).reduce((s,a)=>{let c=Ji(a);return c&&s.push(new Ka(c)),s},[]);return new fv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dV=new X("");function hV(n,e,t){let r=new Vf(t);return Promise.resolve(r)}function EC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var fV=(()=>{class n{constructor(){this.zone=z(Me),this.changeDetectionScheduler=z(za),this.applicationRef=z(ao)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Me(Ee(L({},BT()),{scheduleInRootZone:t})),[{provide:Me,useFactory:n},{provide:ja,multi:!0,useFactory:()=>{let r=z(fV,{optional:!0});return()=>r.initialize()}},{provide:ja,multi:!0,useFactory:()=>{let r=z(gV);return()=>{r.initialize()}}},e===!0?{provide:TT,useValue:!0}:[],{provide:ST,useValue:t??kD}]}function BT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var gV=(()=>{class n{constructor(){this.subscription=new at,this.initialized=!1,this.zone=z(Me),this.pendingTasks=z(Xa)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mV=(()=>{class n{constructor(){this.appRef=z(ao),this.taskService=z(Xa),this.ngZone=z(Me),this.zonelessEnabled=z(Zv),this.disableScheduling=z(TT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new at,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Af):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(ST,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rC:OD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Af+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yV(){return typeof $localize<"u"&&$localize.locale||jf}var rw=new X("",{providedIn:"root",factory:()=>z(rw,_e.Optional|_e.SkipSelf)||yV()});var Bf=new X("");function uf(n){return!n.moduleRef}function vV(n){let e=uf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Me);return t.run(()=>{uf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ti,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),uf(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Bf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Bf);s.add(o),n.moduleRef.onDestroy(()=>{ff(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return uV(r,t,()=>{let o=e.get(LT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(rw,jf);if(Q2(s||jf),uf(n)){let a=e.get(ao);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return wV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function wV(n,e){let t=n.injector.get(ao);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new oe(-403,!1);e.push(n)}var UT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>rO(r?.ngZone,Ee(L({},BT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[pV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:za,useExisting:mV}],c=m2(t.moduleType,this.injector,a);return vV({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=jT({},r);return hV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Bf,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)($(Dn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),zu=null,$T=new X("");function _V(n){if(zu&&!zu.get($T,!1))throw new oe(400,!1);sV(),zu=n;let e=n.get(UT);return IV(n),e}function iw(n,e,t=[]){let r=`Platform: ${e}`,i=new X(r);return(o=[])=>{let s=HT();if(!s||s.injector.get($T,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):_V(bV(a,r))}return EV(i)}}function bV(n=[],e){return Dn.create({name:e,providers:[{provide:qf,useValue:"platform"},{provide:Bf,useValue:new Set([()=>zu=null])},...n]})}function EV(n){let e=HT();if(!e)throw new oe(401,!1);return e}function HT(){return zu?.get(UT)??null}function IV(n){n.get(Lv,null)?.forEach(t=>t())}function ow(){return!1}var vs=(()=>{class n{static{this.__NG_ELEMENT_ID__=CV}}return n})();function CV(n){return DV(tn(),We(),(n&16)===16)}function DV(n,e,t){if(Gf(n)&&!t){let r=no(n.index,e);return new ds(r,r)}else if(n.type&175){let r=e[xr];return new ds(r,e)}return null}var pv=class{constructor(){}supports(e){return MT(e)}create(e){return new gv(e)}},TV=(n,e)=>e,gv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||TV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<IC(r,i,o)?t:r,a=IC(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,g=c-i;if(d!=g){for(let w=0;w<d;w++){let b=w<o.length?o[w]:o[w]=0,M=b+w;g<=M&&M<d&&(o[w]=b+1)}let p=s.previousIndex;o[p]=g-d}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!MT(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,y2(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new mv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Uf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},mv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Uf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CC(){return new sw([new pv])}var sw=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:CC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CC()),deps:[[n,new _v,new Za]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new oe(901,!1)}}return n})();var qT=iw(null,"core",[]),zT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)($(ao))}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({})}}return n})();function ws(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function al(n,e){il("NgSignals");let t=dI(n);return e?.equal&&(t[Zr].equal=e.equal),t}function ui(n){let e=Oe(null);try{return n()}finally{Oe(e)}}function GT(n){let e=Ji(n);if(!e)return null;let t=new Ka(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var YT=null;function Nr(){return YT}function ZT(n){YT??=n}var hp=class{};var pn=new X(""),lw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(SV),providedIn:"platform"})}}return n})(),JT=new X(""),SV=(()=>{class n extends lw{constructor(){super(),this._doc=z(pn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nr().getBaseHref(this._doc)}onPopState(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function dw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function WT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function li(n){return n&&n[0]!=="?"?"?"+n:n}var di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(hw),providedIn:"root"})}}return n})(),XT=new X(""),hw=(()=>{class n extends di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(lw),$(XT,8))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eS=(()=>{class n extends di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=dw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(lw),$(XT,8))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),ec=(()=>{class n{constructor(t){this._subject=new vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=MV(WT(KT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+li(r))}normalize(t){return n.stripTrailingSlash(xV(this._basePath,KT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=li}static{this.joinWithSlash=dw}static{this.stripTrailingSlash=WT}static{this.\u0275fac=function(r){return new(r||n)($(di))}}static{this.\u0275prov=Z({token:n,factory:()=>AV(),providedIn:"root"})}}return n})();function AV(){return new ec($(di))}function xV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function KT(n){return n.replace(/\/index.html$/,"")}function MV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function tS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var aw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},co=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new aw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),QT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);QT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(he(rl),he(Yv),he(sw))}}static{this.\u0275dir=hn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function QT(n,e){n.context.$implicit=e.item}var nS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({})}}return n})(),fw="browser",RV="server";function NV(n){return n===fw}function _s(n){return n===RV}var rS=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>NV(z(fn))?new cw(z(pn),window):new uw})}}return n})(),cw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=PV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function PV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var uw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},fp=class{};var mw=class extends hp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},yw=class n extends mw{static makeCurrent(){ZT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=OV();return t==null?null:FV(t)}resetBaseElement(){ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tS(document.cookie,e)}},ul=null;function OV(){return ul=ul||document.querySelector("base"),ul?ul.getAttribute("href"):null}function FV(n){return new URL(n,document.baseURI).pathname}var vw=class{addToWindow(e){or.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new oe(5103,!1);return o},or.getAllAngularTestabilities=()=>e.getAllTestabilities(),or.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=or.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};or.frameworkStabilizers||(or.frameworkStabilizers=[]),or.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Nr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},VV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),ww=new X(""),aS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)($(ww),$(Me))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),pp=class{constructor(e){this._doc=e}},pw="ng-app-id",cS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_s(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${pw}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(pw),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(pw,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)($(pn),$(Zf),$(jv,8),$(fn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),gw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bw=/%COMP%/g,uS="%COMP%",LV=`_nghost-${uS}`,jV=`_ngcontent-${uS}`,BV=!0,UV=new X("",{providedIn:"root",factory:()=>BV});function $V(n){return jV.replace(bw,n)}function HV(n){return LV.replace(bw,n)}function lS(n,e){return e.map(t=>t.replace(bw,n))}var iS=(()=>{class n{constructor(t,r,i,o,s,a,c,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=_s(a),this.defaultRenderer=new ll(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Sr.ShadowDom&&(r=Ee(L({},r),{encapsulation:Sr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof gp?i.applyToHost(t):i instanceof dl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Sr.Emulated:o=new gp(c,d,r,this.appId,g,s,a,p);break;case Sr.ShadowDom:return new _w(c,d,t,r,s,a,this.nonce,p);default:o=new dl(c,d,r,g,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)($(aS),$(cS),$(Zf),$(UV),$(pn),$(fn),$(Me),$(jv))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),ll=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(oS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=gw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Nr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function oS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _w=class extends ll{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=lS(i.id,i.styles);for(let g of d){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=g,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},dl=class extends ll{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?lS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},gp=class extends dl{constructor(e,t,r,i,o,s,a,c){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,d),this.contentAttr=$V(d),this.hostAttr=HV(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},qV=(()=>{class n extends pp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)($(pn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),sS=["alt","control","meta","shift"],zV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},WV=(()=>{class n extends pp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sS.forEach(d=>{let g=r.indexOf(d);g>-1&&(r.splice(g,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=zV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sS.forEach(s=>{if(s!==i){let a=GV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)($(pn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function KV(){yw.makeCurrent()}function QV(){return new ti}function YV(){return $D(document),document}var ZV=[{provide:fn,useValue:fw},{provide:Lv,useValue:KV,multi:!0},{provide:pn,useFactory:YV,deps:[]}],dS=iw(qT,"browser",ZV),JV=new X(""),XV=[{provide:sl,useClass:vw,deps:[]},{provide:ew,useClass:cp,deps:[Me,up,sl]},{provide:cp,useClass:cp,deps:[Me,up,sl]}],eL=[{provide:qf,useValue:"root"},{provide:ti,useFactory:QV,deps:[]},{provide:ww,useClass:qV,multi:!0,deps:[pn,Me,fn]},{provide:ww,useClass:WV,multi:!0,deps:[pn]},iS,cS,aS,{provide:Wa,useExisting:iS},{provide:fp,useClass:VV,deps:[]},[]],hS=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Zf,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)($(JV,12))}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({providers:[...eL,...XV],imports:[nS,zT]})}}return n})();var fS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)($(pn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ES=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(he(ms),he(ro))}}static{this.\u0275dir=hn({type:n})}}return n})(),tL=(()=>{class n extends ES{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=tl(n)))(i||n)}})()}static{this.\u0275dir=hn({type:n,features:[oo]})}}return n})(),IS=new X("");var nL={provide:IS,useExisting:Ya(()=>Wt),multi:!0};function rL(){let n=Nr()?Nr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var iL=new X(""),Wt=(()=>{class n extends ES{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(he(ms),he(ro),he(iL,8))}}static{this.\u0275dir=hn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&He("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[sp([nL]),oo]})}}return n})();var CS=new X(""),DS=new X("");function TS(n){return n!=null}function SS(n){return ys(n)?Fe(n):n}function AS(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function xS(n,e){return e.map(t=>t(n))}function oL(n){return!n.validate}function MS(n){return n.map(e=>oL(e)?e:t=>e.validate(t))}function sL(n){if(!n)return null;let e=n.filter(TS);return e.length==0?null:function(t){return AS(xS(t,e))}}function Iw(n){return n!=null?sL(MS(n)):null}function aL(n){if(!n)return null;let e=n.filter(TS);return e.length==0?null:function(t){let r=xS(t,e).map(SS);return dy(r).pipe(te(AS))}}function Cw(n){return n!=null?aL(MS(n)):null}function gS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cL(n){return n._rawValidators}function uL(n){return n._rawAsyncValidators}function Ew(n){return n?Array.isArray(n)?n:[n]:[]}function yp(n,e){return Array.isArray(n)?n.includes(e):n===e}function mS(n,e){let t=Ew(e);return Ew(n).forEach(i=>{yp(t,i)||t.push(i)}),t}function yS(n,e){return Ew(e).filter(t=>!yp(n,t))}var vp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Iw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},rc=class extends vp{get formDirective(){return null}get path(){return null}},yl=class extends vp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},G6=Ee(L({},lL),{"[class.ng-submitted]":"isSubmitted"}),gn=(()=>{class n extends wp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(he(yl,2))}}static{this.\u0275dir=hn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&op("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[oo]})}}return n})(),mn=(()=>{class n extends wp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(he(rc,10))}}static{this.\u0275dir=hn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&op("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[oo]})}}return n})();var hl="VALID",mp="INVALID",tc="PENDING",fl="DISABLED",ic=class{},_p=class extends ic{constructor(e,t){super(),this.value=e,this.source=t}},gl=class extends ic{constructor(e,t){super(),this.pristine=e,this.source=t}},ml=class extends ic{constructor(e,t){super(),this.touched=e,this.source=t}},nc=class extends ic{constructor(e,t){super(),this.status=e,this.source=t}};function RS(n){return(Ip(n)?n.validators:n)||null}function dL(n){return Array.isArray(n)?Iw(n):n||null}function NS(n,e){return(Ip(e)?e.asyncValidators:n)||null}function hL(n){return Array.isArray(n)?Cw(n):n||null}function Ip(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function fL(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new oe(1e3,"");if(!r[t])throw new oe(1001,"")}function pL(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new oe(1002,"")})}var bp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=al(()=>this.statusReactive()),this.statusReactive=ol(void 0),this._pristine=al(()=>this.pristineReactive()),this.pristineReactive=ol(!0),this._touched=al(()=>this.touchedReactive()),this.touchedReactive=ol(!1),this._events=new et,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ui(this.statusReactive)}set status(e){ui(()=>this.statusReactive.set(e))}get valid(){return this.status===hl}get invalid(){return this.status===mp}get pending(){return this.status==tc}get disabled(){return this.status===fl}get enabled(){return this.status!==fl}get pristine(){return ui(this.pristineReactive)}set pristine(e){ui(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ui(this.touchedReactive)}set touched(e){ui(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yS(e,this._rawAsyncValidators))}hasValidator(e){return yp(this._rawValidators,e)}hasAsyncValidator(e){return yp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ee(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ml(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ml(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ee(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new gl(!0,r))}markAsPending(e={}){this.status=tc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ee(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fl,this.errors=null,this._forEachChild(i=>{i.disable(Ee(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,r)),this._events.next(new nc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hl,this._forEachChild(r=>{r.enable(Ee(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hl||this.status===tc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,t)),this._events.next(new nc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ee(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fl:hl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=tc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=SS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new nc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?fl:this.errors?mp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tc)?tc:this._anyControlsHaveStatus(mp)?mp:hl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new gl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ml(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ip(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hL(this._rawAsyncValidators)}},Ep=class extends bp{constructor(e,t,r){super(RS(t),NS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pL(this,!0,e),Object.keys(e).forEach(r=>{fL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Dw=new X("CallSetDisabledState",{providedIn:"root",factory:()=>Tw}),Tw="always";function gL(n,e){return[...e.path,n]}function PS(n,e,t=Tw){kS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yL(n,e),wL(n,e),vL(n,e),mL(n,e)}function vS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mL(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kS(n,e){let t=cL(n);e.validator!==null?n.setValidators(gS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=uL(n);e.asyncValidator!==null?n.setAsyncValidators(gS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();vS(e._rawValidators,i),vS(e._rawAsyncValidators,i)}function yL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OS(n,e)})}function vL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wL(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _L(n,e){n==null,kS(n,e)}function bL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function EL(n){return Object.getPrototypeOf(n.constructor)===tL}function IL(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function CL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wt?t=o:EL(o)?r=o:i=o}),i||r||t||null}var DL={provide:rc,useExisting:Ya(()=>rn)},pl=Promise.resolve(),rn=(()=>{class n extends rc{get submitted(){return ui(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=al(()=>this.submittedReactive()),this.submittedReactive=ol(!1),this._directives=new Set,this.ngSubmit=new vt,this.form=new Ep({},Iw(t),Cw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){pl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),PS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){pl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){pl.then(()=>{let r=this._findContainer(t.path),i=new Ep({});_L(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){pl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){pl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),IL(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(he(CS,10),he(DS,10),he(Dw,8))}}static{this.\u0275dir=hn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&He("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sp([DL]),oo]})}}return n})();function wS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _S(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var TL=class extends bp{constructor(e=null,t,r){super(RS(t),NS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ip(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_S(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_S(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SL={provide:yl,useExisting:Ya(()=>on)},bS=Promise.resolve(),on=(()=>{class n extends yl{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new TL,this._registered=!1,this.name="",this.update=new vt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=CL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){PS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){bS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ws(r);bS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?gL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(he(rc,9),he(CS,10),he(DS,10),he(IS,10),he(vs,8),he(Dw,8))}}static{this.\u0275dir=hn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sp([SL]),oo,ps]})}}return n})(),yn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=hn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var AL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({})}}return n})();var FS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Dw,useValue:t.callSetDisabledState??Tw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({imports:[AL]})}}return n})();var xL="firebase",ML="10.14.1";qi(xL,ML,"app");var vl=new ri("ANGULARFIRE2_VERSION");var RL=(n,e)=>{let t=e?[e]:nI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Es=class{constructor(){return RL(NL)}},NL="app-check";function Sw(){}var Cp=class{zone;delegate;constructor(e,t=cy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Aw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sw,{},Sw,Sw)),t.pipe(St({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Dp=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Cp(Zone.current)),this.insideAngular=t.run(()=>new Cp(Zone.current,ju)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)($(Me))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PL(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function vn(n){return kL(PL())(n)}function kL(n){return function(t){return t=t.lift(new Aw(n.ngZone)),t.pipe(nr(n.outsideAngular),Nn(n.insideAngular))}}var OL="firebase",FL="10.14.1";In.registerVersion(OL,FL,"app-compat");var VL=["ngOnDestroy"],jS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(VL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(d=>t.run(()=>d)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,d)=>s.then(g=>{let p=g?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,p),p})})})});var Tp=class{constructor(e){return e}},oc=new X("angularfire2.app.options"),sc=new X("angularfire2.app.name");function wl(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=In.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>In.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;LL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Tp(s)}var LL=(n,...e)=>{ow()&&typeof console<"u"&&console[n](...e)},jL={provide:Tp,useFactory:wl,deps:[oc,Me,[new Za,sc]]},BS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:oc,useValue:t},{provide:sc,useValue:r}]}}constructor(t){In.registerVersion("angularfire",vl.full,"core"),In.registerVersion("angularfire",vl.full,"app-compat"),In.registerVersion("angular",FT.full,t.toString())}static \u0275fac=function(r){return new(r||n)($(fn))};static \u0275mod=Vt({type:n});static \u0275inj=Ot({providers:[jL]})}return n})();function Sp(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return BL(i,s)||(LS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${UL?" You may need to reload as Firebase is not HMR aware.":""}`),LS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function BL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var UL=typeof module<"u"&&!!module.hot,LS=(n,...e)=>{ow()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var US={production:!1,firebase:{apiKey:"AIzaSyAiicR9-3ZEOhGAVL5jxkaxthn4nOkT3aY",authDomain:"mycv-matador1081.firebaseapp.com",projectId:"mycv-matador1081",storageBucket:"mycv-matador1081.firebasestorage.app",messagingSenderId:"113584989289",appId:"1:113584989289:web:93642746b2962f55156ef8"}};var me="primary",Pl=Symbol("RouteTitle"),Pw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function hc(n){return new Pw(n)}function $L(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function HL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pr(n[t],e[t]))return!1;return!0}function Pr(n,e){let t=n?kw(n):void 0,r=e?kw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!JS(n[i],e[i]))return!1;return!0}function kw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function XS(n){return n.length>0?n[n.length-1]:null}function ho(n){return ly(n)?n:ys(n)?Fe(Promise.resolve(n)):ce(n)}var qL={exact:tA,subset:nA},eA={exact:zL,subset:GL,ignored:()=>!0};function $S(n,e,t){return qL[t.paths](n.root,e.root,t.matrixParams)&&eA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function zL(n,e){return Pr(n,e)}function tA(n,e,t){if(!Cs(n.segments,e.segments)||!Mp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!tA(n.children[r],e.children[r],t))return!1;return!0}function GL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JS(n[t],e[t]))}function nA(n,e,t){return rA(n,e,e.segments,t)}function rA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Cs(i,t)||e.hasChildren()||!Mp(i,t,r))}else if(n.segments.length===t.length){if(!Cs(n.segments,t)||!Mp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!nA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Cs(n.segments,i)||!Mp(n.segments,i,r)||!n.children[me]?!1:rA(n.children[me],e,o,r)}}function Mp(n,e,t){return e.every((r,i)=>eA[t](n[i].parameters,r.parameters))}var fi=class{constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=hc(this.queryParams),this._queryParamMap}toString(){return QL.serialize(this)}},Ue=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rp(this)}},Is=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=hc(this.parameters),this._parameterMap}toString(){return oA(this)}};function WL(n,e){return Cs(n,e)&&n.every((t,r)=>Pr(t.parameters,e[r].parameters))}function Cs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function KL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===me&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==me&&(t=t.concat(e(i,r)))}),t}var kl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new fc,providedIn:"root"})}}return n})(),fc=class{parse(e){let t=new Fw(e);return new fi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_l(e.root,!0)}`,r=JL(e.queryParams),i=typeof e.fragment=="string"?`#${YL(e.fragment)}`:"";return`${t}${r}${i}`}},QL=new fc;function Rp(n){return n.segments.map(e=>oA(e)).join("/")}function _l(n,e){if(!n.hasChildren())return Rp(n);if(e){let t=n.children[me]?_l(n.children[me],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==me&&r.push(`${i}:${_l(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=KL(n,(r,i)=>i===me?[_l(n.children[me],!1)]:[`${i}:${_l(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[me]!=null?`${Rp(n)}/${t[0]}`:`${Rp(n)}/(${t.join("//")})`}}function iA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ap(n){return iA(n).replace(/%3B/gi,";")}function YL(n){return encodeURI(n)}function Ow(n){return iA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Np(n){return decodeURIComponent(n)}function HS(n){return Np(n.replace(/\+/g,"%20"))}function oA(n){return`${Ow(n.path)}${ZL(n.parameters)}`}function ZL(n){return Object.entries(n).map(([e,t])=>`;${Ow(e)}=${Ow(t)}`).join("")}function JL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ap(t)}=${Ap(i)}`).join("&"):`${Ap(t)}=${Ap(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var XL=/^[^\/()?;#]+/;function xw(n){let e=n.match(XL);return e?e[0]:""}var ej=/^[^\/()?;=#]+/;function tj(n){let e=n.match(ej);return e?e[0]:""}var nj=/^[^=?&#]+/;function rj(n){let e=n.match(nj);return e?e[0]:""}var ij=/^[^&#]+/;function oj(n){let e=n.match(ij);return e?e[0]:""}var Fw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[me]=new Ue(e,t)),r}parseSegment(){let e=xw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Is(Np(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=tj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xw(this.remaining);i&&(r=i,this.capture(r))}e[Np(t)]=Np(r)}parseQueryParam(e){let t=rj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=oj(this.remaining);s&&(r=s,this.capture(r))}let i=HS(t),o=HS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=me);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[me]:new Ue([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function sA(n){return n.segments.length>0?new Ue([],{[me]:n}):n}function aA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=aA(i);if(r===me&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ue(n.segments,e);return sj(t)}function sj(n){if(n.numberOfChildren===1&&n.children[me]){let e=n.children[me];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Ds(n){return n instanceof fi}function aj(n,e,t=null,r=null){let i=cA(n);return uA(i,e,t,r)}function cA(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let a=new Ue(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=sA(r);return e??i}function uA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mw(i,i,i,t,r);let o=cj(e);if(o.toRoot())return Mw(i,i,new Ue([],{}),t,r);let s=uj(o,i,n),a=s.processChildren?Il(s.segmentGroup,s.index,o.commands):dA(s.segmentGroup,s.index,o.commands);return Mw(i,s.segmentGroup,a,t,r)}function Pp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Tl(n){return typeof n=="object"&&n!=null&&n.outlets}function Mw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`});let s;n===e?s=t:s=lA(n,e,t);let a=sA(aA(s));return new fi(a,o,i)}function lA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=lA(o,e,t)}),new Ue(n.segments,r)}var kp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pp(r[0]))throw new oe(4003,!1);let i=r.find(Tl);if(i&&i!==XS(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new kp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new kp(t,e,r)}var uc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function uj(n,e,t){if(n.isAbsolute)return new uc(e,!0,0);if(!t)return new uc(e,!1,NaN);if(t.parent===null)return new uc(t,!0,0);let r=Pp(n.commands[0])?0:1,i=t.segments.length-1+r;return lj(t,i,n.numberOfDoubleDots)}function lj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new uc(r,!1,i-o)}function dj(n){return Tl(n[0])?n[0].outlets:{[me]:n}}function dA(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Il(n,e,t);let r=hj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ue(n.segments.slice(0,r.pathIndex),{});return o.children[me]=new Ue(n.segments.slice(r.pathIndex),n.children),Il(o,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?Vw(n,e,t):r.match?Il(n,0,i):Vw(n,e,t)}function Il(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=dj(t),i={};if(Object.keys(r).some(o=>o!==me)&&n.children[me]&&n.numberOfChildren===1&&n.children[me].segments.length===0){let o=Il(n.children[me],e,t);return new Ue(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ue(n.segments,i)}}function hj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Tl(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!zS(c,d,s))return o;r+=2}else{if(!zS(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Tl(o)){let c=fj(o.outlets);return new Ue(r,c)}if(i===0&&Pp(t[0])){let c=n.segments[e];r.push(new Is(c.path,qS(t[0]))),i++;continue}let s=Tl(o)?o.outlets[me]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Pp(a)?(r.push(new Is(s,qS(a))),i+=2):(r.push(new Is(s,{})),i++)}return new Ue(r,{})}function fj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vw(new Ue([],{}),0,r))}),e}function qS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function zS(n,e,t){return n==t.path&&Pr(e,t.parameters)}var Cl="imperative",Lt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Lt||{}),$n=class{constructor(e,t){this.id=e,this.url=t}},pc=class extends $n{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kr=class extends $n{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},An=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(An||{}),Op=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Op||{}),hi=class extends $n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},uo=class extends $n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Lt.NavigationSkipped}},Sl=class extends $n{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fp=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jw=class extends $n{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bw=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uw=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$w=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hw=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qw=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zw=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gw=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ww=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Al=class{},gc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function pj(n,e){return n.providers&&!n._injector&&(n._injector=rp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cr(n){return n.outlet||me}function gj(n,e){let t=n.filter(r=>cr(r)===e);return t.push(...n.filter(r=>cr(r)!==e)),t}function Ol(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Kw=class{get injector(){return Ol(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Fl(this.rootInjector),this.attachRef=null}},Fl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Kw(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)($(Cn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yw(e,this._root).map(t=>t.value)}};function Qw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qw(n,t);if(r)return r}return null}function Yw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yw(n,t);if(r.length)return r.unshift(e),r}return[]}var Sn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function cc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var jp=class extends Lp{constructor(e,t){super(e),this.snapshot=t,o_(this,e)}toString(){return this.snapshot.toString()}};function hA(n){let e=mj(n),t=new Ut([new Is("",{})]),r=new Ut({}),i=new Ut({}),o=new Ut({}),s=new Ut(""),a=new Ts(t,r,o,s,i,me,n,e.root);return a.snapshot=e.root,new jp(new Sn(a,[]),e)}function mj(n){let e={},t={},r={},i="",o=new lc([],e,r,i,t,me,n,null,{});return new Up("",new Sn(o,[]))}var Ts=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(d=>d[Pl]))??ce(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>hc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>hc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&pA(i)&&(r.resolve[Pl]=i.title),r}var lc=class{get title(){return this.data?.[Pl]}constructor(e,t,r,i,o,s,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Up=class extends Lp{constructor(e,t){super(t),this.url=e,o_(this,t)}toString(){return fA(this._root)}};function o_(n,e){e.value._routerState=n,e.children.forEach(t=>o_(n,t))}function fA(n){let e=n.children.length>0?` { ${n.children.map(fA).join(", ")} } `:"";return`${n.value}${e}`}function Rw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pr(e.params,t.params)||n.paramsSubject.next(t.params),HL(e.url,t.url)||n.urlSubject.next(t.url),Pr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zw(n,e){let t=Pr(n.params,e.params)&&WL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zw(n.parent,e.parent))}function pA(n){return typeof n.title=="string"||n.title===null}var s_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=z(Fl),this.location=z(rl),this.changeDetector=z(vs),this.inputBinder=z(Gp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Jw(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=hn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ps]})}}return n})(),Jw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ts?this.route:e===Fl?this.childContexts:this.parent.get(e,t)}},Gp=new X(""),GS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Bu([r.queryParams,r.params,r.data]).pipe(ct(([o,s,a],c)=>(a=L(L(L({},o),s),a),c===0?ce(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=GT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function yj(n,e,t){let r=xl(n,e._root,t?t._root:void 0);return new jp(r,e)}function xl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=vj(n,e,t);return new Sn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xl(n,a)),s}}let r=wj(e.value),i=e.children.map(o=>xl(n,o));return new Sn(r,i)}}function vj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xl(n,r,i);return xl(n,r)})}function wj(n){return new Ts(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var Ml=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},gA="ngNavigationCancelingError";function $p(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ds(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mA(!1,An.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[gA]=!0,t.cancellationCode=e,t}function _j(n){return yA(n)&&Ds(n.url)}function yA(n){return!!n&&n[gA]}var bj=(n,e,t,r)=>te(i=>(new Xw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xw=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ww(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Rw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Hp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},dc=class{constructor(e,t){this.component=e,this.route=t}};function Ej(n,e,t){let r=n._root,i=e?e._root:null;return bl(r,i,t,[r.value])}function Ij(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!AC(n)?n:e.get(n):r}function bl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=cc(e);return n.children.forEach(s=>{Cj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Dl(a,t.getContext(s),i)),i}function Cj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Dj(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bl(n,e,a?a.children:null,r,i):bl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dc(a.outlet.component,s))}else s&&Dl(e,a,i),i.canActivateChecks.push(new Hp(r)),o.component?bl(n,null,a?a.children:null,r,i):bl(n,null,t,r,i);return i}function Dj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Cs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cs(n.url,e.url)||!Pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zw(n,e)||!Pr(n.queryParams,e.queryParams);case"paramsChange":default:return!Zw(n,e)}}function Dl(n,e,t){let r=cc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Dl(s,e.children.getContext(o),t):Dl(s,null,t):Dl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new dc(e.outlet.component,i)):t.canDeactivateChecks.push(new dc(null,i)):t.canDeactivateChecks.push(new dc(null,i))}function Vl(n){return typeof n=="function"}function Tj(n){return typeof n=="boolean"}function Sj(n){return n&&Vl(n.canLoad)}function Aj(n){return n&&Vl(n.canActivate)}function xj(n){return n&&Vl(n.canActivateChild)}function Mj(n){return n&&Vl(n.canDeactivate)}function Rj(n){return n&&Vl(n.canMatch)}function vA(n){return n instanceof Xr||n?.name==="EmptyError"}var xp=Symbol("INITIAL_VALUE");function mc(){return ct(n=>Bu(n.map(e=>e.pipe(ei(1),is(xp)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===xp)return xp;if(t===!1||Nj(t))return t}return!0}),$t(e=>e!==xp),ei(1)))}function Nj(n){return Ds(n)||n instanceof Ml}function Pj(n,e){return yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ce(Ee(L({},t),{guardsResult:!0})):kj(s,r,i,n).pipe(yt(a=>a&&Tj(a)?Oj(r,o,n,e):ce(a)),te(a=>Ee(L({},t),{guardsResult:a})))})}function kj(n,e,t,r){return Fe(n).pipe(yt(i=>Bj(i.component,i.route,t,e,r)),Pn(i=>i!==!0,!0))}function Oj(n,e,t,r){return Fe(e).pipe(ns(i=>Aa(Vj(i.route.parent,r),Fj(i.route,r),jj(n,i.path,t),Lj(n,i.route,t))),Pn(i=>i!==!0,!0))}function Fj(n,e){return n!==null&&e&&e(new Gw(n)),ce(!0)}function Vj(n,e){return n!==null&&e&&e(new qw(n)),ce(!0)}function Lj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(o=>Xh(()=>{let s=Ol(e)??t,a=yc(o,s),c=Aj(a)?a.canActivate(e,n):Rr(s,()=>a(e,n));return ho(c).pipe(Pn())}));return ce(i).pipe(mc())}function jj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Ij(s)).filter(s=>s!==null).map(s=>Xh(()=>{let a=s.guards.map(c=>{let d=Ol(s.node)??t,g=yc(c,d),p=xj(g)?g.canActivateChild(r,n):Rr(d,()=>g(r,n));return ho(p).pipe(Pn())});return ce(a).pipe(mc())}));return ce(o).pipe(mc())}function Bj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let c=Ol(e)??i,d=yc(a,c),g=Mj(d)?d.canDeactivate(n,e,t,r):Rr(c,()=>d(n,e,t,r));return ho(g).pipe(Pn())});return ce(s).pipe(mc())}function Uj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let o=i.map(s=>{let a=yc(s,n),c=Sj(a)?a.canLoad(e,t):Rr(n,()=>a(e,t));return ho(c)});return ce(o).pipe(mc(),wA(r))}function wA(n){return iy(St(e=>{if(typeof e!="boolean")throw $p(n,e)}),te(e=>e===!0))}function $j(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let a=yc(s,n),c=Rj(a)?a.canMatch(e,t):Rr(n,()=>a(e,t));return ho(c)});return ce(o).pipe(mc(),wA(r))}var Rl=class{constructor(e){this.segmentGroup=e||null}},Nl=class extends Error{constructor(e){super(),this.urlTree=e}};function ac(n){return Sa(new Rl(n))}function Hj(n){return Sa(new oe(4e3,!1))}function qj(n){return Sa(mA(!1,An.GuardRejected))}var e_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[me])return Hj(`${e.redirectTo}`);i=i.children[me]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:g,url:p,outlet:w,params:b,data:M,title:P}=i,R=Rr(o,()=>a({params:b,data:M,queryParams:c,fragment:d,routeConfig:g,url:p,outlet:w,title:P}));if(R instanceof fi)throw new Nl(R);t=R}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Nl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new fi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ue(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},t_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zj(n,e,t,r,i){let o=_A(n,e,t);return o.matched?(r=pj(e,r),$j(r,e,t,i).pipe(te(s=>s===!0?o:L({},t_)))):ce(o)}function _A(n,e,t){if(e.path==="**")return Gj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},t_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$L)(t,n,e);if(!i)return L({},t_);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Gj(n){return{matched:!0,parameters:n.length>0?XS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WS(n,e,t,r){return t.length>0&&Qj(n,t,r)?{segmentGroup:new Ue(e,Kj(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&Yj(n,t,r)?{segmentGroup:new Ue(n.segments,Wj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function Wj(n,e,t,r){let i={};for(let o of t)if(Wp(n,e,o)&&!r[cr(o)]){let s=new Ue([],{});i[cr(o)]=s}return L(L({},r),i)}function Kj(n,e){let t={};t[me]=e;for(let r of n)if(r.path===""&&cr(r)!==me){let i=new Ue([],{});t[cr(r)]=i}return t}function Qj(n,e,t){return t.some(r=>Wp(n,e,r)&&cr(r)!==me)}function Yj(n,e,t){return t.some(r=>Wp(n,e,r))}function Wp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Zj(n,e,t){return e.length===0&&!n.children[t]}var n_=class{};function Jj(n,e,t,r,i,o,s="emptyOnly"){return new r_(n,e,t,r,i,s,o).recognize()}var Xj=31,r_=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new e_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=WS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new Sn(r,t),o=new Up("",i),s=aj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new lc([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,me,t).pipe(te(r=>({children:r,rootSnapshot:t})),Gi(r=>{if(r instanceof Nl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(te(s=>s instanceof Sn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Fe(o).pipe(ns(s=>{let a=r.children[s],c=gj(t,s);return this.processSegmentGroup(e,c,a,s,i)}),rs((s,a)=>(s.push(...a),s)),Wi(null),gy(),yt(s=>{if(s===null)return ac(r);let a=bA(s);return eB(a),ce(a)}))}processSegment(e,t,r,i,o,s,a){return Fe(t).pipe(ns(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Gi(d=>{if(d instanceof Rl)return ce(null);throw d}))),Pn(c=>!!c),Gi(c=>{if(vA(c))return Zj(r,i,o)?ce(new n_):ac(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return cr(r)!==s&&(s===me||!Wp(i,o,r))?ac(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ac(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:g,positionalParamSegments:p,remainingSegments:w}=_A(t,i,o);if(!c)return ac(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xj&&(this.allowRedirects=!1));let b=new lc(o,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,KS(i),cr(i),i.component??i._loadedComponent??null,i,QS(i)),M=Bp(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let P=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,p,b,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(yt(R=>this.processSegment(e,r,t,R.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=zj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ct(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ct(({routes:d})=>{let g=r._loadedInjector??e,{parameters:p,consumedSegments:w,remainingSegments:b}=c,M=new lc(w,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,KS(r),cr(r),r.component??r._loadedComponent??null,r,QS(r)),P=Bp(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(P.params),M.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:U}=WS(t,w,b,d);if(U.length===0&&R.hasChildren())return this.processChildren(g,d,R,M).pipe(te(H=>new Sn(M,H)));if(d.length===0&&U.length===0)return ce(new Sn(M,[]));let Y=cr(r)===o;return this.processSegment(g,d,R,U,Y?me:o,!0,M).pipe(te(H=>new Sn(M,H instanceof Sn?[H]:[])))}))):ac(t)))}getChildConfig(e,t,r){return t.children?ce({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ce({routes:t._loadedRoutes,injector:t._loadedInjector}):Uj(e,t,r,this.urlSerializer).pipe(yt(i=>i?this.configLoader.loadChildren(e,t).pipe(St(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):qj(t))):ce({routes:[],injector:e})}};function eB(n){n.sort((e,t)=>e.value.outlet===me?-1:t.value.outlet===me?1:e.value.outlet.localeCompare(t.value.outlet))}function tB(n){let e=n.value.routeConfig;return e&&e.path===""}function bA(n){let e=[],t=new Set;for(let r of n){if(!tB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bA(r.children);e.push(new Sn(r.value,i))}return e.filter(r=>!t.has(r))}function KS(n){return n.data||{}}function QS(n){return n.resolve||{}}function nB(n,e,t,r,i,o){return yt(s=>Jj(n,e,t,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:c})=>Ee(L({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function rB(n,e){return yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ce(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of EA(c))s.add(d);let a=0;return Fe(s).pipe(ns(c=>o.has(c)?iB(c,r,n,e):(c.data=Bp(c,c.parent,n).resolve,ce(void 0))),St(()=>a++),xa(1),yt(c=>a===s.size?ce(t):Jt))})}function EA(n){let e=n.children.map(t=>EA(t)).flat();return[n,...e]}function iB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!pA(i)&&(o[Pl]=i.title),oB(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=Bp(n,n.parent,t).resolve,null)))}function oB(n,e,t,r){let i=kw(n);if(i.length===0)return ce({});let o={};return Fe(i).pipe(yt(s=>sB(n[s],e,t,r).pipe(Pn(),St(a=>{if(a instanceof Ml)throw $p(new fc,a);o[s]=a}))),xa(1),fy(o),Gi(s=>vA(s)?Jt:Sa(s)))}function sB(n,e,t,r){let i=Ol(e)??r,o=yc(n,i),s=o.resolve?o.resolve(e,t):Rr(i,()=>o(e,t));return ho(s)}function Nw(n){return ct(e=>{let t=n(e);return t?Fe(t).pipe(te(()=>e)):ce(e)})}var IA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===me);return r}getResolvedTitleForRoute(t){return t.data[Pl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(aB),providedIn:"root"})}}return n})(),aB=(()=>{class n extends IA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)($(fS))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ll=new X("",{providedIn:"root",factory:()=>({})}),cB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[OT],decls:1,vars:0,template:function(r,i){r&1&&Re(0,"router-outlet")},dependencies:[s_],encapsulation:2})}}return n})();function a_(n){let e=n.children&&n.children.map(a_),t=e?Ee(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==me&&(t.component=cB),t}var qp=new X(""),c_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=z(dp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ce(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ho(t.loadComponent()).pipe(te(CA),St(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Uu(()=>{this.componentLoaders.delete(t)})),i=new Ia(r,()=>new et).pipe(Ea());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=uB(r,this.compiler,t,this.onLoadEndListener).pipe(Uu(()=>{this.childrenLoaders.delete(r)})),s=new Ia(o,()=>new et).pipe(Ea());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uB(n,e,t,r){return ho(n.loadChildren()).pipe(te(CA),yt(i=>i instanceof Yu||Array.isArray(i)?ce(i):Fe(e.compileModuleAsync(i))),te(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(qp,[],{optional:!0,self:!0}).flat()),{routes:s.map(a_),injector:o}}))}function lB(n){return n&&typeof n=="object"&&"default"in n}function CA(n){return lB(n)?n.default:n}var u_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(dB),providedIn:"root"})}}return n})(),dB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DA=new X(""),TA=new X("");function hB(n,e,t){let r=n.get(TA),i=n.get(pn);return n.get(Me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),fB(n))),{onViewTransitionCreated:c}=r;return c&&Rr(n,()=>c({transition:a,from:e,to:t})),s})}function fB(n){return new Promise(e=>{Xv({read:()=>setTimeout(e)},{injector:n})})}var pB=new X(""),l_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=z(c_),this.environmentInjector=z(Cn),this.urlSerializer=z(kl),this.rootContexts=z(Fl),this.location=z(ec),this.inputBindingEnabled=z(Gp,{optional:!0})!==null,this.titleStrategy=z(IA),this.options=z(Ll,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=z(u_),this.createViewTransition=z(DA,{optional:!0}),this.navigationErrorHandler=z(pB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let t=i=>this.events.next(new $w(i)),r=i=>this.events.next(new Hw(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(o=>o.id!==0),te(o=>Ee(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ct(o=>{let s=!1,a=!1;return ce(o).pipe(ct(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",An.SupersededByNewNavigation),Jt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&g!=="reload"){let p="";return this.events.next(new uo(c.id,this.urlSerializer.serialize(c.rawUrl),p,Op.IgnoredSameUrlNavigation)),c.resolve(!1),Jt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ce(c).pipe(ct(p=>{let w=this.transitions?.getValue();return this.events.next(new pc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),w!==this.transitions?.getValue()?Jt:Promise.resolve(p)}),nB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),St(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let w=new Fp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:w,source:b,restoredState:M,extras:P}=c,R=new pc(p,this.urlSerializer.serialize(w),b,M);this.events.next(R);let U=hA(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(L({},c),{targetSnapshot:U,urlAfterRedirects:w,extras:Ee(L({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,ce(o)}else{let p="";return this.events.next(new uo(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Op.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Jt}}),St(c=>{let d=new Lw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),te(c=>(this.currentTransition=o=Ee(L({},c),{guards:Ej(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Pj(this.environmentInjector,c=>this.events.next(c)),St(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw $p(this.urlSerializer,c.guardsResult);let d=new jw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),$t(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",An.GuardRejected),!1)),Nw(c=>{if(c.guards.canActivateChecks.length)return ce(c).pipe(St(d=>{let g=new Bw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),ct(d=>{let g=!1;return ce(d).pipe(rB(this.paramsInheritanceStrategy,this.environmentInjector),St({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",An.NoDataFromResolver)}}))}),St(d=>{let g=new Uw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),Nw(c=>{let d=g=>{let p=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(g.routeConfig).pipe(St(w=>{g.component=w}),te(()=>{})));for(let w of g.children)p.push(...d(w));return p};return Bu(d(c.targetSnapshot.root)).pipe(Wi(null),ei(1))}),Nw(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:c,targetSnapshot:d}=o,g=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return g?Fe(g).pipe(te(()=>o)):ce(o)}),te(c=>{let d=yj(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ee(L({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),St(()=>{this.events.next(new Al)}),bj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ei(1),St({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),yy(this.transitionAbortSubject.pipe(St(c=>{throw c}))),Uu(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",An.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gi(c=>{if(a=!0,yA(c))this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),_j(c)?this.events.next(new gc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Sl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let g=Rr(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(g instanceof Ml){let{message:p,cancellationCode:w}=$p(this.urlSerializer,g);this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),p,w)),this.events.next(new gc(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(d);let p=t.errorHandler(c);o.resolve(!!p)}}catch(g){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(g)}}return Jt}))}))}cancelNavigationTransition(t,r,i){let o=new hi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gB(n){return n!==Cl}var mB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(yB),providedIn:"root"})}}return n})(),i_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},yB=(()=>{class n extends i_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=tl(n)))(i||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>z(vB),providedIn:"root"})}}return n})(),vB=(()=>{class n extends SA{constructor(){super(...arguments),this.location=z(ec),this.urlSerializer=z(kl),this.options=z(Ll,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=z(u_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof pc)this.stateMemento=this.createStateMemento();else if(t instanceof uo)this.rawUrlTree=r.initialUrl;else if(t instanceof Fp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Al?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof hi&&(t.code===An.GuardRejected||t.code===An.NoDataFromResolver)?this.restoreHistory(r):t instanceof Sl?this.restoreHistory(r,!0):t instanceof kr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof fi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=tl(n)))(i||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),El=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(El||{});function AA(n,e){n.events.pipe($t(t=>t instanceof kr||t instanceof hi||t instanceof Sl||t instanceof uo),te(t=>t instanceof kr||t instanceof uo?El.COMPLETE:(t instanceof hi?t.code===An.Redirect||t.code===An.SupersededByNewNavigation:!1)?El.REDIRECTING:El.FAILED),$t(t=>t!==El.REDIRECTING),ei(1)).subscribe(()=>{e()})}function wB(n){throw n}var _B={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=z(ap),this.stateManager=z(SA),this.options=z(Ll,{optional:!0})||{},this.pendingTasks=z(Xa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=z(l_),this.urlSerializer=z(kl),this.location=z(ec),this.urlHandlingStrategy=z(u_),this._events=new et,this.errorHandler=this.options.errorHandler||wB,this.navigated=!1,this.routeReuseStrategy=z(mB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=z(qp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!z(Gp,{optional:!0}),this.eventsSubscription=new at,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof hi&&r.code!==An.Redirect&&r.code!==An.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kr)this.navigated=!0;else if(r instanceof gc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gB(i.source)},s);this.scheduleNavigation(a,Cl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(a_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:s,g=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":g=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let p;try{let w=i?i.snapshot:this.routerState.snapshot.root;p=cA(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return uA(p,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ds(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cl,null,r)}navigate(t,r={skipLocationChange:!1}){return EB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},_B):r===!1?i=L({},bB):i=r,Ds(t))return $S(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $S(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((p,w)=>{a=p,c=w});let g=this.pendingTasks.add();return AA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new oe(4008,!1)}function IB(n){return!(n instanceof Al)&&!(n instanceof gc)}var xA=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new et,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof kr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ds(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:zD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ds(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(he(lo),he(Ts),kv("tabindex"),he(ms),he(ro),he(di))}}static{this.\u0275dir=hn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&He("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ip("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ws],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ws],replaceUrl:[2,"replaceUrl","replaceUrl",ws],routerLink:"routerLink"},standalone:!0,features:[Jv,ps]})}}return n})();var zp=class{};var CB=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof kr),ns(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=rp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Fe(i).pipe(zi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ce(null);let o=i.pipe(yt(s=>s===null?ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Fe([o,s]).pipe(zi())}else return o})}static{this.\u0275fac=function(r){return new(r||n)($(lo),$(dp),$(Cn),$(zp),$(c_))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),MA=new X(""),DB=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof uo&&t.code===Op.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vp&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){iT()}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function TB(n){return n.routerState.root}function jl(n,e){return{\u0275kind:n,\u0275providers:e}}function SB(){let n=z(Dn);return e=>{let t=n.get(ao);if(e!==t.components[0])return;let r=n.get(lo),i=n.get(RA);n.get(d_)===1&&r.initialNavigation(),n.get(NA,null,_e.Optional)?.setUpPreloading(),n.get(MA,null,_e.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var RA=new X("",{factory:()=>new et}),d_=new X("",{providedIn:"root",factory:()=>1});function AB(){return jl(2,[{provide:d_,useValue:0},{provide:lp,multi:!0,deps:[Dn],useFactory:e=>{let t=e.get(JT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(lo),o=e.get(RA);AA(i,()=>{r(!0)}),e.get(l_).afterPreactivation=()=>(r(!0),o.closed?ce(void 0):o),i.initialNavigation()}))}}])}function xB(){return jl(3,[{provide:lp,multi:!0,useFactory:()=>{let e=z(lo);return()=>{e.setUpLocationChangeListener()}}},{provide:d_,useValue:2}])}var NA=new X("");function MB(n){return jl(0,[{provide:NA,useExisting:CB},{provide:zp,useExisting:n}])}function RB(){return jl(8,[GS,{provide:Gp,useExisting:GS}])}function NB(n){let e=[{provide:DA,useValue:hB},{provide:TA,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return jl(9,e)}var YS=new X("ROUTER_FORROOT_GUARD"),PB=[ec,{provide:kl,useClass:fc},lo,Fl,{provide:Ts,useFactory:TB,deps:[lo]},c_,[]],h_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[PB,[],{provide:qp,multi:!0,useValue:t},{provide:YS,useFactory:VB,deps:[[lo,new Za,new _v]]},{provide:Ll,useValue:r||{}},r?.useHash?OB():FB(),kB(),r?.preloadingStrategy?MB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?LB(r):[],r?.bindToComponentInputs?RB().\u0275providers:[],r?.enableViewTransitions?NB().\u0275providers:[],jB()]}}static forChild(t){return{ngModule:n,providers:[{provide:qp,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)($(YS,8))}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({})}}return n})();function kB(){return{provide:MA,useFactory:()=>{let n=z(rS),e=z(Me),t=z(Ll),r=z(l_),i=z(kl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DB(i,r,n,e,t)}}}function OB(){return{provide:di,useClass:eS}}function FB(){return{provide:di,useClass:hw}}function VB(n){return"guarded"}function LB(n){return[n.initialNavigation==="disabled"?xB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?AB().\u0275providers:[]]}var ZS=new X("");function jB(){return[{provide:ZS,useFactory:SB},{provide:nw,multi:!0,useExisting:ZS}]}var Kp=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="https://images.unsplash.com/photo-1557040135-9dc2a6b60411?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var kE=Zo(fo());var HB=new Map,qB={activated:!1,tokenObservers:[]},zB={initialized:!1,enabled:!1};function ur(n){return HB.get(n)||Object.assign({},qB)}function VA(){return zB}var GB="https://content-firebaseappcheck.googleapis.com/v1";var WB="exchangeDebugToken",PA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$8=24*60*60*1e3;var g_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return V(this,null,function*(){this.stop();try{this.pending=new Hm,this.pending.promise.catch(t=>{}),yield KB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function KB(n){return new Promise(e=>{setTimeout(e,n)})}var QB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},po=new eI("appCheck","AppCheck",QB);function LA(n){if(!ur(n).activated)throw po.create("use-before-activation",{appName:n.name})}function jA(r,i){return V(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let b=yield s.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(b){throw po.create("fetch-network-error",{originalErrorMessage:b?.message})}if(c.status!==200)throw po.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(b){throw po.create("fetch-parse-error",{originalErrorMessage:b?.message})}let g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw po.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let p=Number(g[1])*1e3,w=Date.now();return{token:d.token,expireTimeMillis:w+p,issuedAtTimeMillis:w}})}function BA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${GB}/projects/${t}/apps/${r}:${WB}?key=${i}`,body:{debug_token:e}}}var YB="firebase-app-check-database",ZB=1,m_="firebase-app-check-store";var Qp=null;function JB(){return Qp||(Qp=new Promise((n,e)=>{try{let t=indexedDB.open(YB,ZB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(po.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(m_,{keyPath:"compositeKey"})}}}catch(t){e(po.create("storage-open",{originalErrorMessage:t?.message}))}}),Qp)}function XB(n,e){return eU(tU(n),e)}function eU(n,e){return V(this,null,function*(){let r=(yield JB()).transaction(m_,"readwrite"),o=r.objectStore(m_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var d;a(po.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function tU(n){return`${n.options.appId}-${n.name}`}var y_=new Ih("@firebase/app-check");function p_(n,e){return Eh()?XB(n,e).catch(t=>{y_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UA(){return VA().enabled}function $A(){return V(this,null,function*(){let n=VA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var nU={error:"UNKNOWN_ERROR"};function rU(n){return ZE.encodeString(JSON.stringify(n),!1)}function v_(n,e=!1){return V(this,null,function*(){let t=n.app;LA(t);let r=ur(t),i=r.token,o;if(i&&!Bl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Bl(c)?i=c:yield p_(t,void 0))}if(!e&&i&&Bl(i))return{token:i.token};let s=!1;if(UA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jA(BA(t,yield $A()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield p_(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield ur(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?y_.warn(c.message):y_.error(c),o=c}let a;return i?o?Bl(i)?a={token:i.token,internalError:o}:a=OA(o):(a={token:i.token},r.token=i,yield p_(t,i)):a=OA(o),s&&aU(t,a),a})}function iU(n){return V(this,null,function*(){let e=n.app;LA(e);let{provider:t}=ur(e);if(UA()){let r=yield $A(),{token:i}=yield jA(BA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function oU(n,e,t,r){let{app:i}=n,o=ur(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Bl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),kA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>kA(n))}function HA(n,e){let t=ur(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kA(n){let{app:e}=n,t=ur(e),r=t.tokenRefresher;r||(r=sU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sU(n){let{app:e}=n;return new g_(()=>V(this,null,function*(){let t=ur(e),r;if(t.token?r=yield v_(n,!0):r=yield v_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ur(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PA.RETRIAL_MIN_WAIT,PA.RETRIAL_MAX_WAIT)}function aU(n,e){let t=ur(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Bl(n){return n.expireTimeMillis-Date.now()>0}function OA(n){return{token:rU(nU),error:n}}var w_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ur(this.app);for(let t of e)HA(this.app,t.next);return Promise.resolve()}};function cU(n,e){return new w_(n,e)}function uU(n){return{getToken:e=>v_(n,e),getLimitedUseToken:()=>iU(n),addTokenListener:e=>oU(n,"INTERNAL",e),removeTokenListener:e=>HA(n.app,e)}}var lU="@firebase/app-check",dU="0.8.8";var hU="app-check",FA="app-check-internal";function fU(){Pu(new Jo(hU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return cU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FA).initialize()})),Pu(new Jo(FA,n=>{let e=n.getProvider("app-check").getImmediate();return uU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qi(lU,dU)}fU();var pU=["localhost","0.0.0.0","127.0.0.1"],eW=typeof window<"u"&&pU.includes(window.location.hostname);var __=new X("angularfire2.auth.use-emulator"),b_=new X("angularfire2.auth.settings"),E_=new X("angularfire2.auth.tenant-id"),I_=new X("angularfire2.auth.langugage-code"),C_=new X("angularfire2.auth.use-device-language"),D_=new X("angularfire.auth.persistence"),T_=(n,e,t,r,i,o,s,a)=>Sp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[d,g]of Object.entries(s))c.settings[d]=g;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),zA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,d,g,p,w,b){let M=new et,P=ce(void 0).pipe(Nn(s.outsideAngular),ct(()=>o.runOutsideAngular(()=>import("./chunk-DBHATUGW.js"))),te(()=>wl(t,o,r)),te(R=>T_(R,o,a,d,g,p,c,w)),tf({bufferSize:1,refCount:!1}));if(_s(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ce(null);else{P.pipe(Pn()).subscribe();let R=P.pipe(ct(H=>H.getRedirectResult().then(ne=>ne,()=>null)),vn,tf({bufferSize:1,refCount:!1})),U=P.pipe(ct(H=>new Ie(ne=>({unsubscribe:o.runOutsideAngular(()=>H.onAuthStateChanged(ae=>ne.next(ae),ae=>ne.error(ae),()=>ne.complete()))})))),Y=P.pipe(ct(H=>new Ie(ne=>({unsubscribe:o.runOutsideAngular(()=>H.onIdTokenChanged(ae=>ne.next(ae),ae=>ne.error(ae),()=>ne.complete()))}))));this.authState=R.pipe(nf(U),nr(s.outsideAngular),Nn(s.insideAngular)),this.user=R.pipe(nf(Y),nr(s.outsideAngular),Nn(s.insideAngular)),this.idToken=this.user.pipe(ct(H=>H?Fe(H.getIdToken()):ce(null))),this.idTokenResult=this.user.pipe(ct(H=>H?Fe(H.getIdTokenResult()):ce(null))),this.credential=hy(R,M,this.authState.pipe($t(H=>!H))).pipe(te(H=>H?.user?H:null),nr(s.outsideAngular),Nn(s.insideAngular))}return jS(this,P,o,{spy:{apply:(R,U,Y)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&Y.then(H=>M.next(H))}}})}static \u0275fac=function(r){return new(r||n)($(oc),$(sc,8),$(fn),$(Me),$(Dp),$(__,8),$(b_,8),$(E_,8),$(I_,8),$(C_,8),$(D_,8),$(Es,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WA={};var go,S_;(function(){var n;function e(D,E){function I(){}I.prototype=E.prototype,D.D=E.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(S,A,T){for(var C=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)C[Gn-2]=arguments[Gn];return E.prototype[A].apply(S,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,E,I){I||(I=0);var S=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)S[A]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(A=0;16>A;++A)S[A]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=D.g[0],I=D.g[1],A=D.g[2];var T=D.g[3],C=E+(T^I&(A^T))+S[0]+3614090360&4294967295;E=I+(C<<7&4294967295|C>>>25),C=T+(A^E&(I^A))+S[1]+3905402710&4294967295,T=E+(C<<12&4294967295|C>>>20),C=A+(I^T&(E^I))+S[2]+606105819&4294967295,A=T+(C<<17&4294967295|C>>>15),C=I+(E^A&(T^E))+S[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(T^I&(A^T))+S[4]+4118548399&4294967295,E=I+(C<<7&4294967295|C>>>25),C=T+(A^E&(I^A))+S[5]+1200080426&4294967295,T=E+(C<<12&4294967295|C>>>20),C=A+(I^T&(E^I))+S[6]+2821735955&4294967295,A=T+(C<<17&4294967295|C>>>15),C=I+(E^A&(T^E))+S[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(T^I&(A^T))+S[8]+1770035416&4294967295,E=I+(C<<7&4294967295|C>>>25),C=T+(A^E&(I^A))+S[9]+2336552879&4294967295,T=E+(C<<12&4294967295|C>>>20),C=A+(I^T&(E^I))+S[10]+4294925233&4294967295,A=T+(C<<17&4294967295|C>>>15),C=I+(E^A&(T^E))+S[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(T^I&(A^T))+S[12]+1804603682&4294967295,E=I+(C<<7&4294967295|C>>>25),C=T+(A^E&(I^A))+S[13]+4254626195&4294967295,T=E+(C<<12&4294967295|C>>>20),C=A+(I^T&(E^I))+S[14]+2792965006&4294967295,A=T+(C<<17&4294967295|C>>>15),C=I+(E^A&(T^E))+S[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(A^T&(I^A))+S[1]+4129170786&4294967295,E=I+(C<<5&4294967295|C>>>27),C=T+(I^A&(E^I))+S[6]+3225465664&4294967295,T=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(T^E))+S[11]+643717713&4294967295,A=T+(C<<14&4294967295|C>>>18),C=I+(T^E&(A^T))+S[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^T&(I^A))+S[5]+3593408605&4294967295,E=I+(C<<5&4294967295|C>>>27),C=T+(I^A&(E^I))+S[10]+38016083&4294967295,T=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(T^E))+S[15]+3634488961&4294967295,A=T+(C<<14&4294967295|C>>>18),C=I+(T^E&(A^T))+S[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^T&(I^A))+S[9]+568446438&4294967295,E=I+(C<<5&4294967295|C>>>27),C=T+(I^A&(E^I))+S[14]+3275163606&4294967295,T=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(T^E))+S[3]+4107603335&4294967295,A=T+(C<<14&4294967295|C>>>18),C=I+(T^E&(A^T))+S[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^T&(I^A))+S[13]+2850285829&4294967295,E=I+(C<<5&4294967295|C>>>27),C=T+(I^A&(E^I))+S[2]+4243563512&4294967295,T=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(T^E))+S[7]+1735328473&4294967295,A=T+(C<<14&4294967295|C>>>18),C=I+(T^E&(A^T))+S[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(I^A^T)+S[5]+4294588738&4294967295,E=I+(C<<4&4294967295|C>>>28),C=T+(E^I^A)+S[8]+2272392833&4294967295,T=E+(C<<11&4294967295|C>>>21),C=A+(T^E^I)+S[11]+1839030562&4294967295,A=T+(C<<16&4294967295|C>>>16),C=I+(A^T^E)+S[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^T)+S[1]+2763975236&4294967295,E=I+(C<<4&4294967295|C>>>28),C=T+(E^I^A)+S[4]+1272893353&4294967295,T=E+(C<<11&4294967295|C>>>21),C=A+(T^E^I)+S[7]+4139469664&4294967295,A=T+(C<<16&4294967295|C>>>16),C=I+(A^T^E)+S[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^T)+S[13]+681279174&4294967295,E=I+(C<<4&4294967295|C>>>28),C=T+(E^I^A)+S[0]+3936430074&4294967295,T=E+(C<<11&4294967295|C>>>21),C=A+(T^E^I)+S[3]+3572445317&4294967295,A=T+(C<<16&4294967295|C>>>16),C=I+(A^T^E)+S[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^T)+S[9]+3654602809&4294967295,E=I+(C<<4&4294967295|C>>>28),C=T+(E^I^A)+S[12]+3873151461&4294967295,T=E+(C<<11&4294967295|C>>>21),C=A+(T^E^I)+S[15]+530742520&4294967295,A=T+(C<<16&4294967295|C>>>16),C=I+(A^T^E)+S[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(A^(I|~T))+S[0]+4096336452&4294967295,E=I+(C<<6&4294967295|C>>>26),C=T+(I^(E|~A))+S[7]+1126891415&4294967295,T=E+(C<<10&4294967295|C>>>22),C=A+(E^(T|~I))+S[14]+2878612391&4294967295,A=T+(C<<15&4294967295|C>>>17),C=I+(T^(A|~E))+S[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~T))+S[12]+1700485571&4294967295,E=I+(C<<6&4294967295|C>>>26),C=T+(I^(E|~A))+S[3]+2399980690&4294967295,T=E+(C<<10&4294967295|C>>>22),C=A+(E^(T|~I))+S[10]+4293915773&4294967295,A=T+(C<<15&4294967295|C>>>17),C=I+(T^(A|~E))+S[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~T))+S[8]+1873313359&4294967295,E=I+(C<<6&4294967295|C>>>26),C=T+(I^(E|~A))+S[15]+4264355552&4294967295,T=E+(C<<10&4294967295|C>>>22),C=A+(E^(T|~I))+S[6]+2734768916&4294967295,A=T+(C<<15&4294967295|C>>>17),C=I+(T^(A|~E))+S[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~T))+S[4]+4149444226&4294967295,E=I+(C<<6&4294967295|C>>>26),C=T+(I^(E|~A))+S[11]+3174756917&4294967295,T=E+(C<<10&4294967295|C>>>22),C=A+(E^(T|~I))+S[2]+718787259&4294967295,A=T+(C<<15&4294967295|C>>>17),C=I+(T^(A|~E))+S[9]+3951481745&4294967295,D.g[0]=D.g[0]+E&4294967295,D.g[1]=D.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,E){E===void 0&&(E=D.length);for(var I=E-this.blockSize,S=this.B,A=this.h,T=0;T<E;){if(A==0)for(;T<=I;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<E;)if(S[A++]=D.charCodeAt(T++),A==this.blockSize){i(this,S),A=0;break}}else for(;T<E;)if(S[A++]=D[T++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var E=1;E<D.length-8;++E)D[E]=0;var I=8*this.o;for(E=D.length-8;E<D.length;++E)D[E]=I&255,I/=256;for(this.u(D),D=Array(16),E=I=0;4>E;++E)for(var S=0;32>S;S+=8)D[I++]=this.g[E]>>>S&255;return D};function o(D,E){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=E(D)}function s(D,E){this.h=E;for(var I=[],S=!0,A=D.length-1;0<=A;A--){var T=D[A]|0;S&&T==E||(I[A]=T,S=!1)}this.g=I}var a={};function c(D){return-128<=D&&128>D?o(D,function(E){return new s([E|0],0>E?-1:0)}):new s([D|0],0>D?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(d(-D));for(var E=[],I=1,S=0;D>=I;S++)E[S]=D/I|0,I*=4294967296;return new s(E,0)}function g(D,E){if(D.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D.charAt(0)=="-")return R(g(D.substring(1),E));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(E,8)),S=p,A=0;A<D.length;A+=8){var T=Math.min(8,D.length-A),C=parseInt(D.substring(A,A+T),E);8>T?(T=d(Math.pow(E,T)),S=S.j(T).add(d(C))):(S=S.j(I),S=S.add(d(C)))}return S}var p=c(0),w=c(1),b=c(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var D=0,E=1,I=0;I<this.g.length;I++){var S=this.i(I);D+=(0<=S?S:4294967296+S)*E,E*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var E=d(Math.pow(D,6)),I=this,S="";;){var A=ne(I,E).g;I=U(I,A.j(E));var T=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=A,M(I))return T+S;for(;6>T.length;)T="0"+T;S=T+S}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var E=0;E<D.g.length;E++)if(D.g[E]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=U(this,D),P(D)?-1:M(D)?0:1};function R(D){for(var E=D.g.length,I=[],S=0;S<E;S++)I[S]=~D.g[S];return new s(I,~D.h).add(w)}n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],S=0,A=0;A<=E;A++){var T=S+(this.i(A)&65535)+(D.i(A)&65535),C=(T>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);S=C>>>16,T&=65535,C&=65535,I[A]=C<<16|T}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(D,E){return D.add(R(E))}n.j=function(D){if(M(this)||M(D))return p;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(b)&&0>D.l(b))return d(this.m()*D.m());for(var E=this.g.length+D.g.length,I=[],S=0;S<2*E;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<D.g.length;A++){var T=this.i(S)>>>16,C=this.i(S)&65535,Gn=D.i(A)>>>16,Ci=D.i(A)&65535;I[2*S+2*A]+=C*Ci,Y(I,2*S+2*A),I[2*S+2*A+1]+=T*Ci,Y(I,2*S+2*A+1),I[2*S+2*A+1]+=C*Gn,Y(I,2*S+2*A+1),I[2*S+2*A+2]+=T*Gn,Y(I,2*S+2*A+2)}for(S=0;S<E;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=E;S<2*E;S++)I[S]=0;return new s(I,0)};function Y(D,E){for(;(D[E]&65535)!=D[E];)D[E+1]+=D[E]>>>16,D[E]&=65535,E++}function H(D,E){this.g=D,this.h=E}function ne(D,E){if(M(E))throw Error("division by zero");if(M(D))return new H(p,p);if(P(D))return E=ne(R(D),E),new H(R(E.g),R(E.h));if(P(E))return E=ne(D,R(E)),new H(R(E.g),E.h);if(30<D.g.length){if(P(D)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var I=w,S=E;0>=S.l(D);)I=ae(I),S=ae(S);var A=ie(I,1),T=ie(S,1);for(S=ie(S,2),I=ie(I,2);!M(S);){var C=T.add(S);0>=C.l(D)&&(A=A.add(I),T=C),S=ie(S,1),I=ie(I,1)}return E=U(D,A.j(E)),new H(A,E)}for(A=p;0<=D.l(E);){for(I=Math.max(1,Math.floor(D.m()/E.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),T=d(I),C=T.j(E);P(C)||0<C.l(D);)I-=S,T=d(I),C=T.j(E);M(T)&&(T=w),A=A.add(T),D=U(D,C)}return new H(A,D)}n.A=function(D){return ne(this,D).h},n.and=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],S=0;S<E;S++)I[S]=this.i(S)&D.i(S);return new s(I,this.h&D.h)},n.or=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],S=0;S<E;S++)I[S]=this.i(S)|D.i(S);return new s(I,this.h|D.h)},n.xor=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],S=0;S<E;S++)I[S]=this.i(S)^D.i(S);return new s(I,this.h^D.h)};function ae(D){for(var E=D.g.length+1,I=[],S=0;S<E;S++)I[S]=D.i(S)<<1|D.i(S-1)>>>31;return new s(I,D.h)}function ie(D,E){var I=E>>5;E%=32;for(var S=D.g.length-I,A=[],T=0;T<S;T++)A[T]=0<E?D.i(T+I)>>>E|D.i(T+I+1)<<32-E:D.i(T+I);return new s(A,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,S_=WA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=g,go=WA.Integer=s}).apply(typeof GA<"u"?GA:typeof self<"u"?self:typeof window<"u"?window:{});var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pi={};var A_,mU,vc,x_,Ul,Zp,M_,R_,N_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yp=="object"&&Yp];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var x=u[v];if(!(x in m))break e;m=m[x]}u=u[u.length-1],v=m[u],f=f(v),f!=v&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function o(u,f){u instanceof String&&(u+="");var m=0,v=!1,x={next:function(){if(!v&&m<u.length){var O=m++;return{value:f(O,u[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return o(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function g(u,f,m){return u.call.apply(u.bind,arguments)}function p(u,f,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,v),u.apply(f,x)}}return function(){return u.apply(f,arguments)}}function w(u,f,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:p,w.apply(null,arguments)}function b(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function M(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,x,O){for(var q=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)q[Se-2]=arguments[Se];return f.prototype[x].apply(v,q)}}function P(u){let f=u.length;if(0<f){let m=Array(f);for(let v=0;v<f;v++)m[v]=u[v];return m}return[]}function R(u,f){for(let m=1;m<arguments.length;m++){let v=arguments[m];if(c(v)){let x=u.length||0,O=v.length||0;u.length=x+O;for(let q=0;q<O;q++)u[x+q]=v[q]}else u.push(v)}}class U{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Y(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var ae=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ie(u,f,m){for(let v in u)f.call(m,u[v],v,u)}function D(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function E(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,f){let m,v;for(let x=1;x<arguments.length;x++){v=arguments[x];for(m in v)u[m]=v[m];for(let O=0;O<I.length;O++)m=I[O],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function A(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function T(u){a.setTimeout(()=>{throw u},0)}function C(){var u=Ti;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Gn{constructor(){this.h=this.g=null}add(f,m){let v=Ci.get();v.set(f,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Ci=new U(()=>new uu,u=>u.reset());class uu{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Di,Gr=!1,Ti=new Gn,bn=()=>{let u=a.Promise.resolve(void 0);Di=()=>{u.then(Si)}};var Si=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){T(m)}var f=Ci;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Gr=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Ai=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Wn(u,f){if(Rt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ae){e:{try{ne(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Nd[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Wn.aa.h.call(this)}}M(Wn,Rt);var Nd={2:"touch",3:"pen",4:"mouse"};Wn.prototype.h=function(){Wn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var gr="closure_listenable_"+(1e6*Math.random()|0),lu=0;function Em(u,f,m,v,x){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!v,this.ha=x,this.key=++lu,this.da=this.fa=!1}function xi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Mi(u){this.src=u,this.g={},this.h=0}Mi.prototype.add=function(u,f,m,v,x){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var q=du(u,f,v,x);return-1<q?(f=u[q],m||(f.fa=!1)):(f=new Em(f,this.src,O,!!v,x),f.fa=m,u.push(f)),f};function Ri(u,f){var m=f.type;if(m in u.g){var v=u.g[m],x=Array.prototype.indexOf.call(v,f,void 0),O;(O=0<=x)&&Array.prototype.splice.call(v,x,1),O&&(xi(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function du(u,f,m,v){for(var x=0;x<u.length;++x){var O=u[x];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==v)return x}return-1}var jt="closure_lm_"+(1e6*Math.random()|0),En={};function Pd(u,f,m,v,x){if(v&&v.once)return hu(u,f,m,v,x);if(Array.isArray(f)){for(var O=0;O<f.length;O++)Pd(u,f[O],m,v,x);return null}return m=gt(m),u&&u[gr]?u.K(f,m,d(v)?!!v.capture:!!v,x):Gt(u,f,m,!1,v,x)}function Gt(u,f,m,v,x,O){if(!f)throw Error("Invalid event type");var q=d(x)?!!x.capture:!!x,Se=Kn(u);if(Se||(u[jt]=Se=new Mi(u)),m=Se.add(f,m,v,q,O),m.proxy)return m;if(v=ea(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)Ai||(x=q),x===void 0&&(x=!1),u.addEventListener(f.toString(),v,x);else if(u.attachEvent)u.attachEvent(Yt(f.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ea(){function u(m){return f.call(u.src,u.listener,m)}let f=mr;return u}function hu(u,f,m,v,x){if(Array.isArray(f)){for(var O=0;O<f.length;O++)hu(u,f[O],m,v,x);return null}return m=gt(m),u&&u[gr]?u.L(f,m,d(v)?!!v.capture:!!v,x):Gt(u,f,m,!0,v,x)}function fu(u,f,m,v,x){if(Array.isArray(f))for(var O=0;O<f.length;O++)fu(u,f[O],m,v,x);else v=d(v)?!!v.capture:!!v,m=gt(m),u&&u[gr]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],m=du(O,m,v,x),-1<m&&(xi(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=Kn(u))&&(f=u.g[f.toString()],u=-1,f&&(u=du(f,m,v,x)),(m=-1<u?f[u]:null)&&be(m))}function be(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[gr])Ri(f.i,u);else{var m=u.type,v=u.proxy;f.removeEventListener?f.removeEventListener(m,v,u.capture):f.detachEvent?f.detachEvent(Yt(m),v):f.addListener&&f.removeListener&&f.removeListener(v),(m=Kn(f))?(Ri(m,u),m.h==0&&(m.src=null,f[jt]=null)):xi(u)}}}function Yt(u){return u in En?En[u]:En[u]="on"+u}function mr(u,f){if(u.da)u=!0;else{f=new Wn(f,this);var m=u.listener,v=u.ha||u.src;u.fa&&be(u),u=m.call(v,f)}return u}function Kn(u){return u=u[jt],u instanceof Mi?u:null}var st="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(u){return typeof u=="function"?u:(u[st]||(u[st]=function(f){return u.handleEvent(f)}),u[st])}function mt(){zt.call(this),this.i=new Mi(this),this.M=this,this.F=null}M(mt,zt),mt.prototype[gr]=!0,mt.prototype.removeEventListener=function(u,f,m,v){fu(this,u,f,m,v)};function Nt(u,f){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=f.type||f,typeof f=="string")f=new Rt(f,u);else if(f instanceof Rt)f.target=f.target||u;else{var x=f;f=new Rt(v,u),S(f,x)}if(x=!0,m)for(var O=m.length-1;0<=O;O--){var q=f.g=m[O];x=yr(q,v,!0,f)&&x}if(q=f.g=u,x=yr(q,v,!0,f)&&x,x=yr(q,v,!1,f)&&x,m)for(O=0;O<m.length;O++)q=f.g=m[O],x=yr(q,v,!1,f)&&x}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],v=0;v<m.length;v++)xi(m[v]);delete u.g[f],u.h--}}this.F=null},mt.prototype.K=function(u,f,m,v){return this.i.add(String(u),f,!1,m,v)},mt.prototype.L=function(u,f,m,v){return this.i.add(String(u),f,!0,m,v)};function yr(u,f,m,v){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,O=0;O<f.length;++O){var q=f[O];if(q&&!q.da&&q.capture==m){var Se=q.listener,Ct=q.ha||q.src;q.fa&&Ri(u.i,q),x=Se.call(Ct,v)!==!1&&x}}return x&&!v.defaultPrevented}function Bt(u,f,m){if(typeof u=="function")m&&(u=w(u,m));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function kd(u){u.g=Bt(()=>{u.g=null,u.i&&(u.i=!1,kd(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Od extends zt{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:kd(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(u){zt.call(this),this.h=u,this.g={}}M(Ni,zt);var ta=[];function Fd(u){ie(u.g,function(f,m){this.g.hasOwnProperty(m)&&be(f)},u),u.g={}}Ni.prototype.N=function(){Ni.aa.N.call(this),Fd(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pu=a.JSON.stringify,Im=a.JSON.parse,Cm=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Qn(){}Qn.prototype.h=null;function Vd(u){return u.h||(u.h=u.i())}function Ld(){}var Oo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gu(){Rt.call(this,"d")}M(gu,Rt);function mu(){Rt.call(this,"c")}M(mu,Rt);var Yn={},jd=null;function na(){return jd=jd||new mt}Yn.La="serverreachability";function Bd(u){Rt.call(this,Yn.La,u)}M(Bd,Rt);function Fo(u){let f=na();Nt(f,new Bd(f))}Yn.STAT_EVENT="statevent";function Ud(u,f){Rt.call(this,Yn.STAT_EVENT,u),this.stat=f}M(Ud,Rt);function It(u){let f=na();Nt(f,new Ud(f,u))}Yn.Ma="timingevent";function $d(u,f){Rt.call(this,Yn.Ma,u),this.size=f}M($d,Rt);function Vo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Lo(){this.g=!0}Lo.prototype.xa=function(){this.g=!1};function Dm(u,f,m,v,x,O){u.info(function(){if(u.g)if(O)for(var q="",Se=O.split("&"),Ct=0;Ct<Se.length;Ct++){var Ae=Se[Ct].split("=");if(1<Ae.length){var kt=Ae[0];Ae=Ae[1];var Dt=kt.split("_");q=2<=Dt.length&&Dt[1]=="type"?q+(kt+"="+Ae+"&"):q+(kt+"=redacted&")}}else q=null;else q=O;return"XMLHTTP REQ ("+v+") [attempt "+x+"]: "+f+`
`+m+`
`+q})}function Tm(u,f,m,v,x,O,q){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+x+"]: "+f+`
`+m+`
`+O+" "+q})}function ke(u,f,m,v){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Am(u,m)+(v?" "+v:"")})}function Sm(u,f){u.info(function(){return"TIMEOUT: "+f})}Lo.prototype.info=function(){};function Am(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var x=v[1];if(Array.isArray(x)&&!(1>x.length)){var O=x[0];if(O!="noop"&&O!="stop"&&O!="close")for(var q=1;q<x.length;q++)x[q]=""}}}}return pu(m)}catch{return f}}var ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yu;function ia(){}M(ia,Qn),ia.prototype.g=function(){return new XMLHttpRequest},ia.prototype.i=function(){return{}},yu=new ia;function Rn(u,f,m,v){this.j=u,this.i=f,this.l=m,this.R=v||1,this.U=new Ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var vu={},ki={};function Qe(u,f,m){u.L=1,u.v=Ho(Zn(f)),u.m=m,u.P=!0,qd(u,null)}function qd(u,f){u.F=Date.now(),jo(u),u.A=Zn(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),th(m.i,"t",v),u.C=0,m=u.j.J,u.h=new Pi,u.g=Au(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Od(w(u.Y,u,u.g),u.O)),f=u.U,m=u.g,v=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(ta[0]=x.toString()),x=ta);for(var O=0;O<x.length;O++){var q=Pd(m,x[O],v||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Fo(),Dm(u.i,u.u,u.A,u.l,u.R,u.m)}Rn.prototype.ca=function(u){u=u.target;let f=this.M;f&&er(u)==3?f.j():this.Y(u)},Rn.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=er(this.g);var f=this.g.Ba();let Yr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||ch(this.g)))){this.J||Dt!=4||f==7||(f==8||0>=Yr?Fo(3):Fo(2)),_u(this);var m=this.g.Z();this.X=m;t:if(zd(this)){var v=ch(this.g);u="";var x=v.length,O=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vr(this),Bo(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,u+=this.h.i.decode(v[f],{stream:!(O&&f==x-1)});v.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,Tm(this.i,this.u,this.A,this.l,this.R,Dt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Ct=this.g;if((Se=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Se)){var Ae=Se;break t}}Ae=null}if(m=Ae)ke(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bu(this,m);else{this.o=!1,this.s=3,It(12),vr(this),Bo(this);break e}}if(this.P){m=!0;let un;for(;!this.J&&this.C<q.length;)if(un=xm(this,q),un==ki){Dt==4&&(this.s=4,It(14),m=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(un==vu){this.s=4,It(15),ke(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else ke(this.i,this.l,un,null),bu(this,un);if(zd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||q.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)ke(this.i,this.l,q,"[Invalid Chunked Response]"),vr(this),Bo(this);else if(0<q.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),$i(kt),kt.M=!0,It(11))}}else ke(this.i,this.l,q,null),bu(this,q);Dt==4&&vr(this),this.o&&!this.J&&(Dt==4?fh(this.j,this):(this.o=!1,jo(this)))}else Vm(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),vr(this),Bo(this)}}}catch{}finally{}};function zd(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xm(u,f){var m=u.C,v=f.indexOf(`
`,m);return v==-1?ki:(m=Number(f.substring(m,v)),isNaN(m)?vu:(v+=1,v+m>f.length?ki:(f=f.slice(v,v+m),u.C=v+m,f)))}Rn.prototype.cancel=function(){this.J=!0,vr(this)};function jo(u){u.S=Date.now()+u.I,wu(u,u.I)}function wu(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vo(w(u.ba,u),f)}function _u(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Rn.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Sm(this.i,this.A),this.L!=2&&(Fo(),It(17)),vr(this),this.s=2,Bo(this)):wu(this,this.S-u)};function Bo(u){u.j.G==0||u.J||fh(u.j,u)}function vr(u){_u(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Fd(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function bu(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||sa(m.h,u))){if(!u.K&&sa(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var x=v;if(x[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)pa(m),ha(m);else break e;Tu(m),It(18)}}else m.za=x[1],0<m.za-m.T&&37500>x[2]&&m.F&&m.v==0&&!m.C&&(m.C=Vo(w(m.Za,m),6e3));if(1>=Eu(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else br(m,11)}else if((u.K||m.g==u)&&pa(m),!Y(f))for(x=m.Da.g.parse(f),f=0;f<x.length;f++){let Ae=x[f];if(m.T=Ae[0],Ae=Ae[1],m.G==2)if(Ae[0]=="c"){m.K=Ae[1],m.ia=Ae[2];let kt=Ae[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));let Dt=Ae[4];Dt!=null&&(m.Aa=Dt,m.j.info("SVER="+m.Aa));let Yr=Ae[5];Yr!=null&&typeof Yr=="number"&&0<Yr&&(v=1.5*Yr,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;let un=u.g;if(un){let ma=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var O=v.h;O.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(aa(O,O.h),O.h=null))}if(v.D){let Ru=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(v.ya=Ru,qe(v.I,v.D,Ru))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var q=u;if(v.qa=ga(v,v.J?v.ia:null,v.W),q.K){Iu(v.h,q);var Se=q,Ct=v.L;Ct&&(Se.I=Ct),Se.B&&(_u(Se),jo(Se)),v.g=q}else hh(v);0<m.i.length&&fa(m)}else Ae[0]!="stop"&&Ae[0]!="close"||br(m,7);else m.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?br(m,7):Du(m):Ae[0]!="noop"&&m.l&&m.l.ta(Ae),m.v=0)}}Fo(4)}catch{}}var Gd=class{constructor(u,f){this.g=u,this.map=f}};function Wd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Eu(u){return u.h?1:u.g?u.g.size:0}function sa(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function aa(u,f){u.g?u.g.add(f):u.h=f}function Iu(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Wd.prototype.cancel=function(){if(this.i=Kd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Kd(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return P(u.i)}function Mm(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,v=0;v<m;v++)f.push(u[v]);return f}f=[],m=0;for(v in u)f[m++]=u[v];return f}function ca(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let v in u)f[m++]=v;return f}}}function Uo(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=ca(u),v=Mm(u),x=v.length,O=0;O<x;O++)f.call(void 0,v[O],m&&m[O],u)}var $o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),x=null;if(0<=v){var O=u[m].substring(0,v);x=u[m].substring(v+1)}else O=u[m];f(O,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wr){this.h=u.h,ua(this,u.j),this.o=u.o,this.g=u.g,la(this,u.s),this.l=u.l;var f=u.i,m=new Vi;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Yd(this,m),this.m=u.m}else u&&(f=String(u).match($o))?(this.h=!1,ua(this,f[1]||"",!0),this.o=qo(f[2]||""),this.g=qo(f[3]||"",!0),la(this,f[4]),this.l=qo(f[5]||"",!0),Yd(this,f[6]||"",!0),this.m=qo(f[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Wr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Oi(f,Zd,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Oi(f,Zd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Oi(m,m.charAt(0)=="/"?Jd:Fi,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Oi(m,Cu)),u.join("")};function Zn(u){return new Wr(u)}function ua(u,f,m){u.j=m?qo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function la(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Yd(u,f,m){f instanceof Vi?(u.i=f,Pm(u.i,u.h)):(m||(f=Oi(f,Nm)),u.i=new Vi(f,u.h))}function qe(u,f,m){u.i.set(f,m)}function Ho(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oi(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Rm),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Rm(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zd=/[#\/\?@]/g,Fi=/[#\?:]/g,Jd=/[#\?]/g,Nm=/[#\?@]/g,Cu=/#/g;function Vi(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function wr(u){u.g||(u.g=new Map,u.h=0,u.i&&Qd(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Vi.prototype,n.add=function(u,f){wr(this),this.i=null,u=Li(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Xd(u,f){wr(u),f=Li(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function eh(u,f){return wr(u),f=Li(u,f),u.g.has(f)}n.forEach=function(u,f){wr(this),this.g.forEach(function(m,v){m.forEach(function(x){u.call(f,x,v,this)},this)},this)},n.na=function(){wr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let v=0;v<f.length;v++){let x=u[v];for(let O=0;O<x.length;O++)m.push(f[v])}return m},n.V=function(u){wr(this);let f=[];if(typeof u=="string")eh(this,u)&&(f=f.concat(this.g.get(Li(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return wr(this),this.i=null,u=Li(this,u),eh(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function th(u,f,m){Xd(u,f),0<m.length&&(u.i=null,u.g.set(Li(u,f),P(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var v=f[m];let O=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var x=O;q[v]!==""&&(x+="="+encodeURIComponent(String(q[v]))),u.push(x)}}return this.i=u.join("&")};function Li(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Pm(u,f){f&&!u.j&&(wr(u),u.i=null,u.g.forEach(function(m,v){var x=v.toLowerCase();v!=x&&(Xd(this,v),th(this,x,m))},u)),u.j=f}function ji(u,f){let m=new Lo;if(a.Image){let v=new Image;v.onload=b(Jn,m,"TestLoadImage: loaded",!0,f,v),v.onerror=b(Jn,m,"TestLoadImage: error",!1,f,v),v.onabort=b(Jn,m,"TestLoadImage: abort",!1,f,v),v.ontimeout=b(Jn,m,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else f(!1)}function km(u,f){let m=new Lo,v=new AbortController,x=setTimeout(()=>{v.abort(),Jn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:v.signal}).then(O=>{clearTimeout(x),O.ok?Jn(m,"TestPingServer: ok",!0,f):Jn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),Jn(m,"TestPingServer: error",!1,f)})}function Jn(u,f,m,v,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),v(m)}catch{}}function nh(){this.g=new Cm}function Om(u,f,m){let v=m||"";try{Uo(u,function(x,O){let q=x;d(x)&&(q=pu(x)),f.push(v+O+"="+encodeURIComponent(q))})}catch(x){throw f.push(v+"type="+encodeURIComponent("_badmap")),x}}function zo(u){this.l=u.Ub||null,this.j=u.eb||!1}M(zo,Qn),zo.prototype.g=function(){return new da(this.l,this.j)},zo.prototype.i=function(u){return function(){return u}}({});function da(u,f){mt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(da,mt),n=da.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Wo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rh(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function rh(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Go(this):Wo(this),this.readyState==3&&rh(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Go(this))},n.Qa=function(u){this.g&&(this.response=u,Go(this))},n.ga=function(){this.g&&Go(this)};function Go(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Wo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ih(u){let f="";return ie(u,function(m,v){f+=v,f+=":",f+=m,f+=`\r
`}),f}function _r(u,f,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=ih(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):qe(u,f,m))}function Xe(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Xe,mt);var Fm=/^https?$/i,oh=["POST","PUT"];n=Xe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yu.g(),this.v=this.o?Vd(this.o):Vd(yu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){sh(this,O);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var x in v)m.set(x,v[x]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let O of v.keys())m.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oh,f,void 0))||v||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,q]of m)this.g.setRequestHeader(O,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bi(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){sh(this,O)}};function sh(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Xn(u),Ko(u)}function Xn(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Nt(this,"complete"),Nt(this,"abort"),Ko(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),Xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ah(this):this.bb())},n.bb=function(){ah(this)};function ah(u){if(u.h&&typeof s<"u"&&(!u.v[1]||er(u)!=4||u.Z()!=2)){if(u.u&&er(u)==4)Bt(u.Ea,0,u);else if(Nt(u,"readystatechange"),er(u)==4){u.h=!1;try{let q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var v;if(v=q===0){var x=String(u.D).match($o)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),v=!Fm.test(x?x.toLowerCase():"")}m=v}if(m)Nt(u,"complete"),Nt(u,"success");else{u.m=6;try{var O=2<er(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",Xn(u)}}finally{Ko(u)}}}}function Ko(u,f){if(u.g){Bi(u);let m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Nt(u,"ready");try{m.onreadystatechange=v}catch{}}}function Bi(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function er(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Im(f)}};function ch(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vm(u){let f={};u=(u.g&&2<=er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(Y(u[v]))continue;var m=A(u[v]);let x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let O=f[x]||[];f[x]=O,O.push(m)}D(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Kr(u){this.Aa=0,this.i=[],this.j=new Lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,u),this.cb=Ui("retryDelaySeedMs",1e4,u),this.Wa=Ui("forwardChannelMaxRetries",2,u),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wd(u&&u.concurrentRequestLimit),this.Da=new nh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Kr.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,v){It(0),this.W=u,this.H=f||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=ga(this,null,this.W),fa(this)};function Du(u){if(uh(u),u.G==3){var f=u.U++,m=Zn(u.I);if(qe(m,"SID",u.K),qe(m,"RID",f),qe(m,"TYPE","terminate"),Qo(u,m),f=new Rn(u,u.j,f),f.L=2,f.v=Ho(Zn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Au(f.j,null),f.g.ea(f.v)),f.F=Date.now(),jo(f)}gh(u)}function ha(u){u.g&&($i(u),u.g.cancel(),u.g=null)}function uh(u){ha(u),u.u&&(a.clearTimeout(u.u),u.u=null),pa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fa(u){if(!oa(u.h)&&!u.s){u.s=!0;var f=u.Ga;Di||bn(),Gr||(Di(),Gr=!0),Ti.add(f,u),u.B=0}}function Lm(u,f){return Eu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vo(w(u.Ga,u,f),ph(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let x=new Rn(this,this.j,u),O=this.o;if(this.S&&(O?(O=E(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(x.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=dh(this,x,f),m=Zn(this.I),qe(m,"RID",u),qe(m,"CVER",22),this.D&&qe(m,"X-HTTP-Session-Id",this.D),Qo(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(ih(O)))+"&"+f:this.m&&_r(m,this.m,O)),aa(this.h,x),this.Ua&&qe(m,"TYPE","init"),this.P?(qe(m,"$req",f),qe(m,"SID","null"),x.T=!0,Qe(x,m,null)):Qe(x,m,f),this.G=2}}else this.G==3&&(u?lh(this,u):this.i.length==0||oa(this.h)||lh(this))};function lh(u,f){var m;f?m=f.l:m=u.U++;let v=Zn(u.I);qe(v,"SID",u.K),qe(v,"RID",m),qe(v,"AID",u.T),Qo(u,v),u.m&&u.o&&_r(v,u.m,u.o),m=new Rn(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=dh(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),aa(u.h,m),Qe(m,v,f)}function Qo(u,f){u.H&&ie(u.H,function(m,v){qe(f,v,m)}),u.l&&Uo({},function(m,v){qe(f,v,m)})}function dh(u,f,m){m=Math.min(u.i.length,m);var v=u.l?w(u.l.Na,u.l,u):null;e:{var x=u.i;let O=-1;for(;;){let q=["count="+m];O==-1?0<m?(O=x[0].g,q.push("ofs="+O)):O=0:q.push("ofs="+O);let Se=!0;for(let Ct=0;Ct<m;Ct++){let Ae=x[Ct].g,kt=x[Ct].map;if(Ae-=O,0>Ae)O=Math.max(0,x[Ct].g-100),Se=!1;else try{Om(kt,q,"req"+Ae+"_")}catch{v&&v(kt)}}if(Se){v=q.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,v}function hh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Di||bn(),Gr||(Di(),Gr=!0),Ti.add(f,u),u.v=0}}function Tu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vo(w(u.Fa,u),ph(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vo(w(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),ha(this),Su(this))};function $i(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Su(u){u.g=new Rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Zn(u.qa);qe(f,"RID","rpc"),qe(f,"SID",u.K),qe(f,"AID",u.T),qe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(f,"TO",u.ja),qe(f,"TYPE","xmlhttp"),Qo(u,f),u.m&&u.o&&_r(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ho(Zn(f)),m.m=null,m.P=!0,qd(m,u)}n.Za=function(){this.C!=null&&(this.C=null,ha(this),Tu(this),It(19))};function pa(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fh(u,f){var m=null;if(u.g==f){pa(u),$i(u),u.g=null;var v=2}else if(sa(u.h,f))m=f.D,Iu(u.h,f),v=1;else return;if(u.G!=0){if(f.o)if(v==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var x=u.B;v=na(),Nt(v,new $d(v,m)),fa(u)}else hh(u);else if(x=f.s,x==3||x==0&&0<f.X||!(v==1&&Lm(u,f)||v==2&&Tu(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),x){case 1:br(u,5);break;case 4:br(u,10);break;case 3:br(u,6);break;default:br(u,2)}}}function ph(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function br(u,f){if(u.j.info("Error code "+f),f==2){var m=w(u.fb,u),v=u.Xa;let x=!v;v=new Wr(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ua(v,"https"),Ho(v),x?ji(v.toString(),m):km(v.toString(),m)}else It(2);u.G=0,u.l&&u.l.sa(f),gh(u),uh(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function gh(u){if(u.G=0,u.ka=[],u.l){let f=Kd(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function ga(u,f,m){var v=m instanceof Wr?Zn(m):new Wr(m);if(v.g!="")f&&(v.g=f+"."+v.g),la(v,v.s);else{var x=a.location;v=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var O=new Wr(null);v&&ua(O,v),f&&(O.g=f),x&&la(O,x),m&&(O.l=m),v=O}return m=u.D,f=u.ya,m&&f&&qe(v,m,f),qe(v,"VER",u.la),Qo(u,v),v}function Au(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Xe(new zo({eb:m})):new Xe(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hi(){}Hi.prototype.g=function(u,f){return new Pt(u,f)};function Pt(u,f){mt.call(this),this.g=new Kr(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!Y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Qr(this)}M(Pt,mt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Du(this.g)},Pt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=pu(u),u=m);f.i.push(new Gd(f.Ya++,u)),f.G==3&&fa(f)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Du(this.g),delete this.g,Pt.aa.N.call(this)};function mh(u){gu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}M(mh,gu);function Mu(){mu.call(this),this.status=1}M(Mu,mu);function Qr(u){this.g=u}M(Qr,xu),Qr.prototype.ua=function(){Nt(this.g,"a")},Qr.prototype.ta=function(u){Nt(this.g,new mh(u))},Qr.prototype.sa=function(u){Nt(this.g,new Mu)},Qr.prototype.ra=function(){Nt(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,N_=pi.createWebChannelTransport=function(){return new Hi},R_=pi.getStatEventTarget=function(){return na()},M_=pi.Event=Yn,Zp=pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,Ul=pi.ErrorCode=ra,Hd.COMPLETE="complete",x_=pi.EventType=Hd,Ld.EventType=Oo,Oo.OPEN="a",Oo.CLOSE="b",Oo.ERROR="c",Oo.MESSAGE="d",mt.prototype.listen=mt.prototype.K,vc=pi.WebChannel=Ld,mU=pi.FetchXmlHttpFactory=zo,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,A_=pi.XhrIo=Xe}).apply(typeof Yp<"u"?Yp:typeof self<"u"?self:typeof window<"u"?window:{});var KA="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Qc="10.14.0";var Eo=new Ih("@firebase/firestore");function Ic(){return Eo.logLevel}function Zx(n){Eo.setLogLevel(n)}function B(n,...e){if(Eo.logLevel<=Ir.DEBUG){let t=e.map(V0);Eo.debug(`Firestore (${Qc}): ${n}`,...t)}}function dt(n,...e){if(Eo.logLevel<=Ir.ERROR){let t=e.map(V0);Eo.error(`Firestore (${Qc}): ${n}`,...t)}}function lr(n,...e){if(Eo.logLevel<=Ir.WARN){let t=e.map(V0);Eo.warn(`Firestore (${Qc}): ${n}`,...t)}}function V0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n="Unexpected state"){let e=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: `+n;throw dt(e),new Error(e)}function re(n,e){n||ee()}function Jx(n,e){n||ee()}function K(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends XE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ag=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},L_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},j_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},B_=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){re(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>V(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new ag(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new bt(e)}},U_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new U_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},H_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},q_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){re(this.o===void 0);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(re(typeof t.token=="string"),this.R=t.token,new H_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var cg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=yU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function fe(n,e){return n<e?-1:n>e?1:0}function Nc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Xx(n){return n+"\0"}var it=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ug=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(),r===void 0?r=e.length-t:r>e.length-t&&ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Pe=class n extends ug{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ht=class n extends ug{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new j(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};var Pc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function z_(n){return n.fields.find(e=>e.kind===2)}function As(n){return n.fields.filter(e=>e.kind!==2)}Pc.UNKNOWN_ID=-1;var xc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Xl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,qn.min())}};function eM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new qn(i,Q.empty(),e)}function tM(n){return new qn(n.readTime,n.key,-1)}var qn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),Q.empty(),-1)}static max(){return new n(se.max(),Q.empty(),-1)}};function L0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:fe(n.largestBatchId,e.largestBatchId))}var nM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function No(n){return V(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==nM)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(g=>{s[d]=g,++a,a===o&&r(s)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var dg=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ks(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=j0(r.target.error);this.V.reject(new ks(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ks(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new W_(t)}},Io=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Nu())===12.2&&dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),xs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Eh())return!1;if(n.v())return!0;let e=Nu(),t=n.S(e),r=0<t&&t<10,i=rM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return V(this,null,function*(){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ks(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new j(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new j(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ks(e,s))},i.onupgradeneeded=o=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return V(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=dg.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(d=>(a.g(),d)).catch(d=>(a.abort(d),k.reject(d))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,d=c.name!=="FirebaseError"&&s<3;if(B("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function rM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var G_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xs(this.B.delete())}},ks=class extends j{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Po(n){return n.name==="IndexedDbTransactionError"}var W_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(B("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xs(r)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),xs(this.store.add(e))}get(e){return xs(this.store.get(e)).next(t=>(t===void 0&&(t=null),B("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),xs(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),xs(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new k((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new k((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){B("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new k((r,i)=>{t.onerror=o=>{let s=j0(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new k((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new G_(a),d=t(a.primaryKey,a.value,c);if(d instanceof k){let g=d.catch(p=>(c.done(),k.reject(p)));r.push(g)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>k.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function xs(n){return new k((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=j0(r.target.error);t(i)}})}var QA=!1;function j0(n){let e=Io.S(Nu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QA||(QA=!0,setTimeout(()=>{throw r},0)),r}}return n}var K_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){B("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>V(this,null,function*(){this.task=null;try{B("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Po(t)?B("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield No(t)}yield this.X(6e4)}))}},Q_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return V(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return k.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return B("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(B("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=tM(o);L0(s,r)>0&&(r=s)}),new qn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var xn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _d(n){return n==null}function ed(n){return n===0&&1/n==-1/0}function iM(n){return typeof n=="number"&&Number.isInteger(n)&&!ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YA(e)),e=wU(n.get(t),e);return YA(e)}function wU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function YA(n){return n+""}function Fr(n){let e=n.length;if(re(e>=2),e===2)return re(n.charAt(0)===""&&n.charAt(1)===""),Pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&ee(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:ee()}o=s+2}return new Pe(r)}var ZA=["userId","batchId"];function ng(n,e){return[n,sn(e)]}function oM(n,e,t){return[n,sn(e),t]}var _U={},bU=["prefixPath","collectionGroup","readTime","documentId"],EU=["prefixPath","collectionGroup","documentId"],IU=["collectionGroup","readTime","prefixPath","documentId"],CU=["canonicalId","targetId"],DU=["targetId","path"],TU=["path","targetId"],SU=["collectionId","parent"],AU=["indexId","uid"],xU=["uid","sequenceNumber"],MU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RU=["indexId","uid","orderedDocumentKey"],NU=["userId","collectionPath","documentId"],PU=["userId","collectionPath","largestBatchId"],kU=["userId","collectionGroup","largestBatchId"],sM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OU=[...sM,"documentOverlays"],aM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cM=aM,B0=[...cM,"indexConfiguration","indexState","indexEntries"],FU=B0,VU=[...B0,"globals"];var td=class extends lg{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Mt(n,e){let t=K(n);return Io.F(t._e,e)}function JA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}},Ac=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();let e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}};Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Lr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hg(this.data.getIterator())}getIteratorFrom(e){return new hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},hg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function wc(n){return n.hasNext()?n.getNext():void 0}var Mn=class n{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ge(ht.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var fg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function lM(){return typeof atob<"u"}var pt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pt.EMPTY_BYTE_STRING=new pt("");var LU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(n){if(re(!!n),typeof n=="string"){let e=0,t=LU.exec(n);if(re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Co(n){return typeof n=="string"?pt.fromBase64String(n):pt.fromUint8Array(n)}function im(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function U0(n){let e=n.mapValue.fields.__previous_value__;return im(e)?U0(e):e}function nd(n){let e=yi(n.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}var Y_=class{constructor(e,t,r,i,o,s,a,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},Do=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rg={nullValue:"NULL_VALUE"};function Os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?im(n)?4:dM(n)?9007199254740991:om(n)?10:11:ee()}function Ur(n,e){if(n===e)return!0;let t=Os(n);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nd(n).isEqual(nd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=yi(i.timestampValue),a=yi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Co(i.bytesValue).isEqual(Co(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?ed(s)===ed(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Nc(n.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(JA(s)!==JA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ur(s[c],a[c])))return!1;return!0}(n,e);default:return ee()}}function rd(n,e){return(n.values||[]).find(t=>Ur(t,e))!==void 0}function To(n,e){if(n===e)return 0;let t=Os(n),r=Os(e);if(t!==r)return fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=tt(o.integerValue||o.doubleValue),c=tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return XA(n.timestampValue,e.timestampValue);case 4:return XA(nd(n),nd(e));case 5:return fe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Co(o),c=Co(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let g=fe(a[d],c[d]);if(g!==0)return g}return fe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=fe(tt(o.latitude),tt(s.latitude));return a!==0?a:fe(tt(o.longitude),tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ex(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,d,g;let p=o.fields||{},w=s.fields||{},b=(a=p.value)===null||a===void 0?void 0:a.arrayValue,M=(c=w.value)===null||c===void 0?void 0:c.arrayValue,P=fe(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((g=M?.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:ex(b,M)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===_o.mapValue&&s===_o.mapValue)return 0;if(o===_o.mapValue)return 1;if(s===_o.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},g=Object.keys(d);c.sort(),g.sort();for(let p=0;p<c.length&&p<g.length;++p){let w=fe(c[p],g[p]);if(w!==0)return w;let b=To(a[c[p]],d[g[p]]);if(b!==0)return b}return fe(c.length,g.length)}(n.mapValue,e.mapValue);default:throw ee()}}function XA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fe(n,e);let t=yi(n),r=yi(e),i=fe(t.seconds,r.seconds);return i!==0?i:fe(t.nanos,r.nanos)}function ex(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=To(t[i],r[i]);if(o)return o}return fe(t.length,r.length)}function kc(n){return Z_(n)}function Z_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=yi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Co(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Z_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Z_(t.fields[s])}`;return i+"}"}(n.mapValue):ee()}function Fs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function J_(n){return!!n&&"integerValue"in n}function id(n){return!!n&&"arrayValue"in n}function tx(n){return!!n&&"nullValue"in n}function nx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ig(n){return!!n&&"mapValue"in n}function om(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Kl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function jU(n){return"nullValue"in n?rg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fs(Do.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?om(n)?hM:{mapValue:{}}:ee()}function BU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fs(Do.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?hM:"mapValue"in n?om(n)?{mapValue:{}}:_o:ee()}function rx(n,e){let t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ix(n,e){let t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Qt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ig(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(t)}setAll(e){let t=ht.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Kl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ig(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ig(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Kl(this.value))}};function fM(n){let e=[];return Gs(n.fields,(t,r)=>{let i=new ht([t]);if(ig(r)){let o=fM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Mn(e)}var Et=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),Qt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $r=class{constructor(e,t){this.position=e,this.inclusive=t}};function ox(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=To(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ur(n.position[t],e.position[t]))return!1;return!0}var Vs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function UU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pg=class{},Te=class n extends pg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new tb(e,t,r):t==="array-contains"?new ib(e,r):t==="in"?new gg(e,r):t==="not-in"?new ob(e,r):t==="array-contains-any"?new sb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new nb(e,r):new rb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(To(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends pg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Oc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Oc(n){return n.op==="and"}function X_(n){return n.op==="or"}function $0(n){return pM(n)&&Oc(n)}function pM(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function eb(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+kc(n.value);if($0(n))return n.filters.map(e=>eb(e)).join(",");{let e=n.filters.map(t=>eb(t)).join(",");return`${n.op}(${e})`}}function gM(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Ur(r.value,i.value)}(n,e):n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gM(s,i.filters[a]),!0):!1}(n,e):void ee()}function mM(n,e){let t=n.filters.concat(e);return $e.create(t,n.op)}function yM(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${kc(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(yM).join(" ,")+"}"}(n):"Filter"}var tb=class extends Te{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},nb=class extends Te{constructor(e,t){super(e,"in",t),this.keys=vM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},rb=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=vM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var ib=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return id(t)&&rd(t.arrayValue,this.value)}},gg=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&rd(this.value.arrayValue,t)}},ob=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!rd(this.value.arrayValue,t)}},sb=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!id(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rd(this.value.arrayValue,r))}};var ab=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function cb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ab(n,e,t,r,i,o,s)}function Ls(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>eb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kc(r)).join(",")),e.ue=t}return e.ue}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sx(n.startAt,e.startAt)&&sx(n.endAt,e.endAt)}function mg(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function yg(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function ax(n,e,t){let r=rg,i=!0;for(let o of yg(n,e)){let s=rg,a=!0;switch(o.op){case"<":case"<=":s=jU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rg}rx({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];rx({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function cx(n,e,t){let r=_o,i=!0;for(let o of yg(n,e)){let s=_o,a=!0;switch(o.op){case">=":case">":s=BU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=_o}ix({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ix({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var dr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function wM(n,e,t,r,i,o,s,a){return new dr(n,e,t,r,i,o,s,a)}function Yc(n){return new dr(n)}function ux(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function H0(n){return n.collectionGroup!==null}function Mc(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ge(ht.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vs(o,r))}),t.has(ht.keyField().canonicalString())||e.ce.push(new Vs(ht.keyField(),r))}return e.ce}function an(n){let e=K(n);return e.le||(e.le=$U(e,Mc(n))),e.le}function $U(n,e){if(n.limitType==="F")return cb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vs(i.field,o)});let t=n.endAt?new $r(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $r(n.startAt.position,n.startAt.inclusive):null;return cb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ub(n,e){let t=n.filters.concat([e]);return new dr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vg(n,e,t){return new dr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ed(n,e){return bd(an(n),an(e))&&n.limitType===e.limitType}function _M(n){return`${Ls(an(n))}|lt:${n.limitType}`}function Cc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>yM(i)).join(", ")}]`),_d(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>kc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>kc(i)).join(",")),`Target(${r})`}(an(n))}; limitType=${n.limitType})`}function Id(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Mc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let d=ox(s,a,c);return s.inclusive?d<=0:d<0}(r.startAt,Mc(r),i)||r.endAt&&!function(s,a,c){let d=ox(s,a,c);return s.inclusive?d>=0:d>0}(r.endAt,Mc(r),i))}(n,e)}function bM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EM(n){return(e,t)=>{let r=!1;for(let i of Mc(n)){let o=HU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HU(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?To(c,d):ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}var Hr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return uM(this.inner)}size(){return this.innerSize}};var qU=new Je(Q.comparator);function wn(){return qU}var IM=new Je(Q.comparator);function Gl(...n){let e=IM;for(let t of n)e=e.insert(t.key,t);return e}function CM(n){let e=IM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vr(){return Ql()}function DM(){return Ql()}function Ql(){return new Hr(n=>n.toString(),(n,e)=>n.isEqual(e))}var zU=new Je(Q.comparator),GU=new Ge(Q.comparator);function ge(...n){let e=GU;for(let t of n)e=e.add(t);return e}var WU=new Ge(fe);function q0(){return WU}function z0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function TM(n){return{integerValue:""+n}}function SM(n,e){return iM(e)?TM(e):z0(n,e)}var Fc=class{constructor(){this._=void 0}};function KU(n,e,t){return n instanceof So?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&im(o)&&(o=U0(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof vi?xM(n,e):n instanceof wi?MM(n,e):function(i,o){let s=AM(i,o),a=lx(s)+lx(i.Pe);return J_(s)&&J_(i.Pe)?TM(a):z0(i.serializer,a)}(n,e)}function QU(n,e,t){return n instanceof vi?xM(n,e):n instanceof wi?MM(n,e):t}function AM(n,e){return n instanceof Ao?function(r){return J_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var So=class extends Fc{},vi=class extends Fc{constructor(e){super(),this.elements=e}};function xM(n,e){let t=RM(e);for(let r of n.elements)t.some(i=>Ur(i,r))||t.push(r);return{arrayValue:{values:t}}}var wi=class extends Fc{constructor(e){super(),this.elements=e}};function MM(n,e){let t=RM(e);for(let r of n.elements)t=t.filter(i=>!Ur(i,r));return{arrayValue:{values:t}}}var Ao=class extends Fc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function lx(n){return tt(n.integerValue||n.doubleValue)}function RM(n){return id(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var js=class{constructor(e,t){this.field=e,this.transform=t}};function YU(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof vi&&i instanceof vi||r instanceof wi&&i instanceof wi?Nc(r.elements,i.elements,Ur):r instanceof Ao&&i instanceof Ao?Ur(r.Pe,i.Pe):r instanceof So&&i instanceof So}(n.transform,e.transform)}var lb=class{constructor(e,t){this.version=e,this.transformResults=t}},ut=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function og(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vc=class{};function NM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mo(n.key,ut.none()):new xo(n.key,n.data,ut.none());{let t=n.data,r=Qt.empty(),i=new Ge(ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new hr(n.key,r,new Mn(i.toArray()),ut.none())}}function ZU(n,e,t){n instanceof xo?function(i,o,s){let a=i.value.clone(),c=hx(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hr?function(i,o,s){if(!og(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=hx(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(PM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Yl(n,e,t,r){return n instanceof xo?function(o,s,a,c){if(!og(o.precondition,s))return a;let d=o.value.clone(),g=fx(o.fieldTransforms,c,s);return d.setAll(g),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof hr?function(o,s,a,c){if(!og(o.precondition,s))return a;let d=fx(o.fieldTransforms,c,s),g=s.data;return g.setAll(PM(o)),g.setAll(d),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return og(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function JU(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=AM(r.transform,i||null);o!=null&&(t===null&&(t=Qt.empty()),t.set(r.field,o))}return t||null}function dx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Nc(r,i,(o,s)=>YU(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xo=class extends Vc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hr=class extends Vc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function hx(n,e,t){let r=new Map;re(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,QU(s,a,t[i]))}return r}function fx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,KU(o,s,e))}return r}var Mo=class extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},od=class extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sd=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ZU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=DM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=NM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,(t,r)=>dx(t,r))&&Nc(this.baseMutations,e.baseMutations,(t,r)=>dx(t,r))}},db=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){re(e.mutations.length===r.length);let i=function(){return zU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var ad=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var wt,Ne;function kM(n){switch(n){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function OM(n){if(n===void 0)return dt("GRPC error has no .code"),F.UNKNOWN;switch(n){case wt.OK:return F.OK;case wt.CANCELLED:return F.CANCELLED;case wt.UNKNOWN:return F.UNKNOWN;case wt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case wt.INTERNAL:return F.INTERNAL;case wt.UNAVAILABLE:return F.UNAVAILABLE;case wt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case wt.NOT_FOUND:return F.NOT_FOUND;case wt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case wt.ABORTED:return F.ABORTED;case wt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case wt.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(Ne=wt||(wt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";var px=null;function FM(){return new TextEncoder}var XU=new go([4294967295,4294967295],0);function gx(n){let e=FM().encode(n),t=new S_;return t.update(e),new Uint8Array(t.digest())}function mx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new go([t,r],0),new go([i,o],0)]}var fb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ps(`Invalid padding: ${t}`);if(r<0)throw new Ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ps(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ps(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=go.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(go.fromNumber(r)));return i.compare(XU)===1&&(i=new go([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=gx(e),[r,i]=mx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=gx(e),[r,i]=mx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ps=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Je(fe),wn(),ge())}},ud=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var Rc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},wg=class{constructor(e,t){this.targetId=e,this.me=t}},_g=class{constructor(e,t,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bg=class{constructor(){this.fe=0,this.ge=vx(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new ud(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=vx()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pb=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=wn(),this.qe=yx(),this.Qe=new Je(fe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(mg(o))if(r===0){let s=new Q(o.path);this.Ue(t,s,Et.newNoDocument(s,se.min()))}else re(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}px?.et(function(g,p,w,b,M){var P,R,U,Y,H,ne;let ae={localCacheCount:g,existenceFilterCount:p.count,databaseId:w.database,projectId:w.projectId},ie=p.unchangedNames;return ie&&(ae.bloomFilter={applied:M===0,hashCount:(P=ie?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=(U=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||U===void 0?void 0:U.length)!==null&&Y!==void 0?Y:0,padding:(ne=(H=ie?.bits)===null||H===void 0?void 0:H.padding)!==null&&ne!==void 0?ne:0,mightContain:D=>{var E;return(E=b?.mightContain(D))!==null&&E!==void 0&&E}}),ae}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Co(r).toUint8Array()}catch(c){if(c instanceof fg)return lr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fb(s,i,o)}catch(c){return lr(c instanceof Ps?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&mg(a.target)){let c=new Q(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Et.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new cd(e,t,this.Qe,this.ke,r);return this.ke=wn(),this.qe=yx(),this.Qe=new Je(fe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new bg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ge(fe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function yx(){return new Je(Q.comparator)}function vx(){return new Je(Q.comparator)}var e$={asc:"ASCENDING",desc:"DESCENDING"},t$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n$={and:"AND",or:"OR"},gb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mb(n,e){return n.useProto3Json||_d(e)?e:{value:e}}function Lc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r$(n,e){return Lc(n,e.toTimestamp())}function ft(n){return re(!!n),se.fromTimestamp(function(t){let r=yi(t);return new it(r.seconds,r.nanos)}(n))}function G0(n,e){return yb(n,e).canonicalString()}function yb(n,e){let t=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LM(n){let e=Pe.fromString(n);return re(KM(e)),e}function ld(n,e){return G0(n.databaseId,e.path)}function jr(n,e){let t=LM(e);if(t.get(1)!==n.databaseId.projectId)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(UM(t))}function jM(n,e){return G0(n.databaseId,e)}function BM(n){let e=LM(n);return e.length===4?Pe.emptyPath():UM(e)}function vb(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UM(n){return re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function wx(n,e,t){return{name:ld(n,e),fields:t.value.mapValue.fields}}function $M(n,e,t){let r=jr(n,e.name),i=ft(e.updateTime),o=e.createTime?ft(e.createTime):se.min(),s=new Qt({mapValue:{fields:e.fields}}),a=Et.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function i$(n,e){return"found"in e?function(r,i){re(!!i.found),i.found.name,i.found.updateTime;let o=jr(r,i.found.name),s=ft(i.found.updateTime),a=i.found.createTime?ft(i.found.createTime):se.min(),c=new Qt({mapValue:{fields:i.found.fields}});return Et.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){re(!!i.missing),re(!!i.readTime);let o=jr(r,i.missing),s=ft(i.readTime);return Et.newNoDocument(o,s)}(n,e):ee()}function o$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,g){return d.useProto3Json?(re(g===void 0||typeof g=="string"),pt.fromBase64String(g||"")):(re(g===void 0||g instanceof Buffer||g instanceof Uint8Array),pt.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let g=d.code===void 0?F.UNKNOWN:OM(d.code);return new j(g,d.message||"")}(s);t=new _g(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jr(n,r.document.name),o=ft(r.document.updateTime),s=r.document.createTime?ft(r.document.createTime):se.min(),a=new Qt({mapValue:{fields:r.document.fields}}),c=Et.newFoundDocument(i,o,s,a),d=r.targetIds||[],g=r.removedTargetIds||[];t=new Rc(d,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jr(n,r.document),o=r.readTime?ft(r.readTime):se.min(),s=Et.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Rc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jr(n,r.document),o=r.removedTargetIds||[];t=new Rc([],o,i,null)}else{if(!("filter"in e))return ee();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new hb(i,o),a=r.targetId;t=new wg(a,s)}}return t}function dd(n,e){let t;if(e instanceof xo)t={update:wx(n,e.key,e.value)};else if(e instanceof Mo)t={delete:ld(n,e.key)};else if(e instanceof hr)t={update:wx(n,e.key,e.data),updateMask:d$(e.fieldMask)};else{if(!(e instanceof od))return ee();t={verify:ld(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof So)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ao)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:r$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee()}(n,e.precondition)),t}function wb(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ut.updateTime(ft(o.updateTime)):o.exists!==void 0?ut.exists(o.exists):ut.none()}(e.currentDocument):ut.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME"),c=new So;else if("appendMissingElements"in a){let g=a.appendMissingElements.values||[];c=new vi(g)}else if("removeAllFromArray"in a){let g=a.removeAllFromArray.values||[];c=new wi(g)}else"increment"in a?c=new Ao(s,a.increment):ee();let d=ht.fromServerFormat(a.fieldPath);return new js(d,c)}(n,i)):[];if(e.update){e.update.name;let i=jr(n,e.update.name),o=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let d=c.fieldPaths||[];return new Mn(d.map(g=>ht.fromServerFormat(g)))}(e.updateMask);return new hr(i,o,s,t,r)}return new xo(i,o,t,r)}if(e.delete){let i=jr(n,e.delete);return new Mo(i,t)}if(e.verify){let i=jr(n,e.verify);return new od(i,t)}return ee()}function s$(n,e){return n&&n.length>0?(re(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ft(i.updateTime):ft(o);return s.isEqual(se.min())&&(s=ft(o)),new lb(s,i.transformResults||[])}(t,e))):[]}function HM(n,e){return{documents:[jM(n,e.path)]}}function qM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jM(n,i);let o=function(d){if(d.length!==0)return WM($e.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(g=>function(w){return{field:Dc(w.field),direction:c$(w.dir)}}(g))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=mb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function zM(n){let e=BM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){re(r===1);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(p){let w=GM(p);return w instanceof $e&&$0(w)?w.getFilters():[w]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(w=>function(M){return new Vs(Tc(M.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(t.orderBy));let a=null;t.limit&&(a=function(p){let w;return w=typeof p=="object"?p.value:p,_d(w)?null:w}(t.limit));let c=null;t.startAt&&(c=function(p){let w=!!p.before,b=p.values||[];return new $r(b,w)}(t.startAt));let d=null;return t.endAt&&(d=function(p){let w=!p.before,b=p.values||[];return new $r(b,w)}(t.endAt)),wM(e,i,s,o,a,"F",c,d)}function a$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Tc(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Tc(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Tc(t.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Tc(t.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(n):n.fieldFilter!==void 0?function(t){return Te.create(Tc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>GM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(t.compositeFilter.op))}(n):ee()}function c$(n){return e$[n]}function u$(n){return t$[n]}function l$(n){return n$[n]}function Dc(n){return{fieldPath:n.canonicalString()}}function Tc(n){return ht.fromServerFormat(n.fieldPath)}function WM(n){return n instanceof Te?function(t){if(t.op==="=="){if(nx(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NAN"}};if(tx(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nx(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NOT_NAN"}};if(tx(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(t.field),op:u$(t.op),value:t.value}}}(n):n instanceof $e?function(t){let r=t.getFilters().map(i=>WM(i));return r.length===1?r[0]:{compositeFilter:{op:l$(t.op),filters:r}}}(n):ee()}function d$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var jc=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Eg=class{constructor(e){this.ct=e}};function h$(n,e){let t;if(e.document)t=$M(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Q.fromSegments(e.noDocument.path),i=Us(e.noDocument.readTime);t=Et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{let r=Q.fromSegments(e.unknownDocument.path),i=Us(e.unknownDocument.version);t=Et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new it(i[0],i[1]);return se.fromTimestamp(o)}(e.readTime)),t}function _x(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ld(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Lc(o,s.version.toTimestamp()),createTime:Lc(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bs(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:t.path.toArray(),version:Bs(e.version)}}return r}function Ig(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bs(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Us(n){let e=new it(n.seconds,n.nanoseconds);return se.fromTimestamp(e)}function Ms(n,e){let t=(e.baseMutations||[]).map(o=>wb(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>wb(n.ct,o)),i=it.fromMillis(e.localWriteTimeMs);return new sd(e.batchId,i,t,r)}function Wl(n){let e=Us(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Us(n.lastLimboFreeSnapshotVersion):se.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return re(o.documents.length===1),an(Yc(BM(o.documents[0])))}(n.query):function(o){return an(zM(o))}(n.query),new jc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pt.fromBase64String(n.resumeToken))}function QM(n,e){let t=Bs(e.snapshotVersion),r=Bs(e.lastLimboFreeSnapshotVersion),i;i=mg(e.target)?HM(n.ct,e.target):qM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ls(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function W0(n){let e=zM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vg(e,e.limit,"L"):e}function P_(n,e){return new ad(e.largestBatchId,wb(n.ct,e.overlayMutation))}function bx(n,e){let t=e.path.lastSegment();return[n,sn(e.path.popLast()),t]}function Ex(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bs(r.readTime),documentKey:sn(r.documentKey.path),largestBatchId:r.largestBatchId}}var _b=class{getBundleMetadata(e,t){return Ix(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Us(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Ix(e).put(function(i){return{bundleId:i.id,createTime:Bs(ft(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Cx(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:W0(o.bundledQuery),readTime:Us(o.readTime)}}(r)})}saveNamedQuery(e,t){return Cx(e).put(function(i){return{name:i.name,readTime:Bs(ft(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Ix(n){return Mt(n,"bundles")}function Cx(n){return Mt(n,"namedQueries")}var Cg=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return $l(e).get(bx(this.userId,t)).next(r=>r?P_(this.serializer,r):null)}getOverlays(e,t){let r=Vr();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new ad(t,s);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(sn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push($l(e).j("collectionPathOverlayIndex",a))}),k.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Vr(),o=sn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return $l(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let d=P_(this.serializer,c);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Vr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $l(e).J({index:"collectionGroupOverlayIndex",range:a},(c,d,g)=>{let p=P_(this.serializer,d);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):g.done()}).next(()=>o)}ht(e,t){return $l(e).put(function(i,o,s){let[a,c,d]=bx(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:dd(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function $l(n){return Mt(n,"documentOverlays")}var bb=class{Pt(e){return Mt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?pt.fromUint8Array(r):pt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var gi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ed(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=yi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Co(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?dM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):om(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ee()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(tt(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};gi.vt=new gi;function f$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Dx(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=f$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Eb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Dx(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Dx(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ib=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Cb=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Rs=class{constructor(){this.jt=new Eb,this.Ht=new Ib(this.jt),this.Jt=new Cb(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ns=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function mo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Tx(n.arrayValue,e.arrayValue),t!==0?t:(t=Tx(n.directionalValue,e.directionalValue),t!==0?t:Q.comparator(n.documentKey,e.documentKey)))}function Tx(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Dg=class{constructor(e){this.Xt=new Ge((t,r)=>ht.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(re(e.collectionGroup===this.collectionId),this.nn)return!1;let t=z_(e);if(t!==void 0&&!this.sn(t))return!1;let r=As(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ge(ht.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new xc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xc(r.field,r.dir==="asc"?0:1)));return new Pc(Pc.UNKNOWN_ID,this.collectionId,t,Xl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function YM(n){var e,t;if(re(n instanceof Te||n instanceof $e),n instanceof Te){if(n instanceof gg){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Te.create(n.field,"==",o)))||[];return $e.create(i,"or")}return n}let r=n.filters.map(i=>YM(i));return $e.create(r,n.op)}function p$(n){if(n.getFilters().length===0)return[];let e=Sb(YM(n));return re(ZM(e)),Db(e)||Tb(e)?[e]:e.getFilters()}function Db(n){return n instanceof Te}function Tb(n){return n instanceof $e&&$0(n)}function ZM(n){return Db(n)||Tb(n)||function(t){if(t instanceof $e&&X_(t)){for(let r of t.getFilters())if(!Db(r)&&!Tb(r))return!1;return!0}return!1}(n)}function Sb(n){if(re(n instanceof Te||n instanceof $e),n instanceof Te)return n;if(n.filters.length===1)return Sb(n.filters[0]);let e=n.filters.map(r=>Sb(r)),t=$e.create(e,n.op);return t=Tg(t),ZM(t)?t:(re(t instanceof $e),re(Oc(t)),re(t.filters.length>1),t.filters.reduce((r,i)=>K0(r,i)))}function K0(n,e){let t;return re(n instanceof Te||n instanceof $e),re(e instanceof Te||e instanceof $e),t=n instanceof Te?e instanceof Te?function(i,o){return $e.create([i,o],"and")}(n,e):Sx(n,e):e instanceof Te?Sx(e,n):function(i,o){if(re(i.filters.length>0&&o.filters.length>0),Oc(i)&&Oc(o))return mM(i,o.getFilters());let s=X_(i)?i:o,a=X_(i)?o:i,c=s.filters.map(d=>K0(d,a));return $e.create(c,"or")}(n,e),Tg(t)}function Sx(n,e){if(Oc(e))return mM(e,n.getFilters());{let t=e.filters.map(r=>K0(n,r));return $e.create(t,"or")}}function Tg(n){if(re(n instanceof Te||n instanceof $e),n instanceof Te)return n;let e=n.getFilters();if(e.length===1)return Tg(e[0]);if(pM(n))return n;let t=e.map(i=>Tg(i)),r=[];return t.forEach(i=>{i instanceof Te?r.push(i):i instanceof $e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,n.op)}var Ab=class{constructor(){this.un=new hd}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(qn.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(qn.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},hd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Pe.comparator)).toArray()}};var Jp=new Uint8Array(0),xb=class{constructor(e,t){this.databaseId=t,this.cn=new hd,this.ln=new Hr(r=>Ls(r),(r,i)=>bd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:sn(i)};return Ax(e).put(o)}return k.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Xx(t),""],!1,!0);return Ax(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Fr(s.parent))}return r})}addFieldIndex(e,t){let r=Hl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=bc(e);return o.next(a=>{s.put(Ex(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Hl(e),i=bc(e),o=_c(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Hl(e),r=_c(e),i=bc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return k.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Dg(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=_c(e),i=!0,o=new Map;return k.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ge(),a=[];return k.forEach(o,(c,d)=>{B("IndexedDbIndexManager",`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`}(c)} to execute ${Ls(t)}`);let g=function(H,ne){let ae=z_(ne);if(ae===void 0)return null;for(let ie of yg(H,ae.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(d,c),p=function(H,ne){let ae=new Map;for(let ie of As(ne))for(let D of yg(H,ie.fieldPath))switch(D.op){case"==":case"in":ae.set(ie.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return ae.set(ie.fieldPath.canonicalString(),D.value),Array.from(ae.values())}return null}(d,c),w=function(H,ne){let ae=[],ie=!0;for(let D of As(ne)){let E=D.kind===0?ax(H,D.fieldPath,H.startAt):cx(H,D.fieldPath,H.startAt);ae.push(E.value),ie&&(ie=E.inclusive)}return new $r(ae,ie)}(d,c),b=function(H,ne){let ae=[],ie=!0;for(let D of As(ne)){let E=D.kind===0?cx(H,D.fieldPath,H.endAt):ax(H,D.fieldPath,H.endAt);ae.push(E.value),ie&&(ie=E.inclusive)}return new $r(ae,ie)}(d,c),M=this.In(c,d,w),P=this.In(c,d,b),R=this.Tn(c,d,p),U=this.En(c.indexId,g,M,w.inclusive,P,b.inclusive,R);return k.forEach(U,Y=>r.G(Y,t.limit).next(H=>{H.forEach(ne=>{let ae=Q.fromSegments(ne.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return k.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=p$($e.create(e.filters,"and")).map(r=>cb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),d=c/(t!=null?t.length:1),g=[];for(let p=0;p<c;++p){let w=t?this.dn(t[p/d]):Jp,b=this.An(e,w,r[p%d],i),M=this.Rn(e,w,o[p%d],s),P=a.map(R=>this.An(e,w,R,!0));g.push(...this.createRange(b,M,P))}return g}An(e,t,r,i){let o=new Ns(e,Q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ns(e,Q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Dg(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return k.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let d=new Ge(ht.comparator),g=!1;for(let p of c.filters)for(let w of p.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:d=d.add(w.field));for(let p of c.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(g?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Rs;for(let i of As(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);gi.vt.It(o,s)}return r.zt()}dn(e){let t=new Rs;return gi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Rs;return gi.vt.It(Fs(this.databaseId,t),r.Yt(function(o){let s=As(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Rs);let o=0;for(let s of As(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&id(a))i=this.gn(i,s,a);else{let d=c.Yt(s.kind);gi.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Rs;c.seed(a.zt()),gi.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Hl(e),i=bc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return k.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(g,p){let w=p?new Xl(p.sequenceNumber,new qn(Us(p.readTime),new Q(Fr(p.documentKey)),p.largestBatchId)):Xl.empty(),b=g.fields.map(([M,P])=>new xc(ht.fromServerFormat(M),P));return new Pc(g.indexId,g.collectionGroup,b,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:fe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Hl(e),o=bc(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>k.forEach(a,c=>o.put(Ex(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return k.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?k.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,c=>this.wn(e,i,c).next(d=>{let g=this.Sn(o,c);return d.isEqual(g)?k.resolve():this.bn(e,o,c,d,g)}))))})}Dn(e,t,r,i){return _c(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return _c(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=_c(e),o=new Ge(mo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ns(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ge(mo),i=this.Vn(t,e);if(i==null)return r;let o=z_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(id(s))for(let a of s.arrayValue.values||[])r=r.add(new Ns(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ns(t.indexId,e.key,Jp,i));return r}bn(e,t,r,i,o){B("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,d,g,p,w){let b=c.getIterator(),M=d.getIterator(),P=wc(b),R=wc(M);for(;P||R;){let U=!1,Y=!1;if(P&&R){let H=g(P,R);H<0?Y=!0:H>0&&(U=!0)}else P!=null?Y=!0:U=!0;U?(p(R),R=wc(M)):Y?(w(P),P=wc(b)):(P=wc(b),R=wc(M))}}(i,o,mo,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),k.waitFor(s)}yn(e){let t=1;return bc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>mo(s,a)).filter((s,a,c)=>!a||mo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=mo(s,e),c=mo(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Jp,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Jp,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return mo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xx)}getMinOffset(e,t){return k.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ee())).next(xx)}};function Ax(n){return Mt(n,"collectionParents")}function _c(n){return Mt(n,"indexEntries")}function Hl(n){return Mt(n,"indexConfiguration")}function bc(n){return Mt(n,"indexState")}function xx(n){re(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;L0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qn(e.readTime,e.documentKey,t)}var Mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function JM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(g,p,w)=>(a++,w.delete()));o.push(c.next(()=>{re(a===1)}));let d=[];for(let g of t.mutations){let p=oM(e,g.key.path,t.batchId);o.push(i.delete(p)),d.push(g.key)}return k.waitFor(o).next(()=>d)}function Sg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ee();e=n.noDocument}return JSON.stringify(e).length}Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);var Ag=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){re(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yo(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Sc(e),s=yo(e);return s.add({}).next(a=>{re(typeof a=="number");let c=new sd(a,t,r,i),d=function(b,M,P){let R=P.baseMutations.map(Y=>dd(b.ct,Y)),U=P.mutations.map(Y=>dd(b.ct,Y));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:R,mutations:U}}(this.serializer,this.userId,c),g=[],p=new Ge((w,b)=>fe(w.canonicalString(),b.canonicalString()));for(let w of i){let b=oM(this.userId,w.key.path,a);p=p.add(w.key.path.popLast()),g.push(s.put(d)),g.push(o.put(b,_U))}return p.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),k.waitFor(g).next(()=>c)})}lookupMutationBatch(e,t){return yo(e).get(t).next(r=>r?(re(r.userId===this.userId),Ms(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?k.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yo(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(re(a.batchId>=r),o=Ms(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return yo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yo(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ms(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ng(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Sc(e).J({range:i},(s,a,c)=>{let[d,g,p]=s,w=Fr(g);if(d===this.userId&&t.path.isEqual(w))return yo(e).get(p).next(b=>{if(!b)throw ee();re(b.userId===this.userId),o.push(Ms(this.serializer,b))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(fe),i=[];return t.forEach(o=>{let s=ng(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Sc(e).J({range:a},(d,g,p)=>{let[w,b,M]=d,P=Fr(b);w===this.userId&&o.path.isEqual(P)?r=r.add(M):p.done()});i.push(c)}),k.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ng(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ge(fe);return Sc(e).J({range:s},(c,d,g)=>{let[p,w,b]=c,M=Fr(w);p===this.userId&&r.isPrefixOf(M)?M.length===i&&(a=a.add(b)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(yo(e).get(o).next(s=>{if(s===null)throw ee();re(s.userId===this.userId),r.push(Ms(this.serializer,s))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return JM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Sc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Fr(o[1]);i.push(c)}else a.done()}).next(()=>{re(i.length===0)})})}containsKey(e,t){return XM(e,this.userId,t)}Nn(e){return eR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function XM(n,e,t){let r=ng(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Sc(n).J({range:o,H:!0},(a,c,d)=>{let[g,p,w]=a;g===e&&p===i&&(s=!0),d.done()}).next(()=>s)}function yo(n){return Mt(n,"mutations")}function Sc(n){return Mt(n,"documentMutations")}function eR(n){return Mt(n,"mutationQueues")}var Bc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Mb=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Bc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>se.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ec(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ec(e).J((s,a)=>{let c=Wl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>k.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ec(e).J((r,i)=>{let o=Wl(i);t(o)})}qn(e){return Rx(e).get("targetGlobalKey").next(t=>(re(t!==null),t))}Qn(e,t){return Rx(e).put("targetGlobalKey",t)}Kn(e,t){return Ec(e).put(QM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ls(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ec(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let d=Wl(a);bd(t,d.target)&&(o=d,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=vo(e);return t.forEach(s=>{let a=sn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),k.waitFor(i)}removeMatchingKeys(e,t,r){let i=vo(e);return k.forEach(t,o=>{let s=sn(o.path);return k.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=vo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vo(e),o=ge();return i.J({range:r,H:!0},(s,a,c)=>{let d=Fr(s[1]),g=new Q(d);o=o.add(g)}).next(()=>o)}containsKey(e,t){let r=sn(t.path),i=IDBKeyRange.bound([r],[Xx(r)],!1,!0),o=0;return vo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,d)=>{s!==0&&(o++,d.done())}).next(()=>o>0)}ot(e,t){return Ec(e).get(t).next(r=>r?Wl(r):null)}};function Ec(n){return Mt(n,"targets")}function Rx(n){return Mt(n,"targetGlobal")}function vo(n){return Mt(n,"targetDocuments")}function Nx([n,e],[t,r]){let i=fe(n,t);return i===0?fe(e,r):i}var Rb=class{constructor(e){this.Un=e,this.buffer=new Ge(Nx),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Nx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Po(t)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield No(t)}yield this.Hn(3e5)}))}},Pb=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(xn.oe);let r=new Rb(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(Mx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mx):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,d,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ic()<=Ir.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-g}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-g}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function g$(n,e){return new Pb(n,e)}var kb=class{constructor(e,t){this.db=e,this.garbageCollector=g$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Xp(e,r)}removeReference(e,t,r){return Xp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xp(e,t)}nr(e,t){return function(i,o){let s=!1;return eR(i).Y(a=>XM(i,a,o).next(c=>(c&&(s=!0),k.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,se.min()),vo(e).delete(function(p){return[0,sn(p.path)]}(s))))});i.push(c)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xp(e,t)}tr(e,t){let r=vo(e),i,o=xn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:d})=>{s===0?(o!==xn.oe&&t(new Q(Fr(i)),o),o=d,i=c):o=xn.oe}).next(()=>{o!==xn.oe&&t(new Q(Fr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Xp(n,e){return vo(n).put(function(r,i){return{targetId:0,path:sn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var xg=class{constructor(){this.changes=new Hr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ob=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ss(e).put(r)}removeEntry(e,t,r){return Ss(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ig(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Et.newInvalidDocument(t);return Ss(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ql(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Et.newInvalidDocument(t)};return Ss(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ql(t))},(i,o)=>{r={document:this.ir(t,o),size:Sg(o)}}).next(()=>r)}getEntries(e,t){let r=wn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=wn(),i=new Je(Q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Sg(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return k.resolve();let i=new Ge(Ox);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ql(i.first()),ql(i.last())),s=i.getIterator(),a=s.getNext();return Ss(e).J({index:"documentKeyIndex",range:o},(c,d,g)=>{let p=Q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Ox(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?g.$(ql(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ig(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ss(e).U(IDBKeyRange.bound(a,c,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let g=wn();for(let p of d){let w=this.ir(Q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);w.isFoundDocument()&&(Id(t,w)||i.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(e,t,r,i){let o=wn(),s=kx(t,r),a=kx(t,qn.max());return Ss(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,d,g)=>{let p=this.ir(Q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(p.key,p),o.size===i&&g.done()}).next(()=>o)}newChangeBuffer(e){return new Fb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Px(e).get("remoteDocumentGlobalKey").next(t=>(re(!!t),t))}rr(e,t){return Px(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=h$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(se.min())))return r}return Et.newInvalidDocument(e)}};function tR(n){return new Ob(n)}var Fb=class extends xg{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Hr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ge((o,s)=>fe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=_x(this.cr.serializer,s);i=i.add(o.path.popLast());let d=Sg(c);r+=d-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=_x(this.cr.serializer,s.convertToNoDocument(se.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Px(n){return Mt(n,"remoteDocumentGlobal")}function Ss(n){return Mt(n,"remoteDocumentsV14")}function ql(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kx(n,e){let t=e.documentKey.path.toArray();return[n,Ig(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ox(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=fe(t[o],r[o]),i)return i;return i=fe(t.length,r.length),i||(i=fe(t[t.length-2],r[r.length-2]),i||fe(t[t.length-1],r[r.length-1]))}var Vb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Mg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Yl(r.mutation,i,Mn.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=Vr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Gl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wn(),s=Ql(),a=function(){return Ql()}();return t.forEach((c,d)=>{let g=r.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof hr)?o=o.insert(d.key,d):g!==void 0?(s.set(d.key,g.mutation.getFieldMask()),Yl(g.mutation,d,g.mutation.getFieldMask(),it.now())):s.set(d.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,g)=>s.set(d,g)),t.forEach((d,g)=>{var p;return a.set(d,new Vb(g,(p=s.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ql(),i=new Je((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let g=r.get(c)||Mn.empty();g=a.applyToLocalView(d,g),r.set(c,g);let p=(i.get(a.batchId)||ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,g=c.value,p=DM();g.forEach(w=>{if(!o.has(w)){let b=NM(t.get(w),r.get(w));b!==null&&p.set(w,b),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):H0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):k.resolve(Vr()),a=-1,c=o;return s.next(d=>k.forEach(d,(g,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(g)?k.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{c=c.insert(g,w)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,ge())).next(g=>({batchId:a,changes:CM(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=Gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Gl();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,c=>{let d=function(p,w){return new dr(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((p,w)=>{s=s.insert(p,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let g=d.getKey();s.get(g)===null&&(s=s.insert(g,Et.newInvalidDocument(g)))});let a=Gl();return s.forEach((c,d)=>{let g=o.get(c);g!==void 0&&Yl(g.mutation,d,Mn.empty(),it.now()),Id(t,d)&&(a=a.insert(c,d))}),a})}};var Lb=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ft(i.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:W0(i.bundledQuery),readTime:ft(i.readTime)}}(t)),k.resolve()}};var jb=class{constructor(){this.overlays=new Je(Q.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vr();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Vr(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Je((d,g)=>d-g),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=o.get(d.largestBatchId);g===null&&(g=Vr(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}let a=Vr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return k.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ad(t,r));let o=this.Ir.get(t);o===void 0&&(o=ge(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Bb=class{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var fd=class{constructor(){this.Tr=new Ge(_t.Er),this.dr=new Ge(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new _t(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new _t(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Q(new Pe([])),r=new _t(t,e),i=new _t(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new Pe([])),r=new _t(t,e),i=new _t(t,e+1),o=ge();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new _t(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||fe(e.wr,t.wr)}static Ar(e,t){return fe(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var Ub=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ge(_t.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sd(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new _t(t,0),i=new _t(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(fe);return t.forEach(i=>{let o=new _t(i,0),s=new _t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new _t(new Q(o),0),a=new Ge(fe);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},s),k.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(t.mutations,i=>{let o=new _t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new _t(t,0),i=this.br.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var $b=class{constructor(e){this.Mr=e,this.docs=function(){return new Je(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let r=wn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Et.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wn(),s=t.path,a=new Q(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:g}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||L0(tM(g),r)<=0||(i.has(g.key)||Id(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ee()}Or(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hb(this)}getSize(e){return k.resolve(this.size)}},Hb=class extends xg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var qb=class{constructor(e){this.persistence=e,this.Nr=new Hr(t=>Ls(t),bd),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fd,this.targetCount=0,this.kr=Bc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Bc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var Rg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new xn(0),this.Kr=!1,this.Kr=!0,this.$r=new Bb,this.referenceDelegate=e(this),this.Ur=new qb(this),this.indexManager=new Ab,this.remoteDocumentCache=function(i){return new $b(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Eg(t),this.Gr=new Lb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ub(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new zb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},zb=class extends lg{constructor(e){super(),this.currentSequenceNumber=e}},Ng=class n{constructor(e){this.persistence=e,this.Jr=new fd,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=Q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Gb=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new dg("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZA,{unique:!0}),c.createObjectStore("documentMutations")}(e),Fx(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=k.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Fx(e)),s=s.next(()=>function(c){let d=c.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,d){return d.store("mutations").U().next(g=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZA,{unique:!0});let p=d.store("mutations"),w=g.map(b=>p.put(b));return k.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let d=c.createObjectStore("documentOverlays",{keyPath:NU});d.createIndex("collectionPathOverlayIndex",PU,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",kU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let d=c.createObjectStore("remoteDocumentsV14",{keyPath:bU});d.createIndex("documentKeyIndex",EU),d.createIndex("collectionGroupIndex",IU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:AU}).createIndex("sequenceNumberIndex",xU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:MU}).createIndex("documentKeyIndex",RU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Sg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>k.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>k.forEach(a,c=>{re(c.userId===o.userId);let d=Ms(this.serializer,c);return JM(e,o.userId,d).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Pe(s),d=function(p){return[0,sn(p)]}(c);o.push(t.get(d).next(g=>g?k.resolve():(p=>t.put({targetId:0,path:sn(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>k.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:SU});let r=t.store("collectionParents"),i=new hd,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:sn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Pe(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],d)=>{let g=Fr(a);return o(g.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Wl(i),s=QM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new Q(Pe.fromString(p.document.name).popFirst(5)):p.noDocument?Q.fromSegments(p.noDocument.path):p.unknownDocument?Q.fromSegments(p.unknownDocument.path):ee()}(s).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(d))}).next(()=>k.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=tR(this.serializer),o=new Rg(Ng.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var d;let g=(d=a.get(c.userId))!==null&&d!==void 0?d:ge();Ms(this.serializer,c).keys().forEach(p=>g=g.add(p)),a.set(c.userId,g)}),k.forEach(a,(c,d)=>{let g=new bt(d),p=Cg.lt(this.serializer,g),w=o.getIndexManager(g),b=Ag.lt(g,this.serializer,w,o.referenceDelegate);return new Mg(i,b,p,w).recalculateAndSaveOverlaysForDocumentKeys(new td(t,xn.oe),c).next()})})}};function Fx(n){n.createObjectStore("targetDocuments",{keyPath:DU}).createIndex("documentTargetsIndex",TU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CU,{unique:!0}),n.createObjectStore("targetGlobal")}var k_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wb=class n{constructor(e,t,r,i,o,s,a,c,d,g,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=d,this.li=g,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!n.D())throw new j(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kb(this,i),this.Ai=t+"main",this.serializer=new Eg(c),this.Ri=new Io(this.Ai,this.hi,new Gb(this.serializer)),this.$r=new bb,this.Ur=new Mb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tR(this.serializer),this.Gr=new _b,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,g===!1&&dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,k_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new xn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>V(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>V(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>V(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Po(e))return B("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return zl(e).get("owner").next(t=>k.resolve(this.vi(t)))}Ci(e){return eg(e).delete(this.clientId)}Fi(){return V(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Mt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return k.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?k.resolve(!0):zl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,k_);return!1}}return!(!this.networkEnabled||!this.inForeground)||eg(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&B("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return V(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new td(e,xn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>eg(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ag.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Cg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){B("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?VU:c===16?FU:c===15?B0:c===14?cM:c===13?aM:c===12?OU:c===11?sM:void ee()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new td(a,this.Qr?this.Qr.next():xn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(F.FAILED_PRECONDITION,nM);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return zl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(F.FAILED_PRECONDITION,k_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zl(e).put("owner",t)}static D(){return Io.D()}bi(e){let t=zl(e);return t.get("owner").next(r=>this.vi(r)?(B("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):k.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;qm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return B("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){dt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function zl(n){return Mt(n,"owner")}function eg(n){return Mt(n,"clientMetadata")}function Q0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Kb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Qb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Pg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qm()?8:rM(Nu())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Qb;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ic()<=Ir.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(Ic()<=Ir.DEBUG&&B("QueryEngine","Query:",Cc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ic()<=Ir.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(t))):k.resolve())}Yi(e,t){if(ux(t))return k.resolve(null);let r=an(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vg(t,null,"F"),r=an(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,a);return this.ns(t,d,s,c.readTime)?this.Yi(e,vg(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return ux(t)||i.isEqual(se.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?k.resolve(null):(Ic()<=Ir.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cc(t)),this.rs(e,s,t,eM(i,-1)).next(a=>a))})}ts(e,t){let r=new Ge(EM(e));return t.forEach((i,o)=>{Id(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ic()<=Ir.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Cc(t)),this.Ji.getDocumentsMatchingQuery(e,t,qn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Yb=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Je(fe),this._s=new Hr(o=>Ls(o),bd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function nR(n,e,t,r){return new Yb(n,e,t,r)}function rR(n,e){return V(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ge();for(let d of i){s.push(d.batchId);for(let g of d.mutations)c=c.add(g.key)}for(let d of o){a.push(d.batchId);for(let g of d.mutations)c=c.add(g.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:a}))})})})}function m$(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,g){let p=d.batch,w=p.keys(),b=k.resolve();return w.forEach(M=>{b=b.next(()=>g.getEntry(c,M)).next(P=>{let R=d.docVersions.get(M);re(R!==null),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),g.addEntry(P)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iR(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function y$(n,e){let t=K(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((g,p)=>{let w=i.get(p);if(!w)return;a.push(t.Ur.removeMatchingKeys(o,g.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,g.addedDocuments,p)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),i=i.insert(p,b),function(P,R,U){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,b,g)&&a.push(t.Ur.updateTargetData(o,b))});let c=wn(),d=ge();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),a.push(oR(o,s,e.documentUpdates).next(g=>{c=g.Ps,d=g.Is})),!r.isEqual(se.min())){let g=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(g)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.os=i,o))}function oR(n,e,t){let r=ge(),i=ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wn();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function v$(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uc(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new jc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function $c(n,e,t){return V(this,null,function*(){let r=K(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Po(s))throw s;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kg(n,e,t){let r=K(n),i=se.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,g){let p=K(c),w=p._s.get(g);return w!==void 0?k.resolve(p.os.get(w)):p.Ur.getTargetData(d,g)}(r,s,an(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:ge())).next(a=>(cR(r,bM(e),a),{documents:a,Ts:o})))}function sR(n,e){let t=K(n),r=K(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function aR(n,e){let t=K(n),r=t.us.get(e)||se.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,eM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(cR(t,e,i),i))}function cR(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function w$(n,e,t,r){return V(this,null,function*(){let i=K(n),o=ge(),s=wn();for(let d of t){let g=e.Es(d.metadata.name);d.document&&(o=o.add(g));let p=e.ds(d);p.setReadTime(e.As(d.metadata.readTime)),s=s.insert(g,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Uc(i,function(g){return an(Yc(Pe.fromString(`__bundle__/docs/${g}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>oR(d,a,s).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,c.targetId).next(()=>i.Ur.addMatchingKeys(d,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})}function _$(r,i){return V(this,arguments,function*(n,e,t=ge()){let o=yield Uc(n,an(W0(e.bundledQuery))),s=K(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ft(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let d=o.withResumeToken(pt.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(d.targetId,d),s.Ur.updateTargetData(a,d).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function Vx(n,e){return`firestore_clients_${n}_${e}`}function Lx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function O_(n,e){return`firestore_targets_${n}_${e}`}var Og=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new j(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(dt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new j(r.error.code,r.error.message))),o?new n(e,r.state,i):(dt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Fg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=q0();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=iM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(dt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Zb=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(dt("SharedClientState",`Failed to parse online state: ${e}`),null)}},pd=class{constructor(){this.activeTargetIds=q0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Jl=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Je(fe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=Vx(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new pd),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return V(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Vx(this.persistenceKey,r));if(i){let o=Fg.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(O_(this.persistenceKey,e));if(i){let o=Zl.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(O_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return B("SharedClientState","READ",e,t),t}setItem(e,t){B("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){B("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(B("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>V(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=xn.oe;if(o!=null)try{let a=JSON.parse(o);re(typeof a=="number"),s=a}catch(a){dt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==xn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Og(this.currentUser,e,t,r),o=Lx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=Lx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=O_(this.persistenceKey,e),o=new Zl(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Fg.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Og.Rs(new bt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Zl.Rs(i,t)}Ls(e){return Zb.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return V(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);B("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=q0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Vg=class{constructor(){this.so=new pd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jb=class{_o(e){}shutdown(){}};var Lg=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tg=null;function F_(){return tg===null?tg=function(){return 268435456+Math.round(2147483648*Math.random())}():tg++,"0x"+tg.toString(16)}var b$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Xb=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Kt="WebChannelConnection",e0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=F_(),c=this.xo(t,r.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,c,d,i).then(g=>(B("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw lr("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",c,"request:",i),g})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=b$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=F_();return new Promise((s,a)=>{let c=new A_;c.setWithCredentials(!0),c.listenOnce(x_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ul.NO_ERROR:let g=c.getResponseJson();B(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),s(g);break;case Ul.TIMEOUT:B(Kt,`RPC '${e}' ${o} timed out`),a(new j(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ul.HTTP_ERROR:let p=c.getStatus();if(B(Kt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let M=function(R){let U=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(U)>=0?U:F.UNKNOWN}(b.status);a(new j(M,b.message))}else a(new j(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{B(Kt,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);B(Kt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=F_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=N_(),a=R_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let g=o.join("");B(Kt,`Creating RPC '${e}' stream ${i}: ${g}`,c);let p=s.createWebChannel(g,c),w=!1,b=!1,M=new Xb({Io:R=>{b?B(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||(B(Kt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),w=!0),B(Kt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),P=(R,U,Y)=>{R.listen(U,H=>{try{Y(H)}catch(ne){setTimeout(()=>{throw ne},0)}})};return P(p,vc.EventType.OPEN,()=>{b||(B(Kt,`RPC '${e}' stream ${i} transport opened.`),M.yo())}),P(p,vc.EventType.CLOSE,()=>{b||(b=!0,B(Kt,`RPC '${e}' stream ${i} transport closed`),M.So())}),P(p,vc.EventType.ERROR,R=>{b||(b=!0,lr(Kt,`RPC '${e}' stream ${i} transport errored:`,R),M.So(new j(F.UNAVAILABLE,"The operation could not be completed")))}),P(p,vc.EventType.MESSAGE,R=>{var U;if(!b){let Y=R.data[0];re(!!Y);let H=Y,ne=H.error||((U=H[0])===null||U===void 0?void 0:U.error);if(ne){B(Kt,`RPC '${e}' stream ${i} received error:`,ne);let ae=ne.status,ie=function(I){let S=wt[I];if(S!==void 0)return OM(S)}(ae),D=ne.message;ie===void 0&&(ie=F.INTERNAL,D="Unknown error status: "+ae+" with message "+ne.message),b=!0,M.So(new j(ie,D)),p.close()}else B(Kt,`RPC '${e}' stream ${i} received:`,Y),M.bo(Y)}}),P(a,M_.STAT_EVENT,R=>{R.stat===Zp.PROXY?B(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Zp.NOPROXY&&B(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function uR(){return typeof window<"u"?window:null}function sg(){return typeof document<"u"?document:null}function Cd(n){return new gb(n,!0)}var gd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var jg=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gd(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return V(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return V(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return V(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(dt(t.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>V(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},t0=class extends jg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=o$(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?ft(s.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=vb(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=mg(c)?{documents:HM(o,c)}:{query:qM(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=VM(o,s.resumeToken);let d=mb(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=Lc(o,s.snapshotVersion.toTimestamp());let d=mb(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=a$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=vb(this.serializer),t.removeTarget=e,this.a_(t)}},n0=class extends jg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=s$(e.writeResults,e.commitTime),r=ft(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=vb(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>dd(this.serializer,r))};this.a_(t)}};var r0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,yb(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(F.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,yb(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(F.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},i0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(dt(t),this.D_=!1):B("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var o0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>V(this,null,function*(){ko(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return V(this,null,function*(){let d=K(c);d.L_.add(4),yield Zc(d),d.q_.set("Unknown"),d.L_.delete(4),yield Dd(d)})}(this))}))}),this.q_=new i0(r,i)}};function Dd(n){return V(this,null,function*(){if(ko(n))for(let e of n.B_)yield e(!0)})}function Zc(n){return V(this,null,function*(){for(let e of n.B_)yield e(!1)})}function sm(n,e){let t=K(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),J0(t)?Z0(t):Xc(t).r_()&&Y0(t,e))}function Hc(n,e){let t=K(n),r=Xc(t);t.N_.delete(e),r.r_()&&lR(t,e),t.N_.size===0&&(r.r_()?r.o_():ko(t)&&t.q_.set("Unknown"))}function Y0(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xc(n).A_(e)}function lR(n,e){n.Q_.xe(e),Xc(n).R_(e)}function Z0(n){n.Q_=new pb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Xc(n).start(),n.q_.v_()}function J0(n){return ko(n)&&!Xc(n).n_()&&n.N_.size>0}function ko(n){return K(n).L_.size===0}function dR(n){n.Q_=void 0}function E$(n){return V(this,null,function*(){n.q_.set("Online")})}function I$(n){return V(this,null,function*(){n.N_.forEach((e,t)=>{Y0(n,e)})})}function C$(n,e){return V(this,null,function*(){dR(n),J0(n)?(n.q_.M_(e),Z0(n)):n.q_.set("Unknown")})}function D$(n,e,t){return V(this,null,function*(){if(n.q_.set("Online"),e instanceof _g&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bg(n,r)}else if(e instanceof Rc?n.Q_.Ke(e):e instanceof wg?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield iR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let g=o.N_.get(d);g&&o.N_.set(d,g.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let g=o.N_.get(c);if(!g)return;o.N_.set(c,g.withResumeToken(pt.EMPTY_BYTE_STRING,g.snapshotVersion)),lR(o,c);let p=new jc(g.target,c,d,g.sequenceNumber);Y0(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Bg(n,r)}})}function Bg(n,e,t){return V(this,null,function*(){if(!Po(e))throw e;n.L_.add(1),yield Zc(n),n.q_.set("Offline"),t||(t=()=>iR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Dd(n)}))})}function hR(n,e){return e().catch(t=>Bg(n,t,e))}function Jc(n){return V(this,null,function*(){let e=K(n),t=Ro(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;T$(e);)try{let i=yield v$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,S$(e,i)}catch(i){yield Bg(e,i)}fR(e)&&pR(e)})}function T$(n){return ko(n)&&n.O_.length<10}function S$(n,e){n.O_.push(e);let t=Ro(n);t.r_()&&t.V_&&t.m_(e.mutations)}function fR(n){return ko(n)&&!Ro(n).n_()&&n.O_.length>0}function pR(n){Ro(n).start()}function A$(n){return V(this,null,function*(){Ro(n).p_()})}function x$(n){return V(this,null,function*(){let e=Ro(n);for(let t of n.O_)e.m_(t.mutations)})}function M$(n,e,t){return V(this,null,function*(){let r=n.O_.shift(),i=db.from(r,e,t);yield hR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Jc(n)})}function R$(n,e){return V(this,null,function*(){e&&Ro(n).V_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return kM(s)&&s!==F.ABORTED}(i.code)){let o=r.O_.shift();Ro(r).s_(),yield hR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Jc(r)}})}(n,e)),fR(n)&&pR(n)})}function jx(n,e){return V(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=ko(t);t.L_.add(3),yield Zc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Dd(t)})}function s0(n,e){return V(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield Dd(t)):e||(t.L_.add(2),yield Zc(t),t.q_.set("Unknown"))})}function Xc(n){return n.K_||(n.K_=function(t,r,i){let o=K(t);return o.w_(),new t0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:E$.bind(null,n),Ro:I$.bind(null,n),mo:C$.bind(null,n),d_:D$.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.K_.s_(),J0(n)?Z0(n):n.q_.set("Unknown")):(yield n.K_.stop(),dR(n))}))),n.K_}function Ro(n){return n.U_||(n.U_=function(t,r,i){let o=K(t);return o.w_(),new n0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:A$.bind(null,n),mo:R$.bind(null,n),f_:x$.bind(null,n),g_:M$.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.U_.s_(),yield Jc(n)):(yield n.U_.stop(),n.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var a0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function eu(n,e){if(dt("AsyncQueue",`${e}: ${n}`),Po(n))return new j(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Ug=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=Gl(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $g=class{constructor(){this.W_=new Je(Q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},qc=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ug.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var c0=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},u0=class{constructor(){this.queries=Bx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=K(t),o=i.queries;i.queries=Bx(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(F.ABORTED,"Firestore shutting down"))}};function Bx(){return new Hr(n=>_M(n),Ed)}function X0(n,e){return V(this,null,function*(){let t=K(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new c0,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=eu(s,`Initialization of query '${Cc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&tE(t)})}function eE(n,e){return V(this,null,function*(){let t=K(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function N$(n,e){let t=K(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&tE(t)}function P$(n,e,t){let r=K(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function tE(n){n.Y_.forEach(e=>{e.next()})}var l0,Ux;(Ux=l0||(l0={})).ea="default",Ux.Cache="cache";var md=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==l0.Cache}};var d0=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Hg=class{constructor(e){this.serializer=e}Es(e){return jr(this.serializer,e)}ds(e){return e.metadata.exists?$M(this.serializer,e.document,!1):Et.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ft(e)}},h0=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Hg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ge()).add(o);t.set(s,a)}}return t}complete(){return V(this,null,function*(){let e=yield w$(this.localStore,new Hg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield _$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function gR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var qg=class{constructor(e){this.key=e}},zg=class{constructor(e){this.key=e}},Gg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=EM(e),this.Ra=new Ug(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new $g,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,p)=>{let w=i.get(g),b=Id(this.query,p)?p:null,M=!!w&&this.mutatedKeys.has(w.key),P=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),R=!1;w&&b?w.data.isEqual(b.data)?M!==P&&(r.track({type:3,doc:b}),R=!0):this.ga(w,b)||(r.track({type:2,doc:b}),R=!0,(c&&this.Aa(b,c)>0||d&&this.Aa(b,d)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),R=!0):w&&!b&&(r.track({type:1,doc:w}),R=!0,(c||d)&&(a=!0)),R&&(b?(s=s.add(b),o=P?o.add(g):o.delete(g)):(s=s.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let g=this.query.limitType==="F"?s.last():s.first();s=s.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((g,p)=>function(b,M){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return P(b)-P(M)}(g.type,p.type)||this.Aa(g.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new qc(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $g,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qg(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return qc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},f0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},p0=class{constructor(e){this.key=e,this.va=!1}},g0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hr(a=>_M(a),Ed),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(Q.comparator),this.Na=new Map,this.La=new fd,this.Ba={},this.ka=new Map,this.qa=Bc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function k$(n,e,t=!0){return V(this,null,function*(){let r=am(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield mR(r,e,t,!0),i})}function O$(n,e){return V(this,null,function*(){let t=am(n);yield mR(t,e,!0,!1)})}function mR(n,e,t,r){return V(this,null,function*(){let i=yield Uc(n.localStore,an(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield nE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&sm(n.remoteStore,i),a})}function nE(n,e,t,r,i){return V(this,null,function*(){n.Ka=(p,w,b)=>function(P,R,U,Y){return V(this,null,function*(){let H=R.view.ma(U);H.ns&&(H=yield kg(P.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,H)));let ne=Y&&Y.targetChanges.get(R.targetId),ae=Y&&Y.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(H,P.isPrimaryClient,ne,ae);return m0(P,R.targetId,ie.wa),ie.snapshot})}(n,p,w,b);let o=yield kg(n.localStore,e,!0),s=new Gg(e,o.Ts),a=s.ma(o.documents),c=ud.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);m0(n,t,d.wa);let g=new f0(e,t,s);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function F$(n,e,t){return V(this,null,function*(){let r=K(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ed(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $c(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hc(r.remoteStore,i.targetId),zc(r,i.targetId)}).catch(No))):(zc(r,i.targetId),yield $c(r.localStore,i.targetId,!0))})}function V$(n,e){return V(this,null,function*(){let t=K(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hc(t.remoteStore,r.targetId))})}function L$(n,e,t){return V(this,null,function*(){let r=sE(n);try{let i=yield function(s,a){let c=K(s),d=it.now(),g=a.reduce((b,M)=>b.add(M.key),ge()),p,w;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let M=wn(),P=ge();return c.cs.getEntries(b,g).next(R=>{M=R,M.forEach((U,Y)=>{Y.isValidDocument()||(P=P.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,M)).next(R=>{p=R;let U=[];for(let Y of a){let H=JU(Y,p.get(Y.key).overlayedDocument);H!=null&&U.push(new hr(Y.key,H,fM(H.value.mapValue),ut.exists(!0)))}return c.mutationQueue.addMutationBatch(b,d,U,a)}).next(R=>{w=R;let U=R.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(b,R.batchId,U)})}).then(()=>({batchId:w.batchId,changes:CM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new Je(fe)),d=d.insert(a,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,t),yield Ei(r,i.changes),yield Jc(r.remoteStore)}catch(i){let o=eu(i,"Failed to persist write");t.reject(o)}})}function yR(n,e){return V(this,null,function*(){let t=K(n);try{let r=yield y$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?re(s.va):i.removedDocuments.size>0&&(re(s.va),s.va=!1))}),yield Ei(t,r,e)}catch(r){yield No(r)}})}function $x(n,e,t){let r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=K(s);c.onlineState=a;let d=!1;c.queries.forEach((g,p)=>{for(let w of p.j_)w.Z_(a)&&(d=!0)}),d&&tE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j$(n,e,t){return V(this,null,function*(){let r=K(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Je(Q.comparator);s=s.insert(o,Et.newNoDocument(o,se.min()));let a=ge().add(o),c=new cd(se.min(),new Map,new Je(fe),s,a);yield yR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),oE(r)}else yield $c(r.localStore,e,!1).then(()=>zc(r,e,t)).catch(No)})}function B$(n,e){return V(this,null,function*(){let t=K(n),r=e.batch.batchId;try{let i=yield m$(t.localStore,e);iE(t,r,null),rE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ei(t,i)}catch(i){yield No(i)}})}function U$(n,e,t){return V(this,null,function*(){let r=K(n);try{let i=yield function(s,a){let c=K(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(re(p!==null),g=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>c.localDocuments.getDocuments(d,g))})}(r.localStore,e);iE(r,e,t),rE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ei(r,i)}catch(i){yield No(i)}})}function $$(n,e){return V(this,null,function*(){let t=K(n);ko(t.remoteStore)||B("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=K(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=eu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function rE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function iE(n,e,t){let r=K(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function zc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||vR(n,r)})}function vR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Hc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),oE(n))}function m0(n,e,t){for(let r of t)r instanceof qg?(n.La.addReference(r.key,e),H$(n,r)):r instanceof zg?(B("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||vR(n,r.key)):ee()}function H$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(B("SyncEngine","New document in limbo: "+t),n.xa.add(r),oE(n))}function oE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Q(Pe.fromString(e)),r=n.qa.next();n.Na.set(r,new p0(t)),n.Oa=n.Oa.insert(t,r),sm(n.remoteStore,new jc(an(Yc(t.path)),r,"TargetPurposeLimboResolution",xn.oe))}}function Ei(n,e,t){return V(this,null,function*(){let r=K(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(g=t?.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);let p=Kb.Wi(c.targetId,d);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,d){return V(this,null,function*(){let g=K(c);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(d,w=>k.forEach(w.$i,b=>g.persistence.referenceDelegate.addReference(p,w.targetId,b)).next(()=>k.forEach(w.Ui,b=>g.persistence.referenceDelegate.removeReference(p,w.targetId,b)))))}catch(p){if(!Po(p))throw p;B("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let w=p.targetId;if(!p.fromCache){let b=g.os.get(w),M=b.snapshotVersion,P=b.withLastLimboFreeSnapshotVersion(M);g.os=g.os.insert(w,P)}}})}(r.localStore,o))})}function q$(n,e){return V(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield rR(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(F.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ei(t,r.hs)}})}function z$(n,e){let t=K(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function G$(n,e){return V(this,null,function*(){let t=K(n),r=yield kg(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&m0(t,e.targetId,i.wa),i})}function W$(n,e){return V(this,null,function*(){let t=K(n);return aR(t.localStore,e).then(r=>Ei(t,r))})}function K$(n,e,t,r){return V(this,null,function*(){let i=K(n),o=yield function(a,c){let d=K(a),g=K(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",p=>g.Mn(p,c).next(w=>w?d.localDocuments.getDocuments(p,w):k.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Jc(i.remoteStore):t==="acknowledged"||t==="rejected"?(iE(i,e,r||null),rE(i,e),function(a,c){K(K(a).mutationQueue).On(c)}(i.localStore,e)):ee(),yield Ei(i,o)):B("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Q$(n,e){return V(this,null,function*(){let t=K(n);if(am(t),sE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Hx(t,r.toArray());t.Qa=!0,yield s0(t.remoteStore,!0);for(let o of i)sm(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(zc(t,s),$c(t.localStore,s,!0))),Hc(t.remoteStore,s)}),yield i,yield Hx(t,r),function(s){let a=K(s);a.Na.forEach((c,d)=>{Hc(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new Je(Q.comparator)}(t),t.Qa=!1,yield s0(t.remoteStore,!1)}})}function Hx(n,e,t){return V(this,null,function*(){let r=K(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Uc(r.localStore,an(c[0]));for(let d of c){let g=r.Fa.get(d),p=yield G$(r,g);p.snapshot&&o.push(p.snapshot)}}else{let d=yield sR(r.localStore,s);a=yield Uc(r.localStore,d),yield nE(r,wR(d),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function wR(n){return wM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Y$(n){return function(t){return K(K(t).persistence).Qi()}(K(n).localStore)}function Z$(n,e,t,r){return V(this,null,function*(){let i=K(n);if(i.Qa)return void B("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield aR(i.localStore,bM(o[0])),a=cd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",pt.EMPTY_BYTE_STRING);yield Ei(i,s,a);break}case"rejected":yield $c(i.localStore,e,!0),zc(i,e,r);break;default:ee()}})}function J$(n,e,t){return V(this,null,function*(){let r=am(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){B("SyncEngine","Adding an already active target "+i);continue}let o=yield sR(r.localStore,i),s=yield Uc(r.localStore,o);yield nE(r,wR(o),s.targetId,!1,s.resumeToken),sm(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield $c(r.localStore,i,!1).then(()=>{Hc(r.remoteStore,i),zc(r,i)}).catch(No))}})}function am(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j$.bind(null,e),e.Ca.d_=N$.bind(null,e.eventManager),e.Ca.$a=P$.bind(null,e.eventManager),e}function sE(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U$.bind(null,e),e}function X$(n,e,t){let r=K(n);(function(o,s,a){return V(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(b,M){let P=K(b),R=ft(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",U=>P.Gr.getBundleMetadata(U,M.id)).then(U=>!!U&&U.createTime.compareTo(R)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(gR(c));let d=new h0(c,o.localStore,s.serializer),g=yield s.Ua();for(;g;){let w=yield d.la(g);w&&a._updateProgress(w),g=yield s.Ua()}let p=yield d.complete();return yield Ei(o,p.Ia,void 0),yield function(b,M){let P=K(b);return P.persistence.runTransaction("Save bundle","readwrite",R=>P.Gr.saveBundleMetadata(R,M))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return lr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var y0=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return V(this,null,function*(){this.serializer=Cd(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return nR(this.persistence,new Pg,t.initialUser,this.serializer)}Ga(t){return new Rg(Ng.Zr,this.serializer)}Wa(t){return new Vg}terminate(){return V(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Wg=class n extends y0{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){yield $m(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield sE(this.Ja.syncEngine),yield Jc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return nR(this.persistence,new Pg,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Nb(r,e.asyncQueue,t)}Ha(e,t){let r=new Q_(t,this.persistence);return new K_(e.asyncQueue,r)}Ga(e){let t=Q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Wb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uR(),sg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Vg}},v0=class n extends Wg{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return V(this,null,function*(){yield $m(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Jl&&(this.sharedClientState.syncEngine={no:K$.bind(null,t),ro:Z$.bind(null,t),io:J$.bind(null,t),Qi:Y$.bind(null,t),eo:W$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>V(this,null,function*(){yield Q$(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=uR();if(!Jl.D(t))throw new j(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},aE=(()=>{class n{initialize(t,r){return V(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$x(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q$.bind(null,this.syncEngine),yield s0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new u0}()}createDatastore(t){let r=Cd(t.databaseInfo.databaseId),i=function(s){return new e0(s)}(t.databaseInfo);return function(s,a,c,d){return new r0(s,a,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new o0(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>$x(this.syncEngine,r,0),function(){return Lg.D()?new Lg:new Jb}())}createSyncEngine(t,r){return function(o,s,a,c,d,g,p){let w=new g0(o,s,a,c,d,g);return p&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return V(this,null,function*(){var t,r;yield function(o){return V(this,null,function*(){let s=K(o);B("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Zc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function qx(n,e=10240){let t=0;return{read(){return V(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return V(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Gc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var w0=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new xt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return V(this,null,function*(){return this.metadata.promise})}Ua(){return V(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return V(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new d0(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return V(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return V(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return V(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var _0=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return V(this,null,function*(){let s=K(i),a={documents:o.map(p=>ld(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Pe.emptyPath(),a,o.length),d=new Map;c.forEach(p=>{let w=i$(s.serializer,p);d.set(w.key.toString(),w)});let g=[];return o.forEach(p=>{let w=d.get(p.toString());re(!!w),g.push(w)}),g})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Q.fromPath(r);this.mutations.push(new od(i,this.precondition(i)))}),yield function(r,i){return V(this,null,function*(){let o=K(r),s={writes:i.map(a=>dd(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ee();t=se.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new j(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(se.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(se.min()))throw new j(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var b0=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new gd(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>V(this,null,function*(){let e=new _0(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!_d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kM(t)}return!1}};var E0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>V(this,null,function*(){B("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=eu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function V_(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(this,null,function*(){r.isEqual(i)||(yield rR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function zx(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cE(n);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jx(e.remoteStore,i)),n._onlineComponents=e})}function cE(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield V_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;lr("Error using user provided cache. Falling back to memory cache: "+t),yield V_(n,new y0)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield V_(n,new y0);return n._offlineComponents})}function cm(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield zx(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield zx(n,new aE))),n._onlineComponents})}function _R(n){return cE(n).then(e=>e.persistence)}function uE(n){return cE(n).then(e=>e.localStore)}function bR(n){return cm(n).then(e=>e.remoteStore)}function lE(n){return cm(n).then(e=>e.syncEngine)}function eH(n){return cm(n).then(e=>e.datastore)}function Wc(n){return V(this,null,function*(){let e=yield cm(n),t=e.eventManager;return t.onListen=k$.bind(null,e.syncEngine),t.onUnlisten=F$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=O$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=V$.bind(null,e.syncEngine),t})}function tH(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield _R(n),t=yield bR(n);return e.setNetworkEnabled(!0),function(i){let o=K(i);return o.L_.delete(0),Dd(o)}(t)}))}function nH(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield _R(n),t=yield bR(n);return e.setNetworkEnabled(!1),function(i){return V(this,null,function*(){let o=K(i);o.L_.add(0),yield Zc(o),o.q_.set("Offline")})}(t)}))}function rH(n,e){let t=new xt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield function(d,g){let p=K(d);return p.persistence.runTransaction("read document","readonly",w=>p.localDocuments.getDocument(w,g))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new j(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=eu(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield uE(n),e,t)})),t.promise}function ER(n,e,t={}){let r=new xt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,d){let g=new Gc({next:w=>{g.Za(),s.enqueueAndForget(()=>eE(o,p));let b=w.docs.has(a);!b&&w.fromCache?d.reject(new j(F.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&c&&c.source==="server"?d.reject(new j(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),p=new md(Yc(a.path),g,{includeMetadataChanges:!0,_a:!0});return X0(o,p)}(yield Wc(n),n.asyncQueue,e,t,r)})),r.promise}function iH(n,e){let t=new xt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield kg(i,o,!0),c=new Gg(o,a.Ts),d=c.ma(a.documents),g=c.applyChanges(d,!1);s.resolve(g.snapshot)}catch(a){let c=eu(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield uE(n),e,t)})),t.promise}function IR(n,e,t={}){let r=new xt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,d){let g=new Gc({next:w=>{g.Za(),s.enqueueAndForget(()=>eE(o,p)),w.fromCache&&c.source==="server"?d.reject(new j(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),p=new md(a,g,{includeMetadataChanges:!0,_a:!0});return X0(o,p)}(yield Wc(n),n.asyncQueue,e,t,r)})),r.promise}function oH(n,e){let t=new Gc(e);return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){K(i).Y_.add(o),o.next()}(yield Wc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){K(i).Y_.delete(o)}(yield Wc(n),t)}))}}function sH(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?FM().encode(s):s,function(g,p){return new w0(g,p)}(function(g,p){if(g instanceof Uint8Array)return qx(g,p);if(g instanceof ArrayBuffer)return qx(new Uint8Array(g),p);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Cd(e));n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){X$(yield lE(n),i,r)}))}function aH(n,e){return n.asyncQueue.enqueue(()=>V(this,null,function*(){return function(r,i){let o=K(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield uE(n),e)}))}function CR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Gx=new Map;function dE(n,e,t){if(!t)throw new j(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hE(n,e,t,r){if(e===!0&&r===!0)throw new j(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Wx(n){if(!Q.isDocumentKey(n))throw new j(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kx(n){if(Q.isDocumentKey(n))throw new j(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function um(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee()}function Ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=um(n);throw new j(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DR(n,e){if(e<=0)throw new j(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Kg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$s=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L_;switch(r.type){case"firstParty":return new $_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Gx.get(t);r&&(B("ComponentProvider","Removing Datastore"),Gx.delete(t),r.terminate())}(this),Promise.resolve()}};function TR(n,e,t,r={}){var i;let o=(n=Ve(n,$s))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=bt.MOCK_USER;else{a=JE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new j(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new bt(d)}n._authCredentials=new j_(new ag(a,c))}}var Ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ke=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Br=class n extends Ht{constructor(e,t,r){super(e,t,Yc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function fE(n,e,...t){if(n=rt(n),dE("collection","path",e),n instanceof $s){let r=Pe.fromString(e,...t);return Kx(r),new Br(n,null,r)}{if(!(n instanceof Ke||n instanceof Br))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return Kx(r),new Br(n.firestore,null,r)}}function SR(n,e){if(n=Ve(n,$s),dE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ht(n,null,function(r){return new dr(Pe.emptyPath(),r)}(e))}function Td(n,e,...t){if(n=rt(n),arguments.length===1&&(e=cg.newId()),dE("doc","path",e),n instanceof $s){let r=Pe.fromString(e,...t);return Wx(r),new Ke(n,null,new Q(r))}{if(!(n instanceof Ke||n instanceof Br))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return Wx(r),new Ke(n.firestore,n instanceof Br?n.converter:null,new Q(r))}}function pE(n,e){return n=rt(n),e=rt(e),(n instanceof Ke||n instanceof Br)&&(e instanceof Ke||e instanceof Br)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gE(n,e){return n=rt(n),e=rt(e),n instanceof Ht&&e instanceof Ht&&n.firestore===e.firestore&&Ed(n._query,e._query)&&n.converter===e.converter}var Qg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gd(this,"async_queue_retry"),this.Vu=()=>{let r=sg();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new xt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return V(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Po(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw dt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=a0.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}wu(){return V(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function I0(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var C0=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var AR=-1,ot=class extends $s{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qg(e),this._firestoreClient=void 0,yield e}})}};function qt(n){if(n._terminated)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xR(n),n._firestoreClient}function xR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,d,g){return new Y_(a,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,CR(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new E0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function MR(n,e){lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return NR(n,aE.provider,{build:r=>new Wg(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function RR(n){return V(this,null,function*(){lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();NR(n,aE.provider,{build:t=>new v0(t,e.cacheSizeBytes)})})}function NR(n,e,t){if((n=Ve(n,ot))._firestoreClient||n._terminated)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new j(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xR(n)}function PR(n){if(n._initialized&&!n._terminated)throw new j(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new xt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{yield function(r){return V(this,null,function*(){if(!Io.D())return Promise.resolve();let i=r+"main";yield Io.delete(i)})}(Q0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function kR(n){return function(t){let r=new xt;return t.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return $$(yield lE(t),r)})),r.promise}(qt(n=Ve(n,ot)))}function OR(n){return tH(qt(n=Ve(n,ot)))}function FR(n){return nH(qt(n=Ve(n,ot)))}function VR(n,e){let t=qt(n=Ve(n,ot)),r=new C0;return sH(t,n._databaseId,e,r),r}function LR(n,e){return aH(qt(n=Ve(n,ot)),e).then(t=>t?new Ht(n,null,t.query):null)}var qr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(pt.fromBase64String(e))}catch(t){throw new j(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _i=class{constructor(e){this._methodName=e}};var Hs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}};var yd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var cH=/^__.*__$/,D0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new xo(e,this.data,t,this.fieldTransforms)}},Yg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function jR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}var Zg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jR(this.Cu)&&cH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},T0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cd(e)}Qu(e,t,r,i=!1){return new Zg({Cu:e,methodName:t,qu:r,path:ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ws(n){let e=n._freezeSettings(),t=Cd(n._databaseId);return new T0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lm(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);vE("Data must be an object, but it was:",s,r);let a=$R(r,s),c,d;if(o.merge)c=new Mn(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let g=[];for(let p of o.mergeFields){let w=R0(e,p,t);if(!s.contains(w))throw new j(F.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);qR(g,w)||g.push(w)}c=new Mn(g),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new D0(new Qt(a),c,d)}var vd=class n extends _i{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function BR(n,e,t){return new Zg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var S0=class n extends _i{_toFieldTransform(e){return new js(e.path,new So)}isEqual(e){return e instanceof n}},A0=class n extends _i{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BR(this,e,!0),r=this.Ku.map(o=>Ks(o,t)),i=new vi(r);return new js(e.path,i)}isEqual(e){return e instanceof n&&zm(this.Ku,e.Ku)}},x0=class n extends _i{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BR(this,e,!0),r=this.Ku.map(o=>Ks(o,t)),i=new wi(r);return new js(e.path,i)}isEqual(e){return e instanceof n&&zm(this.Ku,e.Ku)}},M0=class n extends _i{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ao(e.serializer,SM(e.serializer,this.$u));return new js(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function mE(n,e,t,r){let i=n.Qu(1,e,t);vE("Data must be an object, but it was:",i,r);let o=[],s=Qt.empty();Gs(r,(c,d)=>{let g=wE(e,c,t);d=rt(d);let p=i.Nu(g);if(d instanceof vd)o.push(g);else{let w=Ks(d,p);w!=null&&(o.push(g),s.set(g,w))}});let a=new Mn(o);return new Yg(s,a,i.fieldTransforms)}function yE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[R0(e,r,t)],c=[i];if(o.length%2!=0)throw new j(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(R0(e,o[w])),c.push(o[w+1]);let d=[],g=Qt.empty();for(let w=a.length-1;w>=0;--w)if(!qR(d,a[w])){let b=a[w],M=c[w];M=rt(M);let P=s.Nu(b);if(M instanceof vd)d.push(b);else{let R=Ks(M,P);R!=null&&(d.push(b),g.set(b,R))}}let p=new Mn(d);return new Yg(g,p,s.fieldTransforms)}function UR(n,e,t,r=!1){return Ks(t,n.Qu(r?4:3,e))}function Ks(n,e){if(HR(n=rt(n)))return vE("Unsupported field value:",e,n),$R(n,e);if(n instanceof _i)return function(r,i){if(!jR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ks(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:Lc(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(i.serializer,o)}}if(r instanceof Hs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qr)return{bytesValue:VM(i.serializer,r._byteString)};if(r instanceof Ke){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:G0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yd)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return z0(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${um(r)}`)}(n,e)}function $R(n,e){let t={};return uM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,(r,i)=>{let o=Ks(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function HR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Hs||n instanceof qr||n instanceof Ke||n instanceof _i||n instanceof yd)}function vE(n,e,t){if(!HR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=um(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function R0(n,e,t){if((e=rt(e))instanceof fr)return e._internalPath;if(typeof e=="string")return wE(n,e);throw Jg("Field path arguments must be of type string or ",n,!1,void 0,t)}var uH=new RegExp("[~\\*/\\[\\]]");function wE(n,e,t){if(e.search(uH)>=0)throw Jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fr(...e.split("."))._internalPath}catch{throw Jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new j(F.INVALID_ARGUMENT,a+n+c)}function qR(n,e){return n.some(t=>t.isEqual(e))}var qs=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new N0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},N0=class extends qs{data(){return super.data()}};function dm(n,e){return typeof e=="string"?wE(n,e):e instanceof fr?e._internalPath:e._delegate._internalPath}function zR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wd=class{},zs=class extends wd{};function Ii(n,e,...t){let r=[];e instanceof wd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof P0).length,a=o.filter(c=>c instanceof Xg).length;if(s>1||s>0&&a>0)throw new j(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Xg=class n extends zs{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tN(e._query,t),new Ht(e.firestore,e.converter,ub(e._query,t))}_parse(e){let t=Ws(e.firestore);return function(o,s,a,c,d,g,p){let w;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new j(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Yx(p,g);let b=[];for(let M of p)b.push(Qx(c,o,M));w={arrayValue:{values:b}}}else w=Qx(c,o,p)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Yx(p,g),w=UR(a,s,p,g==="in"||g==="not-in");return Te.create(d,g,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function GR(n,e,t){let r=e,i=dm("where",n);return Xg._create(i,r,t)}var P0=class n extends wd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)tN(s,c),s=ub(s,c)}(e._query,t),new Ht(e.firestore,e.converter,ub(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var k0=class n extends zs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vs(o,s)}(e._query,this._field,this._direction);return new Ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new dr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function WR(n,e="asc"){let t=e,r=dm("orderBy",n);return k0._create(r,t)}var em=class n extends zs{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ht(e.firestore,e.converter,vg(e._query,this._limit,this._limitType))}};function KR(n){return DR("limit",n),em._create("limit",n,"F")}function QR(n){return DR("limitToLast",n),em._create("limitToLast",n,"L")}var tm=class n extends zs{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eN(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,function(i,o){return new dr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function YR(...n){return tm._create("startAt",n,!0)}function ZR(...n){return tm._create("startAfter",n,!1)}var nm=class n extends zs{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eN(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,function(i,o){return new dr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function JR(...n){return nm._create("endBefore",n,!1)}function XR(...n){return nm._create("endAt",n,!0)}function eN(n,e,t,r){if(t[0]=rt(t[0]),t[0]instanceof qs)return function(o,s,a,c,d){if(!c)throw new j(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let g=[];for(let p of Mc(o))if(p.field.isKeyField())g.push(Fs(s,c.key));else{let w=c.data.field(p.field);if(im(w))throw new j(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let b=p.field.canonicalString();throw new j(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}g.push(w)}return new $r(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ws(n.firestore);return function(s,a,c,d,g,p){let w=s.explicitOrderBy;if(g.length>w.length)throw new j(F.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let M=0;M<g.length;M++){let P=g[M];if(w[M].field.isKeyField()){if(typeof P!="string")throw new j(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof P}`);if(!H0(s)&&P.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${P}' contains a slash.`);let R=s.path.child(Pe.fromString(P));if(!Q.isDocumentKey(R))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let U=new Q(R);b.push(Fs(a,U))}else{let R=UR(c,d,P);b.push(R)}}return new $r(b,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Qx(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new j(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H0(e)&&t.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pe.fromString(t));if(!Q.isDocumentKey(r))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fs(n,new Q(r))}if(t instanceof Ke)return Fs(n,t._key);throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(t)}.`)}function Yx(n,e){if(!Array.isArray(n)||n.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tN(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Kc=class{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new yd(o)}convertGeoPoint(e){return new Hs(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=U0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){let t=yi(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);re(KM(r));let i=new Do(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||dt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function hm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var O0=class extends Kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,t)}};var mi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zn=class extends qs{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},bo=class extends zn{data(e={}){return super.data(e)}},pr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bo(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,g=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),g=s.indexOf(a.doc.key)),{type:lH(a.type),doc:c,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function lH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}function _E(n,e){return n instanceof zn&&e instanceof zn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pr&&e instanceof pr&&n._firestore===e._firestore&&gE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nN(n){n=Ve(n,Ke);let e=Ve(n.firestore,ot);return ER(qt(e),n._key).then(t=>CE(e,n,t))}var bi=class extends Kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,t)}};function rN(n){n=Ve(n,Ke);let e=Ve(n.firestore,ot),t=qt(e),r=new bi(e);return rH(t,n._key).then(i=>new zn(e,r,n._key,i,new mi(i!==null&&i.hasLocalMutations,!0),n.converter))}function iN(n){n=Ve(n,Ke);let e=Ve(n.firestore,ot);return ER(qt(e),n._key,{source:"server"}).then(t=>CE(e,n,t))}function oN(n){n=Ve(n,Ht);let e=Ve(n.firestore,ot),t=qt(e),r=new bi(e);return zR(n._query),IR(t,n._query).then(i=>new pr(e,r,n,i))}function sN(n){n=Ve(n,Ht);let e=Ve(n.firestore,ot),t=qt(e),r=new bi(e);return iH(t,n._query).then(i=>new pr(e,r,n,i))}function aN(n){n=Ve(n,Ht);let e=Ve(n.firestore,ot),t=qt(e),r=new bi(e);return IR(t,n._query,{source:"server"}).then(i=>new pr(e,r,n,i))}function bE(n,e,t){n=Ve(n,Ke);let r=Ve(n.firestore,ot),i=hm(n.converter,e,t);return tu(r,[lm(Ws(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ut.none())])}function EE(n,e,t,...r){n=Ve(n,Ke);let i=Ve(n.firestore,ot),o=Ws(i),s;return s=typeof(e=rt(e))=="string"||e instanceof fr?yE(o,"updateDoc",n._key,e,t,r):mE(o,"updateDoc",n._key,e),tu(i,[s.toMutation(n._key,ut.exists(!0))])}function cN(n){return tu(Ve(n.firestore,ot),[new Mo(n._key,ut.none())])}function uN(n,e){let t=Ve(n.firestore,ot),r=Td(n),i=hm(n.converter,e);return tu(t,[lm(Ws(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function IE(n,...e){var t,r,i;n=rt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||I0(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(I0(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,g;if(n instanceof Ke)d=Ve(n.firestore,ot),g=Yc(n._key.path),c={next:p=>{e[s]&&e[s](CE(d,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ve(n,Ht);d=Ve(p.firestore,ot),g=p._query;let w=new bi(d);c={next:b=>{e[s]&&e[s](new pr(d,w,p,b))},error:e[s+1],complete:e[s+2]},zR(n._query)}return function(w,b,M,P){let R=new Gc(P),U=new md(b,R,M);return w.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return X0(yield Wc(w),U)})),()=>{R.Za(),w.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return eE(yield Wc(w),U)}))}}(qt(d),g,a,c)}function lN(n,e){return oH(qt(n=Ve(n,ot)),I0(e)?e:{next:e})}function tu(n,e){return function(r,i){let o=new xt;return r.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return L$(yield lE(r),i,o)})),o.promise}(qt(n),e)}function CE(n,e,t){let r=t.docs.get(e._key),i=new bi(n);return new zn(n,i,e._key,r,new mi(t.hasPendingWrites,t.fromCache),e.converter)}var dH={maxAttempts:5};var rm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ws(e)}set(e,t,r){this._verifyNotCommitted();let i=wo(e,this._firestore),o=hm(i.converter,t,r),s=lm(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ut.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=wo(e,this._firestore),s;return s=typeof(t=rt(t))=="string"||t instanceof fr?yE(this._dataReader,"WriteBatch.update",o._key,t,r,i):mE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=wo(e,this._firestore);return this._mutations=this._mutations.concat(new Mo(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function wo(n,e){if((n=rt(n)).firestore!==e)throw new j(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var F0=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ws(t)}get(t){let r=wo(t,this._firestore),i=new O0(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ee();let s=o[0];if(s.isFoundDocument())return new qs(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new qs(this._firestore,i,r._key,null,r.converter);throw ee()})}set(t,r,i){let o=wo(t,this._firestore),s=hm(o.converter,r,i),a=lm(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=wo(t,this._firestore),a;return a=typeof(r=rt(r))=="string"||r instanceof fr?yE(this._dataReader,"Transaction.update",s._key,r,i,o):mE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=wo(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=wo(e,this._firestore),r=new bi(this._firestore);return super.get(e).then(i=>new zn(this._firestore,r,t._key,i._document,new mi(!1,!1),t.converter))}};function dN(n,e,t){n=Ve(n,ot);let r=Object.assign(Object.assign({},dH),t);return function(o){if(o.maxAttempts<1)throw new j(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new xt;return o.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){let d=yield eH(o);new b0(o.asyncQueue,d,a,s,c).au()})),c.promise}(qt(n),i=>e(new F0(n,i)),r)}function hN(){return new vd("deleteField")}function fN(){return new S0("serverTimestamp")}function pN(...n){return new A0("arrayUnion",n)}function gN(...n){return new x0("arrayRemove",n)}function mN(n){return new M0("increment",n)}(function(e,t=!0){(function(i){Qc=i})(tI),Pu(new Jo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ot(new B_(r.getProvider("auth-internal")),new q_(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new j(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(d.options.projectId,g)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),qi(KA,"4.7.3",e),qi(KA,"4.7.3","esm2017")})();var hH="@firebase/firestore-compat",fH="0.3.38";function ME(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yN(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function vN(){if(!lM())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fm=class n{constructor(e){this._delegate=e}static fromBase64String(e){return vN(),new n(qr.fromBase64String(e))}static fromUint8Array(e){return yN(),new n(qr.fromUint8Array(e))}toBase64(){return vN(),this._delegate.toBase64()}toUint8Array(){return yN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function DE(n){return pH(n,["next","error","complete"])}function pH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var TE=class{enableIndexedDbPersistence(e,t){return MR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return RR(e._delegate)}clearIndexedDbPersistence(e){return PR(e._delegate)}},pm=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Do||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){TR(this._delegate,e,t,r)}enableNetwork(){return OR(this._delegate)}disableNetwork(){return FR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return kR(this._delegate)}onSnapshotsInSync(e){return lN(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new iu(this,fE(this._delegate,e))}catch(t){throw cn(t,"collection()","Firestore.collection()")}}doc(e){try{return new zr(this,Td(this._delegate,e))}catch(t){throw cn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Js(this,SR(this._delegate,e))}catch(t){throw cn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return dN(this._delegate,t=>e(new gm(this,t)))}batch(){return qt(this._delegate),new mm(new rm(this._delegate,e=>tu(this._delegate,e)))}loadBundle(e){return VR(this._delegate,e)}namedQuery(e){return LR(this._delegate,e).then(t=>t?new Js(this,t):null)}},nu=class extends Kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new fm(new qr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return zr.forKey(t,this.firestore,null)}};function gH(n){Zx(n)}var gm=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}get(e){let t=Qs(e);return this._delegate.get(t).then(r=>new Ys(this._firestore,new zn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Qs(e);return r?(ME("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qs(e);return this._delegate.delete(t),this}},mm=class{constructor(e){this._delegate=e}set(e,t,r){let i=Qs(e);return r?(ME("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},ru=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new bo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zs(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new nu(e),t),i.set(t,o)),o}};ru.INSTANCES=new WeakMap;var zr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}static forPath(e,t,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ke(t._delegate,r,new Q(e)))}static forKey(e,t,r){return new n(t,new Ke(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new iu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new iu(this.firestore,fE(this._delegate,e))}catch(t){throw cn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=rt(e),e instanceof Ke?pE(this._delegate,e):!1}set(e,t){t=ME("DocumentReference.set",t);try{return t?bE(this._delegate,e,t):bE(this._delegate,e)}catch(r){throw cn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?EE(this._delegate,e):EE(this._delegate,e,t,...r)}catch(i){throw cn(i,"updateDoc()","DocumentReference.update()")}}delete(){return cN(this._delegate)}onSnapshot(...e){let t=wN(e),r=_N(e,i=>new Ys(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return IE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=rN(this._delegate):e?.source==="server"?t=iN(this._delegate):t=nN(this._delegate),t.then(r=>new Ys(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ru.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function cn(n,e,t){return n.message=n.message.replace(e,t),n}function wN(n){for(let e of n)if(typeof e=="object"&&!DE(e))return e;return{}}function _N(n,e){var t,r;let i;return DE(n[0])?i=n[0]:DE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ys=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _E(this._delegate,e._delegate)}},Zs=class extends Ys{data(e){let t=this._delegate.data(e);return this._delegate._converter||Jx(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Js=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}where(e,t,r){try{return new n(this.firestore,Ii(this._delegate,GR(e,t,r)))}catch(i){throw cn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Ii(this._delegate,WR(e,t)))}catch(r){throw cn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Ii(this._delegate,KR(e)))}catch(t){throw cn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Ii(this._delegate,QR(e)))}catch(t){throw cn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Ii(this._delegate,YR(...e)))}catch(t){throw cn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Ii(this._delegate,ZR(...e)))}catch(t){throw cn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Ii(this._delegate,JR(...e)))}catch(t){throw cn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Ii(this._delegate,XR(...e)))}catch(t){throw cn(t,"endAt()","Query.endAt()")}}isEqual(e){return gE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=sN(this._delegate):e?.source==="server"?t=aN(this._delegate):t=oN(this._delegate),t.then(r=>new Sd(this.firestore,new pr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=wN(e),r=_N(e,i=>new Sd(this.firestore,new pr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return IE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ru.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},SE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Sd=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zs(this._firestore,r))})}isEqual(e){return _E(this._delegate,e._delegate)}},iu=class n extends Js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new zr(this.firestore,e):null}doc(e){try{return e===void 0?new zr(this.firestore,Td(this._delegate)):new zr(this.firestore,Td(this._delegate,e))}catch(t){throw cn(t,"doc()","CollectionReference.doc()")}}add(e){return uN(this._delegate,e).then(t=>new zr(this.firestore,t))}isEqual(e){return pE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ru.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qs(n){return Ve(n,Ke)}var AE=class n{constructor(...e){this._delegate=new fr(...e)}static documentId(){return new n(ht.keyField().canonicalString())}isEqual(e){return e=rt(e),e instanceof fr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var xE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=fN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=hN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=pN(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=gN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=mN(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var mH={Firestore:pm,GeoPoint:Hs,Timestamp:it,Blob:fm,Transaction:gm,WriteBatch:mm,DocumentReference:zr,DocumentSnapshot:Ys,Query:Js,QueryDocumentSnapshot:Zs,QuerySnapshot:Sd,CollectionReference:iu,FieldPath:AE,FieldValue:xE,setLogLevel:gH,CACHE_SIZE_UNLIMITED:AR};function yH(n,e){n.INTERNAL.registerComponent(new Jo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mH)))}function vH(n){yH(n,(e,t)=>new pm(e,t,new TE)),n.registerVersion(hH,fH)}vH(In);function wH(n,e=ju){return new Ie(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function bN(n,e){return wH(n,e)}function _H(n,e){return bN(n,e).pipe(is(void 0),$u(),te(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function PE(n,e){return bN(n,e).pipe(te(t=>({payload:t,type:"query"})))}var ym=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=CN(r,t);return new wm(i,o,this.afs)}snapshotChanges(){return _H(this.ref,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return this.snapshotChanges().pipe(te(({payload:t})=>e.idField?Ee(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Fe(this.ref.get(e)).pipe(vn)}};function vm(n,e){return PE(n,e).pipe(is(void 0),$u(),te(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let d=o.find(p=>p.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function EN(n,e,t){return vm(n,t).pipe(rs((r,i)=>bH(r,i.map(o=>o.payload),e),[]),py(),te(r=>r.map(i=>({type:i.type,payload:i}))))}function bH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=EH(n,r))}),n}function RE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function EH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return RE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return RE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RE(n,e.oldIndex,1);break}return n}function IN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var wm=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(te(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(is(void 0),$u(),$t(([r,i])=>i.length>0||!r),te(([,r])=>r),vn)}auditTrail(e){return this.stateChanges(e).pipe(rs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=IN(e);return EN(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(te(t=>t.payload.docs.map(r=>e.idField?Ee(L({},r.data()),{[e.idField]:r.id}):r.data())),vn)}get(e){return Fe(this.query.get(e)).pipe(vn)}add(e){return this.ref.add(e)}doc(e){return new ym(this.ref.doc(e),this.afs)}},NE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?vm(this.query,this.afs.schedulers.outsideAngular).pipe(vn):vm(this.query,this.afs.schedulers.outsideAngular).pipe(te(t=>t.filter(r=>e.indexOf(r.type)>-1)),$t(t=>t.length>0),vn)}auditTrail(e){return this.stateChanges(e).pipe(rs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=IN(e);return EN(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(te(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),vn)}get(e){return Fe(this.query.get(e)).pipe(vn)}},IH=new X("angularfire2.enableFirestorePersistence"),CH=new X("angularfire2.firestore.persistenceSettings"),DH=new X("angularfire2.firestore.settings"),TH=new X("angularfire2.firestore.use-emulator");function CN(n,e=t=>t){return{query:e(n),ref:n}}var _n=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,d,g,p,w,b,M,P,R,U,Y){this.schedulers=c;let H=wl(t,a,r),ne=g;p&&T_(H,a,w,M,P,R,b,U),[this.firestore,this.persistenceEnabled$]=Sp(`${H.name}.firestore`,"AngularFirestore",H.name,()=>{let ae=a.runOutsideAngular(()=>H.firestore());if(o&&ae.settings(o),ne&&ae.useEmulator(...ne),i&&!_s(s)){let ie=()=>{try{return Fe(ae.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(D){return typeof console<"u"&&console.warn(D),ce(!1)}};return[ae,a.runOutsideAngular(ie)]}else return[ae,ce(!1)]},[o,ne,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=CN(i,r),a=this.schedulers.ngZone.run(()=>o);return new wm(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new NE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new ym(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)($(oc),$(sc,8),$(IH,8),$(DH,8),$(fn),$(Me),$(Dp),$(CH,8),$(TH,8),$(zA,8),$(__,8),$(b_,8),$(E_,8),$(I_,8),$(C_,8),$(D_,8),$(Es,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var DN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TN=(()=>{class n{constructor(t){this.headerService=t,this.btntxt="Update",this.goalText="",this.header=new Kp,this.isEditMode=!1,this.editId=null,this.headerService.getHeader().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}updateHeader(t){kE.default.fire({title:"Are you sure?",text:"this action is going to update the header section ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&this.header&&this.header.id&&(this.headerService.updateHeader(this.header.id,{name:this.header.name,goalLife:this.header.goalLife,photoUrl:this.header.photoUrl,email:this.header.email,phoneNumber:this.header.phoneNumber,location:this.header.location,socialNetwork:this.header.socialNetwork}),kE.default.fire("Done !","all is up to date.","success"))})}static{this.\u0275fac=function(r){return new(r||n)(he(DN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-header"]],decls:22,vars:8,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","name",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","goalLife",1,"input",3,"ngModelChange","ngModel"],["type","text","name","img","placeholder","photoUrl",1,"input",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","email",1,"input",3,"ngModelChange","ngModel"],["type","text","name","phone","placeholder","phone",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location",1,"input",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","socialNetwork",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Header"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.updateHeader()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.header.name,s)||(i.header.name=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.header.goalLife,s)||(i.header.goalLife=s),s}),J(),Re(9,"br"),G(10,"input",6),je("ngModelChange",function(s){return Be(i.header.photoUrl,s)||(i.header.photoUrl=s),s}),J(),Re(11,"br"),G(12,"input",7),je("ngModelChange",function(s){return Be(i.header.email,s)||(i.header.email=s),s}),J(),Re(13,"br"),G(14,"input",8),je("ngModelChange",function(s){return Be(i.header.phoneNumber,s)||(i.header.phoneNumber=s),s}),J(),Re(15,"br"),G(16,"input",9),je("ngModelChange",function(s){return Be(i.header.location,s)||(i.header.location=s),s}),J(),Re(17,"br"),G(18,"input",10),je("ngModelChange",function(s){return Be(i.header.socialNetwork,s)||(i.header.socialNetwork=s),s}),J(),Re(19,"br"),G(20,"button",11),pe(21),J()()()()),r&2&&(ue(6),Le("ngModel",i.header.name),ue(2),Le("ngModel",i.header.goalLife),ue(2),Le("ngModel",i.header.photoUrl),ue(2),Le("ngModel",i.header.email),ue(2),Le("ngModel",i.header.phoneNumber),ue(2),Le("ngModel",i.header.location),ue(2),Le("ngModel",i.header.socialNetwork),ue(3),nn(i.btntxt))},dependencies:[yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Ad=class{constructor(){this.startDate="mm-yy",this.endDate="mm-yy",this.location="city-country",this.position="my position",this.company="my company",this.accomplishment="item1, item2 ..."}};var ou=Zo(fo());var SN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(L({},t))}updateEducation(t,r){return this.workExperienceRef.doc(t).update(L({},r))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xH(n,e){if(n&1){let t=so();G(0,"div",13)(1,"div",14),pe(2),J(),G(3,"div",15)(4,"button",16),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.deleteJob(i.id))}),pe(5,"Delete"),J(),G(6,"button",17),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.updateJob(i.id))}),pe(7,"Update"),J()()()}if(n&2){let t=e.$implicit;ue(2),ci("",t.company," - ",t.position,"")}}var AN=(()=>{class n{constructor(t){this.WorkExperienceService=t,this.itemCount=0,this.btntxt="Add",this.goalText="",this.workExperience=[],this.myWorkExperience=new Ad,this.isEditMode=!1,this.editId=null,this.WorkExperienceService.getWorkExperience().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}AgregarJob(){this.isEditMode&&this.editId?ou.default.fire({title:"Would you like to update this experience ?",text:"\xBFAre you sure you want to save the changes ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&this.WorkExperienceService.updateEducation(this.editId,this.myWorkExperience).then(()=>{console.log("Updated item successfully!"),ou.default.fire("Done !","Updated item successfully.","success"),this.resetForm()})}):this.WorkExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully!"),ou.default.fire("Added !","The new item was added.","success"),this.resetForm()})}updateJob(t){let r=this.workExperience.find(i=>i.id===t);r&&(this.myWorkExperience=L({},r),this.btntxt="Ready for update",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){ou.default.fire({title:"\xBFDo you want to delete this experencie?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&this.WorkExperienceService.deleteWorkExperience(t).then(()=>{console.log("Deleted item successfully!"),ou.default.fire("Deleted item successfully!","The experiencie has been deleted.","success")})})}resetForm(){this.myWorkExperience=new Ad,this.btntxt="Add",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(he(SN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-workexperience"]],decls:22,vars:8,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","position",1,"input",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","company",1,"input",3,"ngModelChange","ngModel"],["type","text","name","accomplishment","placeholder","accomplishment",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"work-experience items"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.AgregarJob()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),J(),Re(9,"br"),G(10,"input",6),je("ngModelChange",function(s){return Be(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),J(),Re(11,"br"),G(12,"input",7),je("ngModelChange",function(s){return Be(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),J(),Re(13,"br"),G(14,"input",8),je("ngModelChange",function(s){return Be(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),J(),Re(15,"br"),G(16,"input",9),je("ngModelChange",function(s){return Be(i.myWorkExperience.accomplishment,s)||(i.myWorkExperience.accomplishment=s),s}),J(),Re(17,"br"),G(18,"button",10),pe(19),J()()(),G(20,"div",11),si(21,xH,8,2,"div",12),J()()),r&2&&(ue(6),Le("ngModel",i.myWorkExperience.startDate),ue(2),Le("ngModel",i.myWorkExperience.endDate),ue(2),Le("ngModel",i.myWorkExperience.location),ue(2),Le("ngModel",i.myWorkExperience.position),ue(2),Le("ngModel",i.myWorkExperience.company),ue(2),Le("ngModel",i.myWorkExperience.accomplishment),ue(3),nn(i.btntxt),ue(2),ai("ngForOf",i.workExperience))},dependencies:[co,yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var xd=class{constructor(){this.date="date",this.educativeInstitute="institute",this.grade="grade"}};var su=Zo(fo());var xN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}getWorkExperience(){return this.educationRef}createWorkExperience(t){return this.educationRef.add(L({},t))}updateEducation(t,r){return this.educationRef.doc(t).update(L({},r))}deleteWorkExperience(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RH(n,e){if(n&1){let t=so();G(0,"div",10)(1,"div",11),pe(2),J(),G(3,"div",12)(4,"button",13),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.deleteJob(i.id))}),pe(5,"Delete"),J(),G(6,"button",14),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.updateJob(i.id))}),pe(7,"Update"),J()()()}if(n&2){let t=e.$implicit;ue(2),ci("",t.educativeInstitute," - ",t.grade,"")}}var MN=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Add",this.goalText="",this.educations=[],this.myeducation=new xd,this.isEditMode=!1,this.editId=null,this.educationService.getEducation().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log(this.educations)})}AgregarJob(){this.isEditMode&&this.editId?su.default.fire({title:"Would you like to update this item ?",text:"\xBFAre you sure you want to save the changes ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&this.educationService.updateEducation(this.editId,this.myeducation).then(()=>{console.log("Updated item successfully!"),su.default.fire("Done !","Updated item successfully.","success"),this.resetForm()})}):this.educationService.createWorkExperience(this.myeducation).then(()=>{console.log("Created new item successfully!"),su.default.fire("Added !","The new item was added.","success"),this.resetForm()})}updateJob(t){let r=this.educations.find(i=>i.id===t);r&&(this.myeducation=L({},r),this.btntxt="ready for update",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){su.default.fire({title:"\xBFDo you want to delete this item?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&this.educationService.deleteWorkExperience(t).then(()=>{console.log("Deleted item successfully!"),su.default.fire("Deleted item successfully!","The item has been deleted.","success")})})}resetForm(){this.myeducation=new xd,this.btntxt="Agregar",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(he(xN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-education"]],decls:16,vars:5,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Education institute",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","grade",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Education items"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.AgregarJob()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.myeducation.date,s)||(i.myeducation.date=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.myeducation.educativeInstitute,s)||(i.myeducation.educativeInstitute=s),s}),J(),Re(9,"br"),G(10,"input",6),je("ngModelChange",function(s){return Be(i.myeducation.grade,s)||(i.myeducation.grade=s),s}),J(),Re(11,"br"),G(12,"button",7),pe(13),J()()(),G(14,"div",8),si(15,RH,8,2,"div",9),J()()),r&2&&(ue(6),Le("ngModel",i.myeducation.date),ue(2),Le("ngModel",i.myeducation.educativeInstitute),ue(2),Le("ngModel",i.myeducation.grade),ue(3),nn(i.btntxt),ue(2),ai("ngForOf",i.educations))},dependencies:[co,yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var Md=class{constructor(){this.Institute="institute example",this.title="title",this.date="date"}};var au=Zo(fo());var RN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificates(t){return this.certificatesRef.add(L({},t))}updateCertificates(t,r){return this.certificatesRef.doc(t).update(L({},r))}deleteCertificates(t){return this.certificatesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PH(n,e){if(n&1){let t=so();G(0,"div",10)(1,"div",11),pe(2),J(),G(3,"div",12)(4,"button",13),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.deleteJob(i.id))}),pe(5,"Delete"),J(),G(6,"button",14),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.updateJob(i.id))}),pe(7,"Update"),J()()()}if(n&2){let t=e.$implicit;ue(2),ci("",t.Institute," - ",t.title,"")}}var NN=(()=>{class n{constructor(t){this.CertificatesService=t,this.itemCount=0,this.btntxt="Add",this.goalText="",this.certificatess=[],this.myCertificates=new Md,this.isEditMode=!1,this.editId=null,this.CertificatesService.getCertificates().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificatess=r,console.log(this.certificatess)})}AgregarJob(){this.isEditMode&&this.editId?au.default.fire({title:"Would you like to update this item ?",text:"\xBFAre you sure you want to save the changes ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&this.CertificatesService.updateCertificates(this.editId,this.myCertificates).then(()=>{console.log("Updated item successfully!"),au.default.fire("Done !","Updated item successfully.","success"),this.resetForm()})}):this.CertificatesService.createCertificates(this.myCertificates).then(()=>{console.log("Created new item successfully!"),au.default.fire("Added !","The new item was added.","success"),this.resetForm()})}updateJob(t){let r=this.certificatess.find(i=>i.id===t);r&&(this.myCertificates=L({},r),this.btntxt="Redy for update",this.isEditMode=!0,this.editId=t||null,console.log("cambio"))}deleteJob(t){au.default.fire({title:"\xBFDo you want to delete this item?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&this.CertificatesService.deleteCertificates(t).then(()=>{console.log("Deleted item successfully!"),au.default.fire("Deleted item successfully!","The item has been deleted.","success")})})}resetForm(){this.myCertificates=new Md,this.btntxt="Add",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(he(RN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-certificates"]],decls:16,vars:5,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Certificates items"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.AgregarJob()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.myCertificates.title,s)||(i.myCertificates.title=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.myCertificates.Institute,s)||(i.myCertificates.Institute=s),s}),J(),Re(9,"br"),G(10,"input",6),je("ngModelChange",function(s){return Be(i.myCertificates.date,s)||(i.myCertificates.date=s),s}),J(),Re(11,"br"),G(12,"button",7),pe(13),J()()(),G(14,"div",8),si(15,PH,8,2,"div",9),J()()),r&2&&(ue(6),Le("ngModel",i.myCertificates.title),ue(2),Le("ngModel",i.myCertificates.Institute),ue(2),Le("ngModel",i.myCertificates.date),ue(3),nn(i.btntxt),ue(2),ai("ngForOf",i.certificatess))},dependencies:[co,yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var _m=class{constructor(){this.languagues="value1, value2, value3 ...",this.Areas="value1, value2, value3 ..."}};var OE=Zo(fo());var PN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}updateSkills(t,r){return this.skillsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kN=(()=>{class n{constructor(t){this.skillsService=t,this.btntxt="Update",this.goalText="",this.skills=new _m,this.isEditMode=!1,this.editId=null,this.skillsService.getSkills().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log(this.skills)})}updateInterest(t){OE.default.fire({title:"Are you sure?",text:"this action is going to update the skills section ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{this.skills&&this.skills.id&&this.skillsService.updateSkills(this.skills.id,{languagues:this.skills.languagues,Areas:this.skills.Areas}),OE.default.fire("Done !","all is up to date.","success")})}static{this.\u0275fac=function(r){return new(r||n)(he(PN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-skills"]],decls:12,vars:3,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Education institute",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Skills items"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.updateInterest()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.skills.languagues,s)||(i.skills.languagues=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.skills.Areas,s)||(i.skills.Areas=s),s}),J(),Re(9,"br"),G(10,"button",6),pe(11),J()()()()),r&2&&(ue(6),Le("ngModel",i.skills.languagues),ue(2),Le("ngModel",i.skills.Areas),ue(3),nn(i.btntxt))},dependencies:[yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Rd=class{constructor(){this.language="language",this.percentage="100%"}};var cu=Zo(fo());var ON=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguages(t){return this.languagesRef.add(L({},t))}updateLanguages(t,r){return this.languagesRef.doc(t).update(L({},r))}deleteLanguages(t){return this.languagesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FH(n,e){if(n&1){let t=so();G(0,"div",9)(1,"div",10),pe(2),J(),G(3,"div",11)(4,"button",12),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.deleteJob(i.id))}),pe(5,"Delete"),J(),G(6,"button",13),He("click",function(){let i=jn(t).$implicit,o=Un();return Bn(o.updateJob(i.id))}),pe(7,"Update"),J()()()}if(n&2){let t=e.$implicit;ue(2),ci("",t.language," - ",t.percentage,"")}}var FN=(()=>{class n{constructor(t){this.languagesService=t,this.itemCount=0,this.btntxt="Add",this.goalText="",this.languages=[],this.myLanguages=new Rd,this.isEditMode=!1,this.editId=null,this.languagesService.getLanguages().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarJob(){this.isEditMode&&this.editId?cu.default.fire({title:"Would you like to update this item ?",text:"\xBFAre you sure you want to save the changes ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&this.languagesService.updateLanguages(this.editId,this.myLanguages).then(()=>{console.log("Updated item successfully!"),cu.default.fire("Done !","Updated item successfully.","success"),this.resetForm()})}):this.languagesService.createLanguages(this.myLanguages).then(()=>{console.log("Created new item successfully!"),cu.default.fire("Added !","The new item was added.","success"),this.resetForm()})}updateJob(t){let r=this.languages.find(i=>i.id===t);r&&(this.myLanguages=L({},r),this.btntxt="Ready for update",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){cu.default.fire({title:"\xBFDo you want to delete this item?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&this.languagesService.deleteLanguages(t).then(()=>{console.log("Deleted item successfully!"),cu.default.fire("Deleted item successfully!","The item has been deleted.","success")})})}resetForm(){this.myLanguages=new Rd,this.btntxt="Add",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(he(ON))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-languages"]],decls:14,vars:4,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","language",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","percentage",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Languages items"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.AgregarJob()}),G(6,"input",4),je("ngModelChange",function(s){return Be(i.myLanguages.language,s)||(i.myLanguages.language=s),s}),J(),Re(7,"br"),G(8,"input",5),je("ngModelChange",function(s){return Be(i.myLanguages.percentage,s)||(i.myLanguages.percentage=s),s}),J(),Re(9,"br"),G(10,"button",6),pe(11),J()()(),G(12,"div",7),si(13,FH,8,2,"div",8),J()()),r&2&&(ue(6),Le("ngModel",i.myLanguages.language),ue(2),Le("ngModel",i.myLanguages.percentage),ue(3),nn(i.btntxt),ue(2),ai("ngForOf",i.languages))},dependencies:[co,yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var bm=class{constructor(){this.interest="history"}};var FE=Zo(fo());var VN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}updateInterest(t,r){return this.interestsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)($(_n))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var LN=(()=>{class n{constructor(t){this.interestService=t,this.itemCount=0,this.btntxt="Update",this.goalText="",this.Interests=new bm,this.isEditMode=!1,this.editId=null,this.interestService.getInterests().snapshotChanges().pipe(te(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.Interests=r[0],console.log(this.Interests)})}updateInterest(t){FE.default.fire({title:"Are you sure?",text:"this action is going to update the interest section ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(r=>{this.Interests&&this.Interests.id&&r.isConfirmed&&(this.interestService.updateInterest(this.Interests.id,{interest:this.Interests.interest}),FE.default.fire("Done !","all is up to date.","success"))})}static{this.\u0275fac=function(r){return new(r||n)(he(VN))}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-admin-interests"]],decls:9,vars:2,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["name","interest","placeholder","Write about your interests...","rows","5",1,"input","textarea",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(G(0,"div",0)(1,"div",1)(2,"p"),pe(3,"Inteters"),J()(),G(4,"div",2)(5,"form",3),He("submit",function(){return i.updateInterest()}),G(6,"textarea",4),je("ngModelChange",function(s){return Be(i.Interests.interest,s)||(i.Interests.interest=s),s}),J(),G(7,"button",5),pe(8),J()()()()),r&2&&(ue(6),Le("ngModel",i.Interests.interest),ue(2),nn(i.btntxt))},dependencies:[yn,Wt,gn,mn,on,rn],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;text-align:right;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.textarea[_ngcontent-%COMP%]{resize:none;overflow-y:auto;font-family:inherit;text-align:justify;line-height:1.4}"]})}}return n})();var LH=[{path:"header",component:TN},{path:"workexperience",component:AN},{path:"education",component:MN},{path:"certificates",component:NN},{path:"skills",component:kN},{path:"languages",component:FN},{path:"interests",component:LN}],jN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Ot({imports:[h_.forRoot(LH),h_]})}}return n})();var BN=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ft({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"nav-menu"],["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(G(0,"h3")(1,"b"),pe(2," admin-CV "),J()(),G(3,"nav")(4,"ul",0)(5,"li")(6,"a",1),pe(7," header "),J()(),G(8,"li")(9,"a",2),pe(10," work-experience "),J()(),G(11,"li")(12,"a",3),pe(13," education "),J()(),G(14,"li")(15,"a",4),pe(16," certificates "),J()(),G(17,"li")(18,"a",5),pe(19," skills "),J()(),G(20,"li")(21,"a",6),pe(22," languages "),J()(),G(23,"li")(24,"a",7),pe(25," interests "),J()()()(),Re(26,"router-outlet"))},dependencies:[s_,xA],styles:["nav[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.nav-menu[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;flex-wrap:wrap;justify-content:center;gap:20px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:22px;color:#fff;transition:transform .2s ease-in-out,color .2s ease-in-out;display:inline-block;padding:5px 10px;border-radius:10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.15);background-color:#ffffff26;color:#fff}"]})}}return n})();var UN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n,bootstrap:[BN]})}static{this.\u0275inj=Ot({imports:[hS,jN,FS,BS.initializeApp(US.firebase)]})}}return n})();dS().bootstrapModule(UN,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
