import{a as P,b as pe,c as kp,d as N,e as TI,f as ul,g as SI,h as AI,i as xI,j as Op,k as MI,l as za,m as Fp,n as cl,o as RI,p as NI,q as Vp,r as qe,s as Ni,t as Vn,u as ll,v as Ga,w as PI,x as kI,y as jr,z as Xt}from"./chunk-4ZHOUZTK.js";function OI(n,e){return Object.is(n,e)}var at=null,dl=!1,hl=1,ur=Symbol("SIGNAL");function De(n){let e=at;return at=n,e}function FI(){return at}var Ka={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bp(n){if(dl)throw new Error("");if(at===null)return;at.consumerOnSignalRead(n);let e=at.nextProducerIndex++;if(ml(at),e<at.producerNode.length&&at.producerNode[e]!==n&&Wa(at)){let t=at.producerNode[e];gl(t,at.producerIndexOfThis[e])}at.producerNode[e]!==n&&(at.producerNode[e]=n,at.producerIndexOfThis[e]=Wa(at)?BI(n,at,e):0),at.producerLastReadVersion[e]=n.version}function eN(){hl++}function VI(n){if(!(Wa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hl)){if(!n.producerMustRecompute(n)&&!$p(n)){n.dirty=!1,n.lastCleanEpoch=hl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hl}}function LI(n){if(n.liveConsumerNode===void 0)return;let e=dl;dl=!0;try{for(let t of n.liveConsumerNode)t.dirty||tN(t)}finally{dl=e}}function jI(){return at?.consumerAllowSignalWrites!==!1}function tN(n){n.dirty=!0,LI(n),n.consumerMarkedDirty?.(n)}function pl(n){return n&&(n.nextProducerIndex=0),De(n)}function Up(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $p(n){ml(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(VI(t),r!==t.version))return!0}return!1}function Hp(n){if(ml(n),Wa(n))for(let e=0;e<n.producerNode.length;e++)gl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function BI(n,e,t){if(UI(n),n.liveConsumerNode.length===0&&$I(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=BI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gl(n,e){if(UI(n),n.liveConsumerNode.length===1&&$I(n))for(let r=0;r<n.producerNode.length;r++)gl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ml(i),i.producerIndexOfThis[r]=e}}function Wa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ml(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function UI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $I(n){return n.producerNode!==void 0}function HI(n){let e=Object.create(nN);e.computation=n;let t=()=>{if(VI(e),Bp(e),e.value===fl)throw e.error;return e.value};return t[ur]=e,t}var Lp=Symbol("UNSET"),jp=Symbol("COMPUTING"),fl=Symbol("ERRORED"),nN=pe(P({},Ka),{value:Lp,dirty:!0,error:null,equal:OI,producerMustRecompute(n){return n.value===Lp||n.value===jp},producerRecomputeValue(n){if(n.value===jp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=jp;let t=pl(n),r;try{r=n.computation()}catch(i){r=fl,n.error=i}finally{Up(n,t)}if(e!==Lp&&e!==fl&&r!==fl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function rN(){throw new Error}var qI=rN;function zI(){qI()}function GI(n){qI=n}var iN=null;function WI(n){let e=Object.create(QI);e.value=n;let t=()=>(Bp(e),e.value);return t[ur]=e,t}function qp(n,e){jI()||zI(),n.equal(n.value,e)||(n.value=e,oN(n))}function KI(n,e){jI()||zI(),qp(n,e(n.value))}var QI=pe(P({},Ka),{equal:OI,value:void 0});function oN(n){n.version++,eN(),LI(n),iN?.()}function ie(n){return typeof n=="function"}function jo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yl=jo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof yl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{YI(o)}catch(s){e=e??[],s instanceof yl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)YI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pi(t,e)}remove(e){let{_finalizers:t}=this;t&&Pi(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var zp=Ke.EMPTY;function vl(n){return n instanceof Ke||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function YI(n){ie(n)?n():n.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bo={setTimeout(n,e,...t){let{delegate:r}=Bo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Bo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _l(n){Bo.setTimeout(()=>{let{onUnhandledError:e}=Dn;if(e)e(n);else throw n})}function Qa(){}var ZI=Gp("C",void 0,void 0);function JI(n){return Gp("E",void 0,n)}function XI(n){return Gp("N",n,void 0)}function Gp(n,e,t){return{kind:n,value:e,error:t}}var ki=null;function Uo(n){if(Dn.useDeprecatedSynchronousErrorHandling){let e=!ki;if(e&&(ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ki;if(ki=null,t)throw r}}else n()}function e0(n){Dn.useDeprecatedSynchronousErrorHandling&&ki&&(ki.errorThrown=!0,ki.error=n)}var Oi=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vl(e)&&e.add(this)):this.destination=uN}static create(e,t,r){return new cr(e,t,r)}next(e){this.isStopped?Kp(XI(e),this):this._next(e)}error(e){this.isStopped?Kp(JI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kp(ZI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sN=Function.prototype.bind;function Wp(n,e){return sN.call(n,e)}var Qp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wl(r)}else wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wl(t)}}},cr=class extends Oi{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wp(e.next,o),error:e.error&&Wp(e.error,o),complete:e.complete&&Wp(e.complete,o)}):i=e}this.destination=new Qp(i)}};function wl(n){Dn.useDeprecatedSynchronousErrorHandling?e0(n):_l(n)}function aN(n){throw n}function Kp(n,e){let{onStoppedNotification:t}=Dn;t&&Bo.setTimeout(()=>t(n,e))}var uN={closed:!0,next:Qa,error:aN,complete:Qa};var $o=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mt(n){return n}function Yp(...n){return Zp(n)}function Zp(n){return n.length===0?Mt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=lN(t)?t:new cr(t,r,i);return Uo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=t0(r),new r((i,o)=>{let s=new cr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$o](){return this}pipe(...t){return Zp(t)(this)}toPromise(t){return t=t0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function t0(n){var e;return(e=n??Dn.Promise)!==null&&e!==void 0?e:Promise}function cN(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function lN(n){return n&&n instanceof Oi||cN(n)&&vl(n)}function Jp(n){return ie(n?.lift)}function de(n){return e=>{if(Jp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Xp(n,e,t,r,i)}var Xp=class extends Oi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ho(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var qo=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return Ho()(this)}};var n0=jo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new El(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new n0}next(t){Uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zp:(this.currentObservers=null,o.push(t),new Ke(()=>{this.currentObservers=null,Pi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new El(e,t),n})(),El=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:zp}};var yt=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ya={now(){return(Ya.delegate||Date).now()},delegate:void 0};var Il=class extends $e{constructor(e=1/0,t=1/0,r=Ya){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Dl=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var Za={setInterval(n,e,...t){let{delegate:r}=Za;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Za;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var zo=class extends Dl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Za.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Za.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Go=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Go.now=Ya.now;var Wo=class extends Go{constructor(e,t=Go.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ja=new Wo(zo);var Cl=class extends zo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var bl=class extends Wo{};var eg=new bl(Cl);var Rt=new ge(n=>n.complete());function r0(n){return n&&ie(n.schedule)}function tg(n){return n[n.length-1]}function Tl(n){return ie(tg(n))?n.pop():void 0}function Ln(n){return r0(tg(n))?n.pop():void 0}function i0(n,e){return typeof tg(n)=="number"?n.pop():e}var Sl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Al(n){return ie(n?.then)}function xl(n){return ie(n[$o])}function Ml(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Rl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nl=dN();function Pl(n){return ie(n?.[Nl])}function kl(n){return SI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ul(t.read());if(i)return yield ul(void 0);yield yield ul(r)}}finally{t.releaseLock()}})}function Ol(n){return ie(n?.getReader)}function je(n){if(n instanceof ge)return n;if(n!=null){if(xl(n))return hN(n);if(Sl(n))return fN(n);if(Al(n))return pN(n);if(Ml(n))return o0(n);if(Pl(n))return gN(n);if(Ol(n))return mN(n)}throw Rl(n)}function hN(n){return new ge(e=>{let t=n[$o]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fN(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pN(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_l)})}function gN(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function o0(n){return new ge(e=>{yN(n,e).catch(t=>e.error(t))})}function mN(n){return o0(kl(n))}function yN(n,e){var t,r,i,o;return TI(this,void 0,void 0,function*(){try{for(t=AI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ut(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function un(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Ut(r,n,()=>r.next(i),e),()=>Ut(r,n,()=>r.complete(),e),i=>Ut(r,n,()=>r.error(i),e)))})}function Cn(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function s0(n,e){return je(n).pipe(Cn(e),un(e))}function a0(n,e){return je(n).pipe(Cn(e),un(e))}function u0(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function c0(n,e){return new ge(t=>{let r;return Ut(t,e,()=>{r=n[Nl](),Ut(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Fl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Ut(t,e,()=>{let r=n[Symbol.asyncIterator]();Ut(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function l0(n,e){return Fl(kl(n),e)}function d0(n,e){if(n!=null){if(xl(n))return s0(n,e);if(Sl(n))return u0(n,e);if(Al(n))return a0(n,e);if(Ml(n))return Fl(n,e);if(Pl(n))return c0(n,e);if(Ol(n))return l0(n,e)}throw Rl(n)}function Ce(n,e){return e?d0(n,e):je(n)}function te(...n){let e=Ln(n);return Ce(n,e)}function Ko(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function ng(n){return!!n&&(n instanceof ge||ie(n.lift)&&ie(n.subscribe))}var lr=jo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:vN}=Array;function _N(n,e){return vN(e)?n(...e):n(e)}function Vl(n){return Q(e=>_N(n,e))}var{isArray:wN}=Array,{getPrototypeOf:EN,prototype:IN,keys:DN}=Object;function Ll(n){if(n.length===1){let e=n[0];if(wN(e))return{args:e,keys:null};if(CN(e)){let t=DN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function CN(n){return n&&typeof n=="object"&&EN(n)===IN}function jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Xa(...n){let e=Ln(n),t=Tl(n),{args:r,keys:i}=Ll(n);if(r.length===0)return Ce([],e);let o=new ge(bN(r,e,i?s=>jl(i,s):Mt));return t?o.pipe(Vl(t)):o}function bN(n,e,t=Mt){return r=>{h0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)h0(e,()=>{let l=Ce(n[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function h0(n,e,t){n?Ut(t,n,e):e()}function f0(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let x=!1;je(t(A,h++)).subscribe(he(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let L=u.shift();s?Ut(e,s,()=>b(L)):b(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(he(e,y,()=>{p=!0,m()})),()=>{a?.()}}function tt(n,e,t=1/0){return ie(e)?tt((r,i)=>Q((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>f0(r,i,n,t)))}function Br(n=1/0){return tt(Mt,n)}function p0(){return Br(1)}function Qo(...n){return p0()(Ce(n,Ln(n)))}function Bl(n){return new ge(e=>{je(n()).subscribe(e)})}function rg(...n){let e=Tl(n),{args:t,keys:r}=Ll(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;je(t[h]).subscribe(he(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?jl(r,a):a),o.complete())}))}});return e?i.pipe(Vl(e)):i}function ig(...n){let e=Ln(n),t=i0(n,1/0),r=n;return r.length?r.length===1?je(r[0]):Br(t)(Ce(r,e)):Rt}function vt(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ur(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=je(n(s,Ur(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function g0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Fi(n,e){return ie(e)?tt(n,e,1):tt(n,1)}function $r(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dr(n){return n<=0?()=>Rt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function og(n){return Q(()=>n)}function sg(n,e=Mt){return n=n??TN,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function TN(n,e){return n===e}function Ul(n=SN){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function SN(){return new lr}function eu(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function cn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):Mt,dr(1),t?$r(e):Ul(()=>new lr))}function Yo(n){return n<=0?()=>Rt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ag(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):Mt,Yo(1),t?$r(e):Ul(()=>new lr))}function tu(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Vi(n,e){return de(g0(n,e,arguments.length>=2,!0))}function m0(n={}){let{connector:e=()=>new $e,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return de((A,x)=>{l++,!p&&!h&&m();let L=u=u??e();x.add(()=>{l--,l===0&&!p&&!h&&(a=ug(b,i))}),L.subscribe(x),!s&&l>0&&(s=new cr({next:z=>L.next(z),error:z=>{p=!0,m(),a=ug(y,t,z),L.error(z)},complete:()=>{h=!0,m(),a=ug(y,r),L.complete()}}),je(A).subscribe(s))})(o)}}function ug(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new cr({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function $l(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,m0({connector:()=>new Il(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Li(...n){let e=Ln(n);return de((t,r)=>{(e?Qo(n,t,e):Qo(n,t)).subscribe(r)})}function Qe(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;je(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Hl(n,e){return ie(e)?Qe(()=>n,e):Qe(()=>n)}function cg(n){return de((e,t)=>{je(n).subscribe(he(t,()=>t.complete(),Qa)),!t.closed&&e.subscribe(t)})}function ut(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Mt}var rD="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(lm(e,t)),this.code=e}};function lm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function du(n){return{toString:n}.toString()}var ql="__parameters__";function AN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function iD(n,e,t){return du(()=>{let r=AN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ql)?u[ql]:Object.defineProperty(u,ql,{value:[]})[ql];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Sn=globalThis;function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function xN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $t(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map($t).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function y0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var MN=ke({__forward_ref__:ke});function ys(n){return n.__forward_ref__=ys,n.toString=function(){return $t(this())},n}function Nt(n){return oD(n)?n():n}function oD(n){return typeof n=="function"&&n.hasOwnProperty(MN)&&n.__forward_ref__===ys}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ad(n){return v0(n,aD)||v0(n,uD)}function sD(n){return Ad(n)!==null}function v0(n,e){return n.hasOwnProperty(e)?n[e]:null}function RN(n){let e=n&&(n[aD]||n[uD]);return e||null}function _0(n){return n&&(n.hasOwnProperty(w0)||n.hasOwnProperty(NN))?n[w0]:null}var aD=ke({\u0275prov:ke}),w0=ke({\u0275inj:ke}),uD=ke({ngInjectableDef:ke}),NN=ke({ngInjectorDef:ke}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cD(n){return n&&!!n.\u0275providers}var PN=ke({\u0275cmp:ke}),kN=ke({\u0275dir:ke}),ON=ke({\u0275pipe:ke}),FN=ke({\u0275mod:ke}),ed=ke({\u0275fac:ke}),ru=ke({__NG_ELEMENT_ID__:ke}),E0=ke({__NG_ENV_ID__:ke});function rs(n){return typeof n=="string"?n:n==null?"":String(n)}function VN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():rs(n)}function LN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function dm(n,e){throw new J(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Dg;function lD(){return Dg}function ln(n){let e=Dg;return Dg=n,e}function dD(n,e,t){let r=Ad(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;dm(n,"Injector")}var jN={},ou=jN,Cg="__NG_DI_FLAG__",td="ngTempTokenPath",BN="ngTokenPath",UN=/\n/gm,$N="\u0275",I0="__source",ts;function HN(){return ts}function Hr(n){let e=ts;return ts=n,e}function qN(n,e=fe.Default){if(ts===void 0)throw new J(-203,!1);return ts===null?dD(n,void 0,e):ts.get(n,e&fe.Optional?null:void 0,e)}function F(n,e=fe.Default){return(lD()||qN)(Nt(n),e)}function B(n,e=fe.Default){return F(n,xd(e))}function xd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bg(n){let e=[];for(let t=0;t<n.length;t++){let r=Nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=zN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function hD(n,e){return n[Cg]=e,n.prototype[Cg]=e,n}function zN(n){return n[Cg]}function GN(n,e,t,r){let i=n[td];throw e[I0]&&i.unshift(e[I0]),n.message=WN(`
`+n.message,i,t,r),n[BN]=i,n[td]=null,n}function WN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==$N?n.slice(2):n;let i=$t(e);if(Array.isArray(e))i=e.map($t).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):$t(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(UN,`
  `)}`}var vs=hD(iD("Optional"),8);var hm=hD(iD("SkipSelf"),4);function is(n,e){let t=n.hasOwnProperty(ed);return t?n[ed]:null}function fm(n,e){n.forEach(t=>Array.isArray(t)?fm(t,e):e(t))}function fD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function KN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function QN(n,e,t){let r=hu(n,e);return r>=0?n[r|1]=t:(r=~r,KN(n,r,e,t)),r}function lg(n,e){let t=hu(n,e);if(t>=0)return n[t|1]}function hu(n,e){return YN(n,e,1)}function YN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var os={},dn=[],ss=new W(""),pD=new W("",-1),gD=new W(""),rd=class{get(e,t=ou){if(t===ou){let r=new Error(`NullInjectorError: No provider for ${$t(e)}!`);throw r.name="NullInjectorError",r}return t}},mD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mD||{}),Un=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Un||{}),Gr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Gr||{});function ZN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Tg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];JN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function yD(n){return n===3||n===4||n===6}function JN(n){return n.charCodeAt(0)===64}function su(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?D0(n,t,i,null,e[++r]):D0(n,t,i,null,null))}}return n}function D0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var vD="ng-template";function XN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ZN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(pm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function pm(n){return n.type===4&&n.value!==vD}function eP(n,e,t){let r=n.type===4&&!t?vD:n.value;return e===r}function tP(n,e,t){let r=4,i=n.attrs,o=i!==null?iP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!bn(r)&&!bn(u))return!1;if(s&&bn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!eP(n,u,t)||u===""&&e.length===1){if(bn(r))return!1;s=!0}}else if(r&8){if(i===null||!XN(n,i,u,t)){if(bn(r))return!1;s=!0}}else{let l=e[++a],h=nP(u,i,pm(n),t);if(h===-1){if(bn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(bn(r))return!1;s=!0}}}}return bn(r)||s}function bn(n){return(n&1)===0}function nP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return oP(e,n)}function rP(n,e,t=!1){for(let r=0;r<e.length;r++)if(tP(n,e[r],t))return!0;return!1}function iP(n){for(let e=0;e<n.length;e++){let t=n[e];if(yD(t))return e}return n.length}function oP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function C0(n,e){return n?":not("+e.trim()+")":e}function sP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!bn(s)&&(e+=C0(o,i),i=""),r=s,o=o||!bn(r);t++}return i!==""&&(e+=C0(o,i)),e}function aP(n){return n.map(sP).join(",")}function uP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!bn(i))break;i=o}r++}return{attrs:e,classes:t}}function ft(n){return du(()=>{let e=DD(n),t=pe(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Un.Emulated,styles:n.styles||dn,_:null,schemas:n.schemas||null,tView:null,id:""});CD(t);let r=n.dependencies;return t.directiveDefs=T0(r,!1),t.pipeDefs=T0(r,!0),t.id=dP(t),t})}function cP(n){return Wr(n)||_D(n)}function lP(n){return n!==null}function pt(n){return du(()=>({type:n.type,bootstrap:n.bootstrap||dn,declarations:n.declarations||dn,imports:n.imports||dn,exports:n.exports||dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function b0(n,e){if(n==null)return os;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Gr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Gr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ht(n){return du(()=>{let e=DD(n);return CD(e),e})}function Wr(n){return n[PN]||null}function _D(n){return n[kN]||null}function wD(n){return n[ON]||null}function ED(n){let e=Wr(n)||_D(n)||wD(n);return e!==null?e.standalone:!1}function ID(n,e){let t=n[FN]||null;if(!t&&e===!0)throw new Error(`Type ${$t(n)} does not have '\u0275mod' property.`);return t}function DD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||os,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b0(n.inputs,e),outputs:b0(n.outputs),debugInfo:null}}function CD(n){n.features?.forEach(e=>e(n))}function T0(n,e){if(!n)return null;let t=e?wD:cP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(lP)}function dP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hP(...n){return{\u0275providers:bD(!0,n),\u0275fromNgModule:!0}}function bD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return fm(e,s=>{let a=s;Sg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&TD(i,o),t}function TD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gm(i,o=>{e(o,r)})}}function Sg(n,e,t,r){if(n=Nt(n),!n)return!1;let i=null,o=_0(n),s=!o&&Wr(n);if(!o&&!s){let u=n.ngModule;if(o=_0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Sg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{fm(o.imports,h=>{Sg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&TD(l,e)}if(!a){let l=is(i)||(()=>new i);e({provide:i,useFactory:l,deps:dn},i),e({provide:gD,useValue:i,multi:!0},i),e({provide:ss,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;gm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function gm(n,e){for(let t of n)cD(t)&&(t=t.\u0275providers),Array.isArray(t)?gm(t,e):e(t)}var fP=ke({provide:String,useValue:ke});function SD(n){return n!==null&&typeof n=="object"&&fP in n}function pP(n){return!!(n&&n.useExisting)}function gP(n){return!!(n&&n.useFactory)}function as(n){return typeof n=="function"}function mP(n){return!!n.useClass}var Md=new W(""),Yl={},yP={},dg;function mm(){return dg===void 0&&(dg=new rd),dg}var en=class{},au=class extends en{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xg(e,s=>this.processProvider(s)),this.records.set(pD,Zo(void 0,this)),i.has("environment")&&this.records.set(en,Zo(void 0,this));let o=this.records.get(Md);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gD,dn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Hr(this),r=ln(void 0),i;try{return e()}finally{Hr(t),ln(r)}}get(e,t=ou,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(E0))return e[E0](this);r=xd(r);let i,o=Hr(this),s=ln(void 0);try{if(!(r&fe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=IP(e)&&Ad(e);l&&this.injectableDefInScope(l)?u=Zo(Ag(e),Yl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&fe.Self?mm():this.parent;return t=r&fe.Optional&&t===ou?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[td]=a[td]||[]).unshift($t(e)),o)throw a;return GN(a,e,"R3InjectorError",this.source)}else throw a}finally{ln(s),Hr(o)}}resolveInjectorInitializers(){let e=De(null),t=Hr(this),r=ln(void 0),i;try{let o=this.get(ss,dn,fe.Self);for(let s of o)s()}finally{Hr(t),ln(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Nt(e);let t=as(e)?e:Nt(e&&e.provide),r=_P(e);if(!as(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Zo(void 0,Yl,!0),i.factory=()=>bg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Yl&&(t.value=yP,t.value=t.factory()),typeof t.value=="object"&&t.value&&EP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ag(n){let e=Ad(n),t=e!==null?e.factory:is(n);if(t!==null)return t;if(n instanceof W)throw new J(204,!1);if(n instanceof Function)return vP(n);throw new J(204,!1)}function vP(n){if(n.length>0)throw new J(204,!1);let t=RN(n);return t!==null?()=>t.factory(n):()=>new n}function _P(n){if(SD(n))return Zo(void 0,n.useValue);{let e=AD(n);return Zo(e,Yl)}}function AD(n,e,t){let r;if(as(n)){let i=Nt(n);return is(i)||Ag(i)}else if(SD(n))r=()=>Nt(n.useValue);else if(gP(n))r=()=>n.useFactory(...bg(n.deps||[]));else if(pP(n))r=()=>F(Nt(n.useExisting));else{let i=Nt(n&&(n.useClass||n.provide));if(wP(n))r=()=>new i(...bg(n.deps));else return is(i)||Ag(i)}return r}function Zo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function wP(n){return!!n.deps}function EP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function IP(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function xg(n,e){for(let t of n)Array.isArray(t)?xg(t,e):t&&cD(t)?xg(t.\u0275providers,e):e(t)}function zn(n,e){n instanceof au&&n.assertNotDestroyed();let t,r=Hr(n),i=ln(void 0);try{return e()}finally{Hr(r),ln(i)}}function xD(){return lD()!==void 0||HN()!=null}function DP(n){if(!xD())throw new J(-203,!1)}function CP(n){let e=Sn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function bP(n){return typeof n=="function"}var gr=0,ye=1,oe=2,Pt=3,Tn=4,xn=5,id=6,od=7,An=8,us=9,$n=10,ct=11,uu=12,S0=13,_s=14,Hn=15,cs=16,Jo=17,ls=18,Rd=19,MD=20,qr=21,hg=22,hn=23,Kr=25,RD=1;var Bi=7,sd=8,ad=9,fn=10,ud=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ud||{});function zr(n){return Array.isArray(n)&&typeof n[RD]=="object"}function mr(n){return Array.isArray(n)&&n[RD]===!0}function ND(n){return(n.flags&4)!==0}function Nd(n){return n.componentOffset>-1}function ym(n){return(n.flags&1)===1}function Qr(n){return!!n.template}function Mg(n){return(n[oe]&512)!==0}var Rg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function PD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ki(){return kD}function kD(n){return n.type.prototype.ngOnChanges&&(n.setInput=SP),TP}Ki.ngInherit=!0;function TP(){let n=FD(this),e=n?.current;if(e){let t=n.previous;if(t===os)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function SP(n,e,t,r,i){let o=this.declaredInputs[r],s=FD(n)||AP(n,{previous:os,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Rg(l&&l.currentValue,t,u===os),PD(n,e,i,t)}var OD="__ngSimpleChanges__";function FD(n){return n[OD]||null}function AP(n,e){return n[OD]=e}var A0=null;var jn=function(n,e,t){A0?.(n,e,t)},xP="svg",MP="math";function qn(n){for(;Array.isArray(n);)n=n[gr];return n}function VD(n,e){return qn(e[n])}function pn(n,e){return qn(e[n.index])}function LD(n,e){return n.data[e]}function Zr(n,e){let t=e[n];return zr(t)?t:t[gr]}function vm(n){return(n[oe]&128)===128}function RP(n){return mr(n[Pt])}function cd(n,e){return e==null?null:n[e]}function jD(n){n[Jo]=0}function BD(n){n[oe]&1024||(n[oe]|=1024,vm(n)&&kd(n))}function NP(n,e){for(;n>0;)e=e[_s],n--;return e}function Pd(n){return!!(n[oe]&9216||n[hn]?.dirty)}function Ng(n){n[$n].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),Pd(n)&&kd(n)}function kd(n){n[$n].changeDetectionScheduler?.notify(0);let e=Ui(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!vm(e)));)e=Ui(e)}function UD(n,e){if((n[oe]&256)===256)throw new J(911,!1);n[qr]===null&&(n[qr]=[]),n[qr].push(e)}function PP(n,e){if(n[qr]===null)return;let t=n[qr].indexOf(e);t!==-1&&n[qr].splice(t,1)}function Ui(n){let e=n[Pt];return mr(e)?e[Pt]:e}var me={lFrame:ZD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $D=!1;function kP(){return me.lFrame.elementDepthCount}function OP(){me.lFrame.elementDepthCount++}function FP(){me.lFrame.elementDepthCount--}function HD(){return me.bindingsEnabled}function VP(){return me.skipHydrationRootTNode!==null}function LP(n){return me.skipHydrationRootTNode===n}function jP(){me.skipHydrationRootTNode=null}function Fe(){return me.lFrame.lView}function nn(){return me.lFrame.tView}function gn(n){return me.lFrame.contextLView=n,n[An]}function mn(n){return me.lFrame.contextLView=null,n}function kt(){let n=qD();for(;n!==null&&n.type===64;)n=n.parent;return n}function qD(){return me.lFrame.currentTNode}function BP(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fu(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function zD(){return me.lFrame.isParent}function UP(){me.lFrame.isParent=!1}function GD(){return $D}function x0(n){$D=n}function $P(){return me.lFrame.bindingIndex}function HP(n){return me.lFrame.bindingIndex=n}function Od(){return me.lFrame.bindingIndex++}function WD(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function qP(){return me.lFrame.inI18n}function zP(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pg(e)}function GP(){return me.lFrame.currentDirectiveIndex}function Pg(n){me.lFrame.currentDirectiveIndex=n}function WP(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function KD(n){me.lFrame.currentQueryIndex=n}function KP(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[xn]:null}function QD(n,e,t){if(t&fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=KP(o),i===null||(o=o[_s],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=YD();return r.currentTNode=e,r.lView=n,!0}function _m(n){let e=YD(),t=n[ye];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?ZD(n):e}function ZD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JD(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var XD=JD;function wm(){let n=JD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function QP(n){return(me.lFrame.contextLView=NP(n,me.lFrame.contextLView))[An]}function Qi(){return me.lFrame.selectedIndex}function $i(n){me.lFrame.selectedIndex=n}function Em(){let n=me.lFrame;return LD(n.tView,n.selectedIndex)}function YP(){return me.lFrame.currentNamespace}var eC=!0;function Im(){return eC}function Dm(n){eC=n}function ZP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=kD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Cm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zl(n,e,t){tC(n,e,3,t)}function Jl(n,e,t,r){(n[oe]&3)===t&&tC(n,e,t,r)}function fg(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function tC(n,e,t,r){let i=r!==void 0?n[Jo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Jo]+=65536),(a<o||o==-1)&&(JP(n,t,e,u),n[Jo]=(n[Jo]&4294901760)+u+2),u++}function M0(n,e){jn(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),jn(5,n,e)}}function JP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Jo]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,M0(a,o)):M0(a,o)}var ns=-1,Hi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function XP(n){return n instanceof Hi}function e1(n){return(n.flags&8)!==0}function t1(n){return(n.flags&16)!==0}var pg={},kg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);let i=this.injector.get(e,pg,r);return i!==pg||t===pg?i:this.parentInjector.get(e,t,r)}};function nC(n){return n!==ns}function ld(n){return n&32767}function n1(n){return n>>16}function dd(n,e){let t=n1(n),r=e;for(;t>0;)r=r[_s],t--;return r}var Og=!0;function R0(n){let e=Og;return Og=n,e}var r1=256,rC=r1-1,iC=5,i1=0,Bn={};function o1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ru)&&(r=t[ru]),r==null&&(r=t[ru]=i1++);let i=r&rC,o=1<<i;e.data[n+(i>>iC)]|=o}function hd(n,e){let t=oC(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,gg(r.data,n),gg(e,null),gg(r.blueprint,null));let i=bm(n,e),o=n.injectorIndex;if(nC(i)){let s=ld(i),a=dd(i,e),u=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function gg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function oC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function bm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=lC(i),r===null)return ns;if(t++,i=i[_s],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ns}function Fg(n,e,t){o1(n,e,t)}function s1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(yD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function sC(n,e,t){if(t&fe.Optional||n!==void 0)return n;dm(e,"NodeInjector")}function aC(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),!(t&(fe.Self|fe.Host))){let i=n[us],o=ln(void 0);try{return i?i.get(e,r,t&fe.Optional):dD(e,r,t&fe.Optional)}finally{ln(o)}}return sC(r,e,t)}function uC(n,e,t,r=fe.Default,i){if(n!==null){if(e[oe]&2048&&!(r&fe.Self)){let s=d1(n,e,t,r,Bn);if(s!==Bn)return s}let o=cC(n,e,t,r,Bn);if(o!==Bn)return o}return aC(e,t,r,i)}function cC(n,e,t,r,i){let o=c1(t);if(typeof o=="function"){if(!QD(e,n,r))return r&fe.Host?sC(i,t,r):aC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))dm(t);else return s}finally{XD()}}else if(typeof o=="number"){let s=null,a=oC(n,e),u=ns,l=r&fe.Host?e[Hn][xn]:null;for((a===-1||r&fe.SkipSelf)&&(u=a===-1?bm(n,e):e[a+8],u===ns||!P0(r,!1)?a=-1:(s=e[ye],a=ld(u),e=dd(u,e)));a!==-1;){let h=e[ye];if(N0(o,a,h.data)){let p=a1(a,e,t,s,r,l);if(p!==Bn)return p}u=e[a+8],u!==ns&&P0(r,e[ye].data[a+8]===l)&&N0(o,a,e)?(s=h,a=ld(u),e=dd(u,e)):a=-1}}return i}function a1(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],u=r==null?Nd(a)&&Og:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=u1(a,s,t,u,l);return h!==null?ds(e,s,h,a):Bn}function u1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Qr(y)&&y.type===t)return u}return null}function ds(n,e,t,r){let i=n[t],o=e.data;if(XP(i)){let s=i;s.resolving&&LN(VN(o[t]));let a=R0(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?ln(s.injectImpl):null,h=QD(n,r,fe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&ZP(t,o[t],e)}finally{l!==null&&ln(l),R0(a),s.resolving=!1,XD()}}return i}function c1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ru)?n[ru]:void 0;return typeof e=="number"?e>=0?e&rC:l1:e}function N0(n,e,t){let r=1<<n;return!!(t[e+(n>>iC)]&r)}function P0(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var ji=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return uC(this._tNode,this._lView,e,xd(r),t)}};function l1(){return new ji(kt(),Fe())}function pu(n){return du(()=>{let e=n.prototype.constructor,t=e[ed]||Vg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ed]||Vg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Vg(n){return oD(n)?()=>{let e=Vg(Nt(n));return e&&e()}:is(n)}function d1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=cC(o,s,t,r|fe.Self,Bn);if(a!==Bn)return a;let u=o.parent;if(!u){let l=s[MD];if(l){let h=l.get(t,Bn,r);if(h!==Bn)return h}u=lC(s),s=s[_s]}o=u}return i}function lC(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[xn]:null}function Tm(n){return s1(kt(),n)}function k0(n,e=null,t=null,r){let i=dC(n,e,t,r);return i.resolveInjectorInitializers(),i}function dC(n,e=null,t=null,r,i=new Set){let o=[t||dn,hP(n)];return r=r||(typeof n=="object"?void 0:$t(n)),new au(o,e||mm(),r||null,i)}var tn=class n{static{this.THROW_IF_NOT_FOUND=ou}static{this.NULL=new rd}static create(e,t){if(Array.isArray(e))return k0({name:""},t,e,"");{let r=e.name??"";return k0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>F(pD)})}static{this.__NG_ELEMENT_ID__=-1}};var h1=new W("");h1.__NG_ELEMENT_ID__=n=>{let e=kt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new J(204,!1)};var f1="ngOriginalError";function mg(n){return n[f1]}var hC=!0,Sm=(()=>{class n{static{this.__NG_ELEMENT_ID__=p1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Lg=class extends Sm{constructor(e){super(),this._lView=e}onDestroy(e){return UD(this._lView,e),()=>PP(this._lView,e)}};function p1(){return new Lg(Fe())}var ws=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var jg=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,xD()&&(this.destroyRef=B(Sm,{optional:!0})??void 0,this.pendingTasks=B(ws,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=jg;function fd(...n){}function fC(n){let e,t;function r(){n=fd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function O0(n){return queueMicrotask(()=>n()),()=>{n=fd}}var Am="isAngularZone",pd=Am+"_ID",g1=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=hC}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,v1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Am)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,m1,fd,fd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},m1={};function xm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function y1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){fC(()=>{n.callbackScheduled=!1,Bg(n),n.isCheckStableRunning=!0,xm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bg(n)}function v1(n){let e=()=>{y1(n)},t=g1++;n._inner=n._inner.fork({name:"angular",properties:{[Am]:!0,[pd]:t,[pd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_1(u))return r.invokeTask(o,s,a,u);try{return F0(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),V0(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return F0(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!w1(u)&&e(),V0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Bg(n),xm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Bg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function F0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function V0(n){n._nesting--,xm(n)}var gd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function _1(n){return pC(n,"__ignore_ng_zone__")}function w1(n){return pC(n,"__scheduler_tick__")}function pC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function E1(n="zone.js",e){return n==="noop"?new gd:n==="zone.js"?new _e(e):n}var hr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&mg(e);for(;t&&mg(t);)t=mg(t);return t||null}},I1=new W("",{providedIn:"root",factory:()=>{let n=B(_e),e=B(hr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function D1(){return Fd(kt(),Fe())}function Fd(n,e){return new Jr(pn(n,e))}var Jr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=D1}}return n})();function gC(n){return(n.flags&128)===128}var mC=new Map,C1=0;function b1(){return C1++}function T1(n){mC.set(n[Rd],n)}function Ug(n){mC.delete(n[Rd])}var L0="__ngContext__";function qi(n,e){zr(e)?(n[L0]=e[Rd],T1(e)):n[L0]=e}function yC(n){return _C(n[uu])}function vC(n){return _C(n[Tn])}function _C(n){for(;n!==null&&!mr(n);)n=n[Tn];return n}var $g;function wC(n){$g=n}function S1(){if($g!==void 0)return $g;if(typeof document<"u")return document;throw new J(210,!1)}var Vd=new W("",{providedIn:"root",factory:()=>A1}),A1="ng",Mm=new W(""),qt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Rm=new W("",{providedIn:"root",factory:()=>S1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var x1="h",M1="b";var R1=()=>null;function Nm(n,e,t=!1){return R1(n,e,t)}var EC=!1,N1=new W("",{providedIn:"root",factory:()=>EC});var zl;function P1(){if(zl===void 0&&(zl=null,Sn.trustedTypes))try{zl=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zl}function j0(n){return P1()?.createScriptURL(n)||n}var md=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rD})`}};function gu(n){return n instanceof md?n.changingThisBreaksApplicationSecurity:n}function Pm(n,e){let t=k1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${rD})`)}return t===e}function k1(n){return n instanceof md&&n.getTypeName()||null}var O1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function IC(n){return n=String(n),n.match(O1)?n:"unsafe:"+n}var Ld=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ld||{});function F1(n){let e=CC();return e?e.sanitize(Ld.URL,n)||"":Pm(n,"URL")?gu(n):IC(rs(n))}function V1(n){let e=CC();if(e)return j0(e.sanitize(Ld.RESOURCE_URL,n)||"");if(Pm(n,"ResourceURL"))return j0(gu(n));throw new J(904,!1)}function L1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?V1:F1}function DC(n,e,t){return L1(e,t)(n)}function CC(){let n=Fe();return n&&n[$n].sanitizer}function bC(n){return n instanceof Function?n():n}function j1(n){return(n??B(tn)).get(qt)==="browser"}var fr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fr||{}),B1;function km(n,e){return B1(n,e)}function Xo(n,e,t,r,i){if(r!=null){let o,s=!1;mr(r)?o=r:zr(r)&&(s=!0,r=r[gr]);let a=qn(r);n===0&&t!==null?i==null?MC(e,t,a):yd(e,t,a,i||null,!0):n===1&&t!==null?yd(e,t,a,i||null,!0):n===2?tk(e,a,s):n===3&&e.destroyNode(a),o!=null&&rk(e,n,o,t,i)}}function U1(n,e){return n.createText(e)}function $1(n,e,t){n.setValue(e,t)}function TC(n,e,t){return n.createElement(e,t)}function H1(n,e){SC(n,e),e[gr]=null,e[xn]=null}function q1(n,e,t,r,i,o){r[gr]=i,r[xn]=e,jd(n,r,t,1,i,o)}function SC(n,e){e[$n].changeDetectionScheduler?.notify(9),jd(n,e,e[ct],2,null,null)}function z1(n){let e=n[uu];if(!e)return yg(n[ye],n);for(;e;){let t=null;if(zr(e))t=e[uu];else{let r=e[fn];r&&(t=r)}if(!t){for(;e&&!e[Tn]&&e!==n;)zr(e)&&yg(e[ye],e),e=e[Pt];e===null&&(e=n),zr(e)&&yg(e[ye],e),t=e&&e[Tn]}e=t}}function G1(n,e,t,r){let i=fn+r,o=t.length;r>0&&(t[i-1][Tn]=e),r<o-fn?(e[Tn]=t[i],fD(t,fn+r,e)):(t.push(e),e[Tn]=null),e[Pt]=t;let s=e[cs];s!==null&&t!==s&&AC(s,e);let a=e[ls];a!==null&&a.insertView(n),Ng(e),e[oe]|=128}function AC(n,e){let t=n[ad],r=e[Pt];if(zr(r))n[oe]|=ud.HasTransplantedViews;else{let i=r[Pt][Hn];e[Hn]!==i&&(n[oe]|=ud.HasTransplantedViews)}t===null?n[ad]=[e]:t.push(e)}function Om(n,e){let t=n[ad],r=t.indexOf(e);t.splice(r,1)}function Hg(n,e){if(n.length<=fn)return;let t=fn+e,r=n[t];if(r){let i=r[cs];i!==null&&i!==n&&Om(i,r),e>0&&(n[t-1][Tn]=r[Tn]);let o=nd(n,fn+e);H1(r[ye],r);let s=o[ls];s!==null&&s.detachView(o[ye]),r[Pt]=null,r[Tn]=null,r[oe]&=-129}return r}function xC(n,e){if(!(e[oe]&256)){let t=e[ct];t.destroyNode&&jd(n,e,t,3,null,null),z1(e)}}function yg(n,e){if(e[oe]&256)return;let t=De(null);try{e[oe]&=-129,e[oe]|=256,e[hn]&&Hp(e[hn]),K1(n,e),W1(n,e),e[ye].type===1&&e[ct].destroy();let r=e[cs];if(r!==null&&mr(e[Pt])){r!==e[Pt]&&Om(r,e);let i=e[ls];i!==null&&i.detachView(n)}Ug(e)}finally{De(t)}}function W1(n,e){let t=n.cleanup,r=e[od];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[od]=null);let i=e[qr];if(i!==null){e[qr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function K1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Hi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];jn(4,a,u);try{u.call(a)}finally{jn(5,a,u)}}else{jn(4,i,o);try{o.call(i)}finally{jn(5,i,o)}}}}}function Q1(n,e,t){return Y1(n,e.parent,t)}function Y1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[gr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Un.None||o===Un.Emulated)return null}return pn(r,t)}}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function MC(n,e,t){n.appendChild(e,t)}function B0(n,e,t,r,i){r!==null?yd(n,e,t,r,i):MC(n,e,t)}function RC(n,e){return n.parentNode(e)}function Z1(n,e){return n.nextSibling(e)}function J1(n,e,t){return ek(n,e,t)}function X1(n,e,t){return n.type&40?pn(n,t):null}var ek=X1,U0;function Fm(n,e,t,r){let i=Q1(n,r,e),o=e[ct],s=r.parent||e[xn],a=J1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)B0(o,i,t[u],a,!1);else B0(o,i,t,a,!1);U0!==void 0&&U0(o,r,e,t,i)}function nu(n,e){if(e!==null){let t=e.type;if(t&3)return pn(e,n);if(t&4)return qg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nu(n,r);{let i=n[e.index];return mr(i)?qg(-1,i):qn(i)}}else{if(t&128)return nu(n,e.next);if(t&32)return km(e,n)()||qn(n[e.index]);{let r=NC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ui(n[Hn]);return nu(i,r)}else return nu(n,e.next)}}}return null}function NC(n,e){if(e!==null){let r=n[Hn][xn],i=e.projection;return r.projection[i]}return null}function qg(n,e){let t=fn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return nu(r,i)}return e[Bi]}function tk(n,e,t){n.removeChild(null,e,t)}function Vm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&qi(qn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Vm(n,e,t.child,r,i,o,!1),Xo(e,n,i,a,o);else if(u&32){let l=km(t,r),h;for(;h=l();)Xo(e,n,i,h,o);Xo(e,n,i,a,o)}else u&16?nk(n,e,r,t,i,o):Xo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function jd(n,e,t,r,i,o){Vm(t,r,n.firstChild,e,i,o,!1)}function nk(n,e,t,r,i,o){let s=t[Hn],u=s[xn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Xo(e,n,i,h,o)}else{let l=u,h=s[Pt];gC(r)&&(l.flags|=128),Vm(n,e,l,h,i,o,!0)}}function rk(n,e,t,r,i){let o=t[Bi],s=qn(t);o!==s&&Xo(e,n,r,o,i);for(let a=fn;a<t.length;a++){let u=t[a];jd(u[ye],u,n,e,r,o)}}function ik(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fr.Important),n.setStyle(t,r,i,o))}}function ok(n,e,t){n.setAttribute(e,"style",t)}function PC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Tg(n,e,r),i!==null&&PC(n,e,i),o!==null&&ok(n,e,o)}var Xr={};function re(n=1){OC(nn(),Fe(),Qi()+n,!1)}function OC(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jl(e,o,0,t)}$i(t)}function se(n,e=fe.Default){let t=Fe();if(t===null)return F(n,e);let r=kt();return uC(r,t,Nt(n),e)}function FC(){let n="invalid";throw new Error(n)}function VC(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Gr.SignalBased&&(a=e[r][ur]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Gr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):PD(e,a,r,o)}finally{De(s)}}function sk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)$i(~i);else{let o=i,s=t[++r],a=t[++r];zP(s,o);let u=e[o];a(2,u)}}}finally{$i(-1)}}function Bd(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[gr]=i,p[oe]=r|4|128|8|64,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),jD(p),p[Pt]=p[_s]=n,p[An]=t,p[$n]=s||n&&n[$n],p[ct]=a||n&&n[ct],p[us]=u||n&&n[us]||null,p[xn]=o,p[Rd]=b1(),p[id]=h,p[MD]=l,p[Hn]=e.type==2?n[Hn]:p,p}function Ud(n,e,t,r,i){let o=n.data[e];if(o===null)o=ak(n,e,t,r,i),qP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=BP();o.injectorIndex=s===null?-1:s.injectorIndex}return fu(o,!0),o}function ak(n,e,t,r,i){let o=qD(),s=zD(),a=s?o:o&&o.parent,u=n.data[e]=hk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function LC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jC(n,e,t,r,i){let o=Qi(),s=r&2;try{$i(-1),s&&e.length>Kr&&OC(n,e,Kr,!1),jn(s?2:0,i),t(r,i)}finally{$i(o),jn(s?3:1,i)}}function BC(n,e,t){if(ND(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{De(r)}}}function UC(n,e,t){HD()&&(vk(n,e,t,pn(t,e)),(t.flags&64)===64&&WC(n,e,t))}function $C(n,e,t=pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function HC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Lm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Lm(n,e,t,r,i,o,s,a,u,l,h){let p=Kr+r,m=p+i,y=uk(p,m),b=typeof l=="function"?l():l;return y[ye]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function uk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xr);return t}function ck(n,e,t,r){let o=r.get(N1,EC)||t===Un.ShadowDom,s=n.selectRootElement(e,o);return lk(s),s}function lk(n){dk(n)}var dk=()=>null;function hk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return VP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Gr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?H0(r,t,l,a,u):H0(r,t,l,a)}return r}function H0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function fk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=$0(0,p.inputs,h,u,y),l=$0(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!pm(e)?xk(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function pk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qC(n,e,t,r,i,o,s,a){let u=pn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(jm(n,t,h,r,i),Nd(e)&&gk(t,e.index)):e.type&3?(r=pk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function gk(n,e){let t=Zr(e,n);t[oe]&16||(t[oe]|=64)}function zC(n,e,t,r){if(HD()){let i=r===null?null:{"":-1},o=wk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&GC(n,e,t,s,i,a),i&&Ek(t,r,i)}t.mergedAttrs=su(t.mergedAttrs,t.attrs)}function GC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Fg(hd(t,e),n,r[l].type);Dk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=LC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=su(t.mergedAttrs,h.hostAttrs),Ck(n,t,e,u,h),Ik(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}fk(n,t,o)}function mk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;yk(s)!=a&&s.push(a),s.push(t,r,o)}}function yk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function vk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Nd(t)&&bk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hd(t,e),qi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=ds(e,n,a,t);if(qi(l,e),s!==null&&Ak(e,a-i,l,u,t,s),Qr(u)){let h=Zr(t.index,e);h[An]=ds(e,n,a,t)}}}function WC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=GP();try{$i(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Pg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_k(u,l)}}finally{$i(-1),Pg(s)}}function _k(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(rP(e,s.selectors,!1))if(r||(r=[]),Qr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;zg(n,e,u)}else r.unshift(s),zg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function zg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ek(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function Ik(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qr(e)&&(t[""]=n)}}function Dk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ck(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=is(i.type,!0)),s=new Hi(o,Qr(i),se);n.blueprint[r]=s,t[r]=s,mk(n,e,r,LC(n,t,i.hostVars,Xr),i)}function bk(n,e,t){let r=pn(e,n),i=HC(t),o=n[$n].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=$d(n,Bd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Tk(n,e,t,r,i,o){let s=pn(n,e);Sk(e[ct],s,o,n.value,t,r,i)}function Sk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?rs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Ak(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];VC(r,t,u,l,h,p)}}function xk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function KC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function QC(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];KD(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function $d(n,e){return n[uu]?n[S0][Tn]=e:n[uu]=e,n[S0]=e,e}function Gg(n,e,t){KD(0);let r=De(null);try{e(n,t)}finally{De(r)}}function Mk(n){return n[od]??=[]}function Rk(n){return n.cleanup??=[]}function YC(n,e){let t=n[us],r=t?t.get(hr,null):null;r&&r.handleError(e)}function jm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];VC(h,l,r,a,u,i)}}function ZC(n,e,t){let r=VD(e,n);$1(n[ct],r,t)}function Nk(n,e){let t=Zr(e,n),r=t[ye];Pk(r,t);let i=t[gr];i!==null&&t[id]===null&&(t[id]=Nm(i,t[us])),Bm(r,t,t[An])}function Pk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Bm(n,e,t){_m(e);try{let r=n.viewQuery;r!==null&&Gg(1,r,t);let i=n.template;i!==null&&jC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ls]?.finishViewCreation(n),n.staticContentQueries&&QC(n,e),n.staticViewQueries&&Gg(2,n.viewQuery,t);let o=n.components;o!==null&&kk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,wm()}}function kk(n,e){for(let t=0;t<e.length;t++)Nk(n,e[t])}function Ok(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Bd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[cs]=l;let h=n[ls];return h!==null&&(u[ls]=h.createEmbeddedView(o)),Bm(o,u,t),u}finally{De(i)}}function q0(n,e){return!e||e.firstChild===null||gC(n)}function Fk(n,e,t,r=!0){let i=e[ye];if(G1(i,e,n,t),r){let s=qg(t,n),a=e[ct],u=RC(a,n[Bi]);u!==null&&q1(i,n[xn],a,e,u,s)}let o=e[id];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(qn(o)),mr(o)&&Vk(o,r);let s=t.type;if(s&8)vd(n,e,t.child,r);else if(s&32){let a=km(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=NC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ui(e[Hn]);vd(u[ye],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Vk(n,e){for(let t=fn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&vd(r[ye],r,i,e)}n[Bi]!==n[gr]&&e.push(n[Bi])}var JC=[];function Lk(n){return n[hn]??jk(n)}function jk(n){let e=JC.pop()??Object.create(Uk);return e.lView=n,e}function Bk(n){n.lView[hn]!==n&&(n.lView=null,JC.push(n))}var Uk=pe(P({},Ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kd(n.lView)},consumerOnSignalRead(){this.lView[hn]=this}});function $k(n){let e=n[hn]??Object.create(Hk);return e.lView=n,e}var Hk=pe(P({},Ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ui(n.lView);for(;e&&!XC(e[ye]);)e=Ui(e);e&&BD(e)},consumerOnSignalRead(){this.lView[hn]=this}});function XC(n){return n.type!==2}var qk=100;function eb(n,e=!0,t=0){let r=n[$n],i=r.rendererFactory,o=!1;o||i.begin?.();try{zk(n,t)}catch(s){throw e&&YC(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function zk(n,e){let t=GD();try{x0(!0),Wg(n,e);let r=0;for(;Pd(n);){if(r===qk)throw new J(103,!1);r++,Wg(n,1)}}finally{x0(t)}}function Gk(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[$n].inlineEffectRunner?.flush(),_m(e);let a=!0,u=null,l=null;o||(XC(n)?(l=Lk(e),u=pl(l)):FI()===null?(a=!1,l=$k(e),u=pl(l)):e[hn]&&(Hp(e[hn]),e[hn]=null));try{jD(e),HP(n.bindingStartIndex),t!==null&&jC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Zl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Jl(e,y,0,null),fg(e,0)}if(s||Wk(e),tb(e,0),n.contentQueries!==null&&QC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Zl(e,y)}else{let y=n.contentHooks;y!==null&&Jl(e,y,1),fg(e,1)}sk(n,e);let p=n.components;p!==null&&rb(e,p,0);let m=n.viewQuery;if(m!==null&&Gg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Zl(e,y)}else{let y=n.viewHooks;y!==null&&Jl(e,y,2),fg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[hg]){for(let y of e[hg])y();e[hg]=null}o||(e[oe]&=-73)}catch(h){throw o||kd(e),h}finally{l!==null&&(Up(l,u),a&&Bk(l)),wm()}}function tb(n,e){for(let t=yC(n);t!==null;t=vC(t))for(let r=fn;r<t.length;r++){let i=t[r];nb(i,e)}}function Wk(n){for(let e=yC(n);e!==null;e=vC(e)){if(!(e[oe]&ud.HasTransplantedViews))continue;let t=e[ad];for(let r=0;r<t.length;r++){let i=t[r];BD(i)}}}function Kk(n,e,t){let r=Zr(e,n);nb(r,t)}function nb(n,e){vm(n)&&Wg(n,e)}function Wg(n,e){let r=n[ye],i=n[oe],o=n[hn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$p(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)Gk(r,n,r.template,n[An]);else if(i&8192){tb(n,1);let a=r.components;a!==null&&rb(n,a,1)}}function rb(n,e,t){for(let r=0;r<e.length;r++)Kk(n,e[r],t)}function Um(n,e){let t=GD()?64:1088;for(n[$n].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=Ui(n);if(Mg(n)&&!r)return n;n=r}return null}var zi=class{get rootNodes(){let e=this._lView,t=e[ye];return vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[An]}set context(e){this._lView[An]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(mr(e)){let t=e[sd],r=t?t.indexOf(this):-1;r>-1&&(Hg(e,r),nd(t,r))}this._attachedToViewContainer=!1}xC(this._lView[ye],this._lView)}onDestroy(e){UD(this._lView,e)}markForCheck(){Um(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Ng(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,eb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Mg(this._lView),t=this._lView[cs];t!==null&&!e&&Om(t,this._lView),SC(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=Mg(this._lView),r=this._lView[cs];r!==null&&!t&&AC(r,this._lView),Ng(this._lView)}},$m=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}}return n})(),Qk=$m,Yk=class extends Qk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ok(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new zi(i)}};function Zk(){return Jk(kt(),Fe())}function Jk(n,e){return n.type&4?new Yk(e,n,Fd(n,e)):null}var JG=new RegExp(`^(\\d+)*(${M1}|${x1})*(.*)`);var Xk=()=>null;function z0(n,e){return Xk(n,e)}var hs=class{},Hm=new W("",{providedIn:"root",factory:()=>!1});var ib=new W(""),ob=new W(""),Kg=class{},_d=class{};function eO(n){let e=Error(`No component factory found for ${$t(n)}.`);return e[tO]=n,e}var tO="ngComponent";var Qg=class{resolveComponentFactory(e){throw eO(e)}},fs=class{static{this.NULL=new Qg}},ps=class{},Yi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>nO()}}return n})();function nO(){let n=Fe(),e=kt(),t=Zr(e.index,n);return(zr(t)?t:n)[ct]}var rO=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=y0(i,a);else if(o==2){let u=a,l=e[++s];r=y0(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var wd=class extends fs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wr(e);return new gs(t,this.ngModule)}};function G0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Gr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Gr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function iO(n){let e=n.toLowerCase();return e==="svg"?xP:e==="math"?MP:null}var gs=class extends _d{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=G0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return G0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=aP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof en?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new kg(e,s):e,u=a.get(ps,null);if(u===null)throw new J(407,!1);let l=a.get(rO,null),h=a.get(hs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?ck(m,r,this.componentDef.encapsulation,a):TC(m,y,iO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let x=null;b!==null&&(x=Nm(b,a,!0));let L=Lm(0,null,null,1,0,null,null,null,null,null,null),z=Bd(null,L,null,A,null,null,p,m,a,null,x);_m(z);let V,Z,ne=null;try{let X=this.componentDef,E,v=null;X.findHostDirectiveDefs?(E=[],v=new Map,X.findHostDirectiveDefs(X,E,v),E.push(X)):E=[X];let w=oO(z,b);ne=sO(w,b,X,E,z,p,m),Z=LD(L,Kr),b&&cO(m,X,b,r),t!==void 0&&lO(Z,this.ngContentSelectors,t),V=uO(ne,X,E,v,z,[dO]),Bm(L,z,null)}catch(X){throw ne!==null&&Ug(ne),Ug(z),X}finally{wm()}return new Zg(this.componentType,V,Fd(Z,z),z,Z)}finally{De(o)}}},Zg=class extends Kg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;jm(o[ye],o,i,e,t),this.previousInputValues.set(e,t);let s=Zr(this._tNode.index,o);Um(s,1)}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oO(n,e){let t=n[ye],r=Kr;return n[r]=e,Ud(t,r,2,"#host",null)}function sO(n,e,t,r,i,o,s){let a=i[ye];aO(r,n,e,s);let u=null;e!==null&&(u=Nm(e,i[us]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Bd(i,HC(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&zg(a,n,r.length-1),$d(i,p),i[n.index]=p}function aO(n,e,t,r){for(let i of n)e.mergedAttrs=su(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Yg(e,e.mergedAttrs,!0),t!==null&&kC(r,t,e))}function uO(n,e,t,r,i,o){let s=kt(),a=i[ye],u=pn(s,i);GC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ds(i,a,p,s);qi(m,i)}WC(a,i,s),u&&qi(u,i);let l=ds(i,a,s.directiveStart+s.componentOffset,s);if(n[An]=i[An]=l,o!==null)for(let h of o)h(l,e);return BC(a,s,i),l}function cO(n,e,t,r){if(r)Tg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=uP(e.selectors[0]);i&&Tg(n,t,i),o&&o.length>0&&PC(n,t,o.join(" "))}}function lO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function dO(){let n=kt();Cm(Fe()[ye],n)}var mu=(()=>{class n{static{this.__NG_ELEMENT_ID__=hO}}return n})();function hO(){let n=kt();return pO(n,Fe())}var fO=mu,sb=class extends fO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=bm(this._hostTNode,this._hostLView);if(nC(e)){let t=dd(e,this._hostLView),r=ld(e),i=t[ye].data[r+8];return new ji(i,t)}else return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=W0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=z0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,q0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!bP(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new gs(Wr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(en,null);A&&(o=A)}let h=Wr(u.componentType??{}),p=z0(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,q0(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(RP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Pt],l=new sb(u,u[xn],u[Pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fk(s,i,o,r),e.attachToViewContainerRef(),fD(vg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=W0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);r&&(nd(vg(this._lContainer),t),xC(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);return r&&nd(vg(this._lContainer),t)!=null?new zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function W0(n){return n[sd]}function vg(n){return n[sd]||(n[sd]=[])}function pO(n,e){let t,r=e[n.index];return mr(r)?t=r:(t=KC(r,e,null,n),e[n.index]=t,$d(e,t)),mO(t,e,n,r),new sb(t,n,e)}function gO(n,e){let t=n[ct],r=t.createComment(""),i=pn(e,n),o=RC(t,i);return yd(t,o,r,Z1(t,i),!1),r}var mO=_O,yO=()=>!1;function vO(n,e,t){return yO(n,e,t)}function _O(n,e,t,r){if(n[Bi])return;let i;t.type&8?i=qn(r):i=gO(e,t),n[Bi]=i}var K0=new Set;function yu(n){K0.has(n)||(K0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function wO(n){return typeof n=="function"&&n[ur]!==void 0}function vu(n,e){yu("NgSignals");let t=WI(n),r=t[ur];return e?.equal&&(r.equal=e.equal),t.set=i=>qp(r,i),t.update=i=>KI(r,i),t.asReadonly=EO.bind(t),t}function EO(){let n=this[ur];if(n.readonlyFn===void 0){let e=()=>this();e[ur]=n,n.readonlyFn=e}return n.readonlyFn}function ab(n){return wO(n)&&typeof n.set=="function"}function IO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(TO))}return o}return Ed.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>SO(o));e.push(u)}),CO(),Promise.all(e).then(()=>{})}var Ed=new Map,DO=new Set;function CO(){let n=Ed;return Ed=new Map,n}function bO(){return Ed.size===0}function TO(n){return typeof n=="string"?n:n.text()}function SO(n){DO.delete(n)}function AO(n){return Object.getPrototypeOf(n.prototype).constructor}function ei(n){let e=AO(n.type),t=!0,r=[n];for(;e;){let i;if(Qr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Gl(n.inputs),s.inputTransforms=Gl(n.inputTransforms),s.declaredInputs=Gl(n.declaredInputs),s.outputs=Gl(n.outputs);let a=i.hostBindings;a&&PO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&RO(n,u),l&&NO(n,l),xO(n,i),xN(n.outputs,i.outputs),Qr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ei&&(t=!1)}}e=Object.getPrototypeOf(e)}MO(r)}function xO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function MO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=su(i.hostAttrs,t=su(t,i.hostAttrs))}}function Gl(n){return n===os?{}:n===dn?[]:n}function RO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function NO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function PO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function qm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Yr=class{},cu=class{};var Id=class extends Yr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);let o=ID(e);this._bootstrapComponents=bC(o.bootstrap),this._r3Injector=dC(e,t,[{provide:Yr,useValue:this},{provide:fs,useValue:this.componentFactoryResolver},...r],$t(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dd=class extends cu{constructor(e){super(),this.moduleType=e}create(e){return new Id(this.moduleType,e,[])}};function kO(n,e,t){return new Id(n,e,t,!1)}var Jg=class extends Yr{constructor(e){super(),this.componentFactoryResolver=new wd(this),this.instance=null;let t=new au([...e.providers,{provide:Yr,useValue:this},{provide:fs,useValue:this.componentFactoryResolver}],e.parent||mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Hd(n,e,t=null){return new Jg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function ub(n){return FO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function FO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Gi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function VO(n,e,t,r){let i=Gi(n,e,t);return Gi(n,e+1,r)||i}function LO(n){return(n.flags&32)===32}function jO(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ud(e,n,4,s||null,a||null);zC(e,t,h,cd(l,u)),Cm(e,h);let p=h.tView=Lm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function BO(n,e,t,r,i,o,s,a,u,l){let h=t+Kr,p=e.firstCreatePass?jO(h,e,n,r,i,o,s,a,u):e.data[h];fu(p,!1);let m=UO(e,n,p,t);Im()&&Fm(e,n,m,p),qi(m,n);let y=KC(m,n,m,p);return n[h]=y,$d(n,y),vO(y,p,n),ym(p)&&UC(e,n,p),u!=null&&$C(n,p,l),p}function yr(n,e,t,r,i,o,s,a){let u=Fe(),l=nn(),h=cd(l.consts,o);return BO(u,l,n,e,t,r,i,h,s,a),yr}var UO=$O;function $O(n,e,t,r){return Dm(!0),e[ct].createComment("")}var es=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(es||{}),cb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Xg=class n{constructor(){this.ngZone=B(_e),this.scheduler=B(hs),this.errorHandler=B(hr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[es.EarlyRead,es.Write,es.MixedReadWrite,es.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},em=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function zm(n,e){!e?.injector&&DP(zm);let t=e?.injector??B(tn);return j1(t)?(yu("NgAfterNextRender"),qO(n,t,e,!0)):zO}function HO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function qO(n,e,t,r){let i=e.get(cb);i.impl??=e.get(Xg);let o=t?.phase??es.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Sm):null,a=new em(i.impl,HO(n,o),r,s);return i.impl.register(a),a}var zO={destroy(){}};function qd(n,e,t,r){let i=Fe(),o=Od();if(Gi(i,o,e)){let s=nn(),a=Em();Tk(a,i,n,e,t,r)}return qd}function GO(n,e,t,r){return Gi(n,Od(),t)?e+rs(t)+r:Xr}function WO(n,e,t,r,i,o){let s=$P(),a=VO(n,s,t,i);return WD(2),a?e+rs(t)+r+rs(i)+o:Xr}function Wl(n,e){return n<<17|e<<2}function Wi(n){return n>>17&32767}function KO(n){return(n&2)==2}function QO(n,e){return n&131071|e<<17}function tm(n){return n|2}function ms(n){return(n&131068)>>2}function _g(n,e){return n&-131069|e<<2}function YO(n){return(n&1)===1}function nm(n){return n|1}function ZO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wi(s),u=ms(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||hu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Wi(n[a+1]);n[r+1]=Wl(m,a),m!==0&&(n[m+1]=_g(n[m+1],r)),n[a+1]=QO(n[a+1],r)}else n[r+1]=Wl(a,0),a!==0&&(n[a+1]=_g(n[a+1],r)),a=r;else n[r+1]=Wl(u,0),a===0?a=r:n[u+1]=_g(n[u+1],r),u=r;l&&(n[r+1]=tm(n[r+1])),Q0(n,h,r,!0),Q0(n,h,r,!1),JO(e,h,n,r,o),s=Wl(a,u),o?e.classBindings=s:e.styleBindings=s}function JO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&hu(o,e)>=0&&(t[r+1]=nm(t[r+1]))}function Q0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wi(i):ms(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];XO(u,e)&&(a=!0,n[s+1]=r?nm(l):tm(l)),s=r?Wi(l):ms(l)}a&&(n[t+1]=r?tm(i):nm(i))}function XO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?hu(n,e)>=0:!1}function vr(n,e,t){let r=Fe(),i=Od();if(Gi(r,i,e)){let o=nn(),s=Em();qC(o,s,r,n,e,r[ct],t,!1)}return vr}function Y0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";jm(n,t,o[s],s,r)}function zd(n,e){return eF(n,e,null,!0),zd}function eF(n,e,t,r){let i=Fe(),o=nn(),s=WD(2);if(o.firstUpdatePass&&nF(o,n,s,r),e!==Xr&&Gi(i,s,e)){let a=o.data[Qi()];aF(o,a,i,i[ct],n,i[s+1]=uF(e,t),r,s)}}function tF(n,e){return e>=n.expandoStartIndex}function nF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Qi()],s=tF(n,t);cF(o,r)&&e===null&&!s&&(e=!1),e=rF(i,o,e,r),ZO(i,o,e,t,s,r)}}function rF(n,e,t,r){let i=WP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wg(null,n,e,t,r),t=lu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wg(i,n,e,t,r),o===null){let u=iF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=wg(null,n,e,u[1],r),u=lu(u,e.attrs,r),oF(n,e,r,u))}else o=sF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function iF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ms(r)!==0)return n[Wi(r)]}function oF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wi(i)]=r}function sF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=lu(r,s,t)}return lu(r,e.attrs,t)}function wg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=lu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function lu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),QN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function aF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=YO(l)?Z0(u,e,t,i,ms(l),s):void 0;if(!Cd(h)){Cd(o)||KO(l)&&(o=Z0(u,null,t,i,a,s));let p=VD(Qi(),t);ik(r,s,p,i,o)}}function Z0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Xr&&(m=p?dn:void 0);let y=p?lg(m,r):h===r?m:void 0;if(l&&!Cd(y)&&(y=lg(u,r)),Cd(y)&&(a=y,s))return a;let b=n[i+1];i=s?Wi(b):ms(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=lg(u,r))}return a}function Cd(n){return n!==void 0}function uF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$t(gu(n)))),n}function cF(n,e){return(n.flags&(e?8:16))!==0}function lF(n,e,t,r,i,o){let s=e.consts,a=cd(s,i),u=Ud(e,n,2,r,a);return zC(e,t,u,cd(s,o)),u.attrs!==null&&Yg(u,u.attrs,!1),u.mergedAttrs!==null&&Yg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function U(n,e,t,r){let i=Fe(),o=nn(),s=Kr+n,a=i[ct],u=o.firstCreatePass?lF(s,o,i,e,t,r):o.data[s],l=dF(o,i,u,a,e,n);i[s]=l;let h=ym(u);return fu(u,!0),kC(a,l,u),!LO(u)&&Im()&&Fm(o,i,l,u),kP()===0&&qi(l,i),OP(),h&&(UC(o,i,u),BC(o,u,i)),r!==null&&$C(i,u),U}function G(){let n=kt();zD()?UP():(n=n.parent,fu(n,!1));let e=n;LP(e)&&jP(),FP();let t=nn();return t.firstCreatePass&&(Cm(t,n),ND(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&e1(e)&&Y0(t,e,Fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&t1(e)&&Y0(t,e,Fe(),e.stylesWithoutHost,!1),G}function we(n,e,t,r){return U(n,e,t,r),G(),we}var dF=(n,e,t,r,i,o)=>(Dm(!0),TC(r,i,YP()));function ti(){return Fe()}var bd="en-US";var hF=bd;function fF(n){typeof n=="string"&&(hF=n.toLowerCase().replace(/_/g,"-"))}var pF=(n,e,t)=>{};function Ne(n,e,t,r){let i=Fe(),o=nn(),s=kt();return lb(o,i,i[ct],s,n,e,r),Ne}function gF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[od],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function lb(n,e,t,r,i,o,s){let a=ym(r),l=n.firstCreatePass&&Rk(n),h=e[An],p=Mk(e),m=!0;if(r.type&3||s){let A=pn(r,e),x=s?s(A):A,L=p.length,z=s?Z=>s(qn(Z[r.index])):r.index,V=null;if(!s&&a&&(V=gF(n,e,i,r.index)),V!==null){let Z=V.__ngLastListenerFn__||V;Z.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,m=!1}else{o=X0(r,e,h,o),pF(A,i,o);let Z=t.listen(x,i,o);p.push(o,Z),l&&l.push(i,z,L,L+1)}}else o=X0(r,e,h,o);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let x=0;x<A;x+=2){let L=b[x],z=b[x+1],ne=e[L][z].subscribe(o),X=p.length;p.push(o,ne),l&&l.push(i,r.index,X,-(X+1))}}}function J0(n,e,t,r){let i=De(null);try{return jn(6,e,t),t(r)!==!1}catch(o){return YC(n,o),!1}finally{jn(7,e,t),De(i)}}function X0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Zr(n.index,e):e;Um(s,5);let a=J0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=J0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function yn(n=1){return QP(n)}function ue(n,e=""){let t=Fe(),r=nn(),i=n+Kr,o=r.firstCreatePass?Ud(r,i,1,e,null):r.data[i],s=mF(r,t,o,e,n);t[i]=s,Im()&&Fm(r,t,s,o),fu(o,!1)}var mF=(n,e,t,r,i)=>(Dm(!0),U1(e[ct],r));function Ot(n){return db("",n,""),Ot}function db(n,e,t){let r=Fe(),i=GO(r,n,e,t);return i!==Xr&&ZC(r,Qi(),i),db}function _r(n,e,t,r,i){let o=Fe(),s=WO(o,n,e,t,r,i);return s!==Xr&&ZC(o,Qi(),s),_r}function Se(n,e,t){ab(e)&&(e=e());let r=Fe(),i=Od();if(Gi(r,i,e)){let o=nn(),s=Em();qC(o,s,r,n,e,r[ct],t,!1)}return Se}function xe(n,e){let t=ab(n);return t&&n.set(e),t}function Ae(n,e){let t=Fe(),r=nn(),i=kt();return lb(r,t,t[ct],i,n,e),Ae}function yF(n,e,t){let r=nn();if(r.firstCreatePass){let i=Qr(n);rm(t,r.data,r.blueprint,i,!0),rm(e,r.data,r.blueprint,i,!1)}}function rm(n,e,t,r,i){if(n=Nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)rm(n[o],e,t,r,i);else{let o=nn(),s=Fe(),a=kt(),u=as(n)?n:Nt(n.provide),l=AD(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(as(n)||!n.multi){let y=new Hi(l,i,se),b=Ig(u,e,i?h:h+m,p);b===-1?(Fg(hd(a,s),o,u),Eg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Ig(u,e,h+m,p),b=Ig(u,e,h,h+m),A=y>=0&&t[y],x=b>=0&&t[b];if(i&&!x||!i&&!A){Fg(hd(a,s),o,u);let L=wF(i?_F:vF,t.length,i,r,l);!i&&x&&(t[b].providerFactory=L),Eg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=hb(t[i?b:y],l,!i&&r);Eg(o,n,y>-1?y:b,L)}!i&&r&&x&&t[b].componentProviders++}}}function Eg(n,e,t,r){let i=as(e),o=mP(e);if(i||o){let u=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function hb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ig(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function vF(n,e,t,r){return im(this.multi,[])}function _F(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ds(t,t[ye],this.providerFactory.index,r);o=a.slice(0,s),im(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],im(i,o);return o}function im(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wF(n,e,t,r,i){let o=new Hi(n,t,se);return o.multi=[],o.index=e,o.componentProviders=0,hb(o,i,r&&!t),o}function Gd(n,e=[]){return t=>{t.providersResolver=(r,i)=>yF(r,i?i(n):n,e)}}var EF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=bD(!1,t.type),i=r.length>0?Hd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(F(en))})}}return n})();function fb(n){yu("NgStandalone"),n.getStandaloneInjector=e=>e.get(EF).getOrCreateStandaloneInjector(n)}var Kl=null;function IF(n){Kl!==null&&(n.defaultEncapsulation!==Kl.defaultEncapsulation||n.preserveWhitespaces!==Kl.preserveWhitespaces)||(Kl=n)}var pr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pb=new pr("18.2.13");var Wd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Gm=new W(""),_u=new W(""),Kd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Wm||(DF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(_e),F(Qd),F(_u))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Qd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Wm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function DF(n){Wm=n}var Wm;function Zi(n){return!!n&&typeof n.then=="function"}function gb(n){return!!n&&typeof n.subscribe=="function"}var Yd=new W(""),mb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(Yd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Zi(o))t.push(o);else if(gb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Km=new W("");function CF(){GI(()=>{throw new J(600,!1)})}function bF(n){return n.isBoundToModule}var TF=10;function SF(n,e,t){try{let r=t();return Zi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function yb(n,e){return Array.isArray(e)?e.reduce(yb,n):P(P({},n),e)}var ni=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(I1),this.afterRenderManager=B(cb),this.zonelessEnabled=B(Hm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=B(ws).hasPendingTasks.pipe(Q(t=>!t)),this._injector=B(en)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof _d;if(!this._injector.get(mb).done){let m=!i&&ED(t),y=!1;throw new J(405,y)}let s;i?s=t:s=this._injector.get(fs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=bF(s)?void 0:this._injector.get(Yr),u=r||s.selector,l=s.create(tn.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Gm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Xl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ps,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<TF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)AF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Pd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Xl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Km,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Xl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function AF(n,e,t,r){if(!t&&!Pd(n))return;eb(n,e,t&&!r?0:1)}var om=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zd=(()=>{class n{compileModuleSync(t){return new Dd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ID(t),o=bC(i.declarations).reduce((s,a)=>{let u=Wr(a);return u&&s.push(new gs(u)),s},[]);return new om(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xF=new W("");function MF(n,e,t){let r=new Dd(t);return Promise.resolve(r)}function eD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var RF=(()=>{class n{constructor(){this.zone=B(_e),this.changeDetectionScheduler=B(hs),this.applicationRef=B(ni)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(pe(P({},vb()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:ss,multi:!0,useFactory:()=>{let r=B(RF,{optional:!0});return()=>r.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let r=B(PF);return()=>{r.initialize()}}},e===!0?{provide:ib,useValue:!0}:[],{provide:ob,useValue:t??hC}]}function vb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var PF=(()=>{class n{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=B(_e),this.pendingTasks=B(ws)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kF=(()=>{class n{constructor(){this.appRef=B(ni),this.taskService=B(ws),this.ngZone=B(_e),this.zonelessEnabled=B(Hm),this.disableScheduling=B(ib,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(ob,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?O0:fC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,O0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OF(){return typeof $localize<"u"&&$localize.locale||bd}var Qm=new W("",{providedIn:"root",factory:()=>B(Qm,fe.Optional|fe.SkipSelf)||OF()});var Td=new W("");function Ql(n){return!n.moduleRef}function FF(n){let e=Ql(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{Ql(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ql(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Td);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Td);s.add(o),n.moduleRef.onDestroy(()=>{Xl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return SF(r,t,()=>{let o=e.get(mb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Qm,bd);if(fF(s||bd),Ql(n)){let a=e.get(ni);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return VF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function VF(n,e){let t=n.injector.get(ni);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var _b=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>E1(r?.ngZone,pe(P({},vb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[NF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:hs,useExisting:kF}],u=kO(t.moduleType,this.injector,a);return FF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=yb({},r);return MF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Td,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),iu=null,wb=new W("");function LF(n){if(iu&&!iu.get(wb,!1))throw new J(400,!1);CF(),iu=n;let e=n.get(_b);return UF(n),e}function Ym(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=Eb();if(!s||s.injector.get(wb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):LF(jF(a,r))}return BF(i)}}function jF(n=[],e){return tn.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:Td,useValue:new Set([()=>iu=null])},...n]})}function BF(n){let e=Eb();if(!e)throw new J(401,!1);return e}function Eb(){return iu?.get(_b)??null}function UF(n){n.get(Mm,null)?.forEach(t=>t())}function Zm(){return!1}var Ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=$F}}return n})();function $F(n){return HF(kt(),Fe(),(n&16)===16)}function HF(n,e,t){if(Nd(n)&&!t){let r=Zr(n.index,e);return new zi(r,r)}else if(n.type&175){let r=e[Hn];return new zi(r,e)}return null}var sm=class{constructor(){}supports(e){return ub(e)}create(e){return new am(e)}},qF=(n,e)=>e,am=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<tD(r,i,o)?t:r,a=tD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ub(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,OO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new um(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},um=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new cm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function nD(){return new Jm([new sm])}var Jm=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:nD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nD()),deps:[[n,new hm,new vs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();var Ib=Ym(null,"core",[]),Db=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(ni))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function Xi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function wu(n,e){yu("NgSignals");let t=HI(n);return e?.equal&&(t[ur].equal=e.equal),t}function wr(n){let e=De(null);try{return n()}finally{De(e)}}function Cb(n){let e=Wr(n);if(!e)return null;let t=new gs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ab=null;function Gn(){return Ab}function xb(n){Ab??=n}var Jd=class{};var zt=new W(""),ny=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(zF),providedIn:"platform"})}}return n})(),Mb=new W(""),zF=(()=>{class n extends ny{constructor(){super(),this._doc=B(zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gn().getBaseHref(this._doc)}onPopState(t){let r=Gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function ry(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function bb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Er(n){return n&&n[0]!=="?"?"?"+n:n}var Ir=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(iy),providedIn:"root"})}}return n})(),Rb=new W(""),iy=(()=>{class n extends Ir{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ry(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ny),F(Rb,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nb=(()=>{class n extends Ir{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ry(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ny),F(Rb,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Es=(()=>{class n{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=KF(bb(Tb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Er(r))}normalize(t){return n.stripTrailingSlash(WF(this._basePath,Tb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Er}static{this.joinWithSlash=ry}static{this.stripTrailingSlash=bb}static{this.\u0275fac=function(r){return new(r||n)(F(Ir))}}static{this.\u0275prov=q({token:n,factory:()=>GF(),providedIn:"root"})}}return n})();function GF(){return new Es(F(Ir))}function WF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Tb(n){return n.replace(/\/index.html$/,"")}function KF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Pb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Xm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ri=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Xm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Sb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Sb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(se(mu),se($m),se(Jm))}}static{this.\u0275dir=Ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Sb(n,e){n.context.$implicit=e.item}var kb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})(),oy="browser",QF="server";function YF(n){return n===oy}function eo(n){return n===QF}var Ob=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>YF(B(qt))?new ey(B(zt),window):new ty})}}return n})(),ey=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=ZF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function ZF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ty=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xd=class{};var uy=class extends Jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},cy=class n extends uy{static makeCurrent(){xb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=XF();return t==null?null:eV(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pb(document.cookie,e)}},Iu=null;function XF(){return Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null}function eV(n){return new URL(n,document.baseURI).pathname}var ly=class{addToWindow(e){Sn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Sn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Sn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Sn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Sn.frameworkStabilizers||(Sn.frameworkStabilizers=[]),Sn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Gn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},tV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),dy=new W(""),jb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(dy),F(_e))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),eh=class{constructor(e){this._doc=e}},sy="ng-app-id",Bb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eo(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${sy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(sy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(sy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(zt),F(Vd),F(Rm,8),F(qt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),ay={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fy=/%COMP%/g,Ub="%COMP%",nV=`_nghost-${Ub}`,rV=`_ngcontent-${Ub}`,iV=!0,oV=new W("",{providedIn:"root",factory:()=>iV});function sV(n){return rV.replace(fy,n)}function aV(n){return nV.replace(fy,n)}function $b(n,e){return e.map(t=>t.replace(fy,n))}var Fb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=eo(a),this.defaultRenderer=new Du(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Un.ShadowDom&&(r=pe(P({},r),{encapsulation:Un.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof Cu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Un.Emulated:o=new th(u,l,r,this.appId,h,s,a,p);break;case Un.ShadowDom:return new hy(u,l,t,r,s,a,this.nonce,p);default:o=new Cu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(jb),F(Bb),F(Vd),F(oV),F(zt),F(qt),F(_e),F(Rm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Du=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ay[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ay[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ay[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Gn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Vb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hy=class extends Du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=$b(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cu=class extends Du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?$b(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},th=class extends Cu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=sV(l),this.hostAttr=aV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},uV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Lb=["alt","control","meta","shift"],cV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Lb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=cV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Lb.forEach(s=>{if(s!==i){let a=lV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function hV(){cy.makeCurrent()}function fV(){return new hr}function pV(){return wC(document),document}var gV=[{provide:qt,useValue:oy},{provide:Mm,useValue:hV,multi:!0},{provide:zt,useFactory:pV,deps:[]}],Hb=Ym(Ib,"browser",gV),mV=new W(""),yV=[{provide:_u,useClass:ly,deps:[]},{provide:Gm,useClass:Kd,deps:[_e,Qd,_u]},{provide:Kd,useClass:Kd,deps:[_e,Qd,_u]}],vV=[{provide:Md,useValue:"root"},{provide:hr,useFactory:fV,deps:[]},{provide:dy,useClass:uV,multi:!0,deps:[zt,_e,qt]},{provide:dy,useClass:dV,multi:!0,deps:[zt]},Fb,Bb,jb,{provide:ps,useExisting:Fb},{provide:Xd,useClass:tV,deps:[]},[]],qb=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Vd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(mV,12))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({providers:[...vV,...yV],imports:[kb,Db]})}}return n})();var zb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(se(Yi),se(Jr))}}static{this.\u0275dir=Ht({type:n})}}return n})(),_V=(()=>{class n extends eT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pu(n)))(i||n)}})()}static{this.\u0275dir=Ht({type:n,features:[ei]})}}return n})(),tT=new W("");var wV={provide:tT,useExisting:ys(()=>bt),multi:!0};function EV(){let n=Gn()?Gn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var IV=new W(""),bt=(()=>{class n extends eT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!EV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Yi),se(Jr),se(IV,8))}}static{this.\u0275dir=Ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Gd([wV]),ei]})}}return n})();var nT=new W(""),rT=new W("");function iT(n){return n!=null}function oT(n){return Zi(n)?Ce(n):n}function sT(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function aT(n,e){return e.map(t=>t(n))}function DV(n){return!n.validate}function uT(n){return n.map(e=>DV(e)?e:t=>e.validate(t))}function CV(n){if(!n)return null;let e=n.filter(iT);return e.length==0?null:function(t){return sT(aT(t,e))}}function gy(n){return n!=null?CV(uT(n)):null}function bV(n){if(!n)return null;let e=n.filter(iT);return e.length==0?null:function(t){let r=aT(t,e).map(oT);return rg(r).pipe(Q(sT))}}function my(n){return n!=null?bV(uT(n)):null}function Wb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TV(n){return n._rawValidators}function SV(n){return n._rawAsyncValidators}function py(n){return n?Array.isArray(n)?n:[n]:[]}function rh(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kb(n,e){let t=py(e);return py(n).forEach(i=>{rh(t,i)||t.push(i)}),t}function Qb(n,e){return py(e).filter(t=>!rh(n,t))}var ih=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=my(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Cs=class extends ih{get formDirective(){return null}get path(){return null}},Mu=class extends ih{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},oh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},AV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},a5=pe(P({},AV),{"[class.ng-submitted]":"isSubmitted"}),Gt=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Mu,2))}}static{this.\u0275dir=Ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ei]})}}return n})(),Wt=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Cs,10))}}static{this.\u0275dir=Ht({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ei]})}}return n})();var bu="VALID",nh="INVALID",Is="PENDING",Tu="DISABLED",bs=class{},sh=class extends bs{constructor(e,t){super(),this.value=e,this.source=t}},Au=class extends bs{constructor(e,t){super(),this.pristine=e,this.source=t}},xu=class extends bs{constructor(e,t){super(),this.touched=e,this.source=t}},Ds=class extends bs{constructor(e,t){super(),this.status=e,this.source=t}};function cT(n){return(ch(n)?n.validators:n)||null}function xV(n){return Array.isArray(n)?gy(n):n||null}function lT(n,e){return(ch(e)?e.asyncValidators:n)||null}function MV(n){return Array.isArray(n)?my(n):n||null}function ch(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function RV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function NV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var ah=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=wu(()=>this.statusReactive()),this.statusReactive=vu(void 0),this._pristine=wu(()=>this.pristineReactive()),this.pristineReactive=vu(!0),this._touched=wu(()=>this.touchedReactive()),this.touchedReactive=vu(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return wr(this.statusReactive)}set status(e){wr(()=>this.statusReactive.set(e))}get valid(){return this.status===bu}get invalid(){return this.status===nh}get pending(){return this.status==Is}get disabled(){return this.status===Tu}get enabled(){return this.status!==Tu}get pristine(){return wr(this.pristineReactive)}set pristine(e){wr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return wr(this.touchedReactive)}set touched(e){wr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qb(e,this._rawAsyncValidators))}hasValidator(e){return rh(this._rawValidators,e)}hasAsyncValidator(e){return rh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Au(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Au(!0,r))}markAsPending(e={}){this.status=Is;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this.errors=null,this._forEachChild(i=>{i.disable(pe(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,r)),this._events.next(new Ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bu,this._forEachChild(r=>{r.enable(pe(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bu||this.status===Is)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,t)),this._events.next(new Ds(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tu:bu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Is,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=oT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ds(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Tu:this.errors?nh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Is)?Is:this._anyControlsHaveStatus(nh)?nh:bu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Au(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ch(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=MV(this._rawAsyncValidators)}},uh=class extends ah{constructor(e,t,r){super(cT(t),lT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NV(this,!0,e),Object.keys(e).forEach(r=>{RV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var yy=new W("CallSetDisabledState",{providedIn:"root",factory:()=>vy}),vy="always";function PV(n,e){return[...e.path,n]}function dT(n,e,t=vy){hT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),OV(n,e),VV(n,e),FV(n,e),kV(n,e)}function Yb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hT(n,e){let t=TV(n);e.validator!==null?n.setValidators(Wb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=SV(n);e.asyncValidator!==null?n.setAsyncValidators(Wb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Yb(e._rawValidators,i),Yb(e._rawAsyncValidators,i)}function OV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fT(n,e)})}function FV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LV(n,e){n==null,hT(n,e)}function jV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function BV(n){return Object.getPrototypeOf(n.constructor)===_V}function UV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $V(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===bt?t=o:BV(o)?r=o:i=o}),i||r||t||null}var HV={provide:Cs,useExisting:ys(()=>Ft)},Su=Promise.resolve(),Ft=(()=>{class n extends Cs{get submitted(){return wr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=wu(()=>this.submittedReactive()),this.submittedReactive=vu(!1),this._directives=new Set,this.ngSubmit=new nt,this.form=new uh({},gy(t),my(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Su.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),dT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Su.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Su.then(()=>{let r=this._findContainer(t.path),i=new uh({});LV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Su.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Su.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),UV(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(se(nT,10),se(rT,10),se(yy,8))}}static{this.\u0275dir=Ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gd([HV]),ei]})}}return n})();function Zb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jb(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qV=class extends ah{constructor(e=null,t,r){super(cT(t),lT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ch(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Jb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Jb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zV={provide:Mu,useExisting:ys(()=>Vt)},Xb=Promise.resolve(),Vt=(()=>{class n extends Mu{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new qV,this._registered=!1,this.name="",this.update=new nt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$V(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),jV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Xb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Xi(r);Xb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?PV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(se(Cs,9),se(nT,10),se(rT,10),se(tT,10),se(Ji,8),se(yy,8))}}static{this.\u0275dir=Ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gd([zV]),ei,Ki]})}}return n})(),Kt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ht({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var GV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();var pT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yy,useValue:t.callSetDisabledState??vy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[GV]})}}return n})();var WV="firebase",KV="10.14.1";jr(WV,KV,"app");var Ru=new pr("ANGULARFIRE2_VERSION");var QV=(n,e)=>{let t=e?[e]:kI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},no=class{constructor(){return QV(YV)}},YV="app-check";function _y(){}var lh=class{zone;delegate;constructor(e,t=eg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},wy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_y,{},_y,_y)),t.pipe(ut({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},dh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new lh(Zone.current)),this.insideAngular=t.run(()=>new lh(Zone.current,Ja)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(_e))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZV(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Qt(n){return JV(ZV())(n)}function JV(n){return function(t){return t=t.lift(new wy(n.ngZone)),t.pipe(Cn(n.outsideAngular),un(n.insideAngular))}}var XV="firebase",eL="10.14.1";Xt.registerVersion(XV,eL,"app-compat");var tL=["ngOnDestroy"],yT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var hh=class{constructor(e){return e}},Ts=new W("angularfire2.app.options"),Ss=new W("angularfire2.app.name");function Nu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Xt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Xt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hh(s)}var nL=(n,...e)=>{Zm()&&typeof console<"u"&&console[n](...e)},rL={provide:hh,useFactory:Nu,deps:[Ts,_e,[new vs,Ss]]},vT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ts,useValue:t},{provide:Ss,useValue:r}]}}constructor(t){Xt.registerVersion("angularfire",Ru.full,"core"),Xt.registerVersion("angularfire",Ru.full,"app-compat"),Xt.registerVersion("angular",pb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(qt))};static \u0275mod=pt({type:n});static \u0275inj=ht({providers:[rL]})}return n})();function fh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return iL(i,s)||(mT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oL?" You may need to reload as Firebase is not HMR aware.":""}`),mT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function iL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var oL=typeof module<"u"&&!!module.hot,mT=(n,...e)=>{Zm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var _T={production:!1,firebase:{apiKey:"AIzaSyAiicR9-3ZEOhGAVL5jxkaxthn4nOkT3aY",authDomain:"mycv-matador1081.firebaseapp.com",projectId:"mycv-matador1081",storageBucket:"mycv-matador1081.firebasestorage.app",messagingSenderId:"113584989289",appId:"1:113584989289:web:93642746b2962f55156ef8"}};var le="primary",Gu=Symbol("RouteTitle"),by=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new by(n)}function sL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function aL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wn(n[t],e[t]))return!1;return!0}function Wn(n,e){let t=n?Ty(n):void 0,r=e?Ty(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!MT(n[i],e[i]))return!1;return!0}function Ty(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function MT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function RT(n){return n.length>0?n[n.length-1]:null}function si(n){return ng(n)?n:Zi(n)?Ce(Promise.resolve(n)):te(n)}var uL={exact:PT,subset:kT},NT={exact:cL,subset:lL,ignored:()=>!0};function wT(n,e,t){return uL[t.paths](n.root,e.root,t.matrixParams)&&NT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cL(n,e){return Wn(n,e)}function PT(n,e,t){if(!io(n.segments,e.segments)||!mh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!PT(n.children[r],e.children[r],t))return!1;return!0}function lL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>MT(n[t],e[t]))}function kT(n,e,t){return OT(n,e,e.segments,t)}function OT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!io(i,t)||e.hasChildren()||!mh(i,t,r))}else if(n.segments.length===t.length){if(!io(n.segments,t)||!mh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!kT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!io(n.segments,i)||!mh(n.segments,i,r)||!n.children[le]?!1:OT(n.children[le],e,o,r)}}function mh(n,e,t){return e.every((r,i)=>NT[t](n[i].parameters,r.parameters))}var Cr=class{constructor(e=new Me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return fL.serialize(this)}},Me=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}},ro=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return VT(this)}};function dL(n,e){return io(n,e)&&n.every((t,r)=>Wn(t.parameters,e[r].parameters))}function io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function hL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var Wu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new ks,providedIn:"root"})}}return n})(),ks=class{parse(e){let t=new Ay(e);return new Cr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Pu(e.root,!0)}`,r=mL(e.queryParams),i=typeof e.fragment=="string"?`#${pL(e.fragment)}`:"";return`${t}${r}${i}`}},fL=new ks;function yh(n){return n.segments.map(e=>VT(e)).join("/")}function Pu(n,e){if(!n.hasChildren())return yh(n);if(e){let t=n.children[le]?Pu(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Pu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=hL(n,(r,i)=>i===le?[Pu(n.children[le],!1)]:[`${i}:${Pu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${yh(n)}/${t[0]}`:`${yh(n)}/(${t.join("//")})`}}function FT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(n){return FT(n).replace(/%3B/gi,";")}function pL(n){return encodeURI(n)}function Sy(n){return FT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vh(n){return decodeURIComponent(n)}function ET(n){return vh(n.replace(/\+/g,"%20"))}function VT(n){return`${Sy(n.path)}${gL(n.parameters)}`}function gL(n){return Object.entries(n).map(([e,t])=>`;${Sy(e)}=${Sy(t)}`).join("")}function mL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ph(t)}=${ph(i)}`).join("&"):`${ph(t)}=${ph(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var yL=/^[^\/()?;#]+/;function Ey(n){let e=n.match(yL);return e?e[0]:""}var vL=/^[^\/()?;=#]+/;function _L(n){let e=n.match(vL);return e?e[0]:""}var wL=/^[^=?&#]+/;function EL(n){let e=n.match(wL);return e?e[0]:""}var IL=/^[^&#]+/;function DL(n){let e=n.match(IL);return e?e[0]:""}var Ay=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Me(e,t)),r}parseSegment(){let e=Ey(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new ro(vh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_L(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ey(this.remaining);i&&(r=i,this.capture(r))}e[vh(t)]=vh(r)}parseQueryParam(e){let t=EL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=DL(this.remaining);s&&(r=s,this.capture(r))}let i=ET(t),o=ET(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ey(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Me([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function LT(n){return n.segments.length>0?new Me([],{[le]:n}):n}function jT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=jT(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Me(n.segments,e);return CL(t)}function CL(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Me(n.segments.concat(e.segments),e.children)}return n}function oo(n){return n instanceof Cr}function bL(n,e,t=null,r=null){let i=BT(n);return UT(i,e,t,r)}function BT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Me(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=LT(r);return e??i}function UT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Iy(i,i,i,t,r);let o=TL(e);if(o.toRoot())return Iy(i,i,new Me([],{}),t,r);let s=SL(o,i,n),a=s.processChildren?Fu(s.segmentGroup,s.index,o.commands):HT(s.segmentGroup,s.index,o.commands);return Iy(i,s.segmentGroup,a,t,r)}function _h(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ju(n){return typeof n=="object"&&n!=null&&n.outlets}function Iy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=$T(n,e,t);let a=LT(jT(s));return new Cr(a,o,i)}function $T(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=$T(o,e,t)}),new Me(n.segments,r)}var wh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_h(r[0]))throw new J(4003,!1);let i=r.find(ju);if(i&&i!==RT(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wh(t,e,r)}var Ms=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function SL(n,e,t){if(n.isAbsolute)return new Ms(e,!0,0);if(!t)return new Ms(e,!1,NaN);if(t.parent===null)return new Ms(t,!0,0);let r=_h(n.commands[0])?0:1,i=t.segments.length-1+r;return AL(t,i,n.numberOfDoubleDots)}function AL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Ms(r,!1,i-o)}function xL(n){return ju(n[0])?n[0].outlets:{[le]:n}}function HT(n,e,t){if(n??=new Me([],{}),n.segments.length===0&&n.hasChildren())return Fu(n,e,t);let r=ML(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Me(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Me(n.segments.slice(r.pathIndex),n.children),Fu(o,0,i)}else return r.match&&i.length===0?new Me(n.segments,{}):r.match&&!n.hasChildren()?xy(n,e,t):r.match?Fu(n,0,i):xy(n,e,t)}function Fu(n,e,t){if(t.length===0)return new Me(n.segments,{});{let r=xL(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Fu(n.children[le],e,t);return new Me(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=HT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Me(n.segments,i)}}function ML(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ju(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!DT(u,l,s))return o;r+=2}else{if(!DT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ju(o)){let u=RL(o.outlets);return new Me(r,u)}if(i===0&&_h(t[0])){let u=n.segments[e];r.push(new ro(u.path,IT(t[0]))),i++;continue}let s=ju(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&_h(a)?(r.push(new ro(s,IT(a))),i+=2):(r.push(new ro(s,{})),i++)}return new Me(r,{})}function RL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=xy(new Me([],{}),0,r))}),e}function IT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function DT(n,e,t){return n==t.path&&Wn(e,t.parameters)}var Vu="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),vn=class{constructor(e,t){this.id=e,this.url=t}},Os=class extends vn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends vn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},on=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(on||{}),Eh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Eh||{}),Dr=class extends vn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends vn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},Bu=class extends vn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ih=class extends vn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends vn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class extends vn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ny=class extends vn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends vn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Oy=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fy=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vy=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Uu=class{},Fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function NL(n,e){return n.providers&&!n._injector&&(n._injector=Hd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Mn(n){return n.outlet||le}function PL(n,e){let t=n.filter(r=>Mn(r)===e);return t.push(...n.filter(r=>Mn(r)!==e)),t}function Ku(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var By=class{get injector(){return Ku(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Qu(this.rootInjector),this.attachRef=null}},Qu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new By(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(en))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ch=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Uy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Uy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $y(e,this._root).map(t=>t.value)}};function Uy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Uy(n,t);if(r)return r}return null}function $y(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$y(n,t);if(r.length)return r.unshift(e),r}return[]}var rn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bh=class extends Ch{constructor(e,t){super(e),this.snapshot=t,Zy(this,e)}toString(){return this.snapshot.toString()}};function qT(n){let e=kL(n),t=new yt([new ro("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new so(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new bh(new rn(a,[]),e)}function kL(n){let e={},t={},r={},i="",o=new Rs([],e,r,i,t,le,n,null,{});return new Sh("",new rn(o,[]))}var so=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[Gu]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Th(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&GT(i)&&(r.resolve[Gu]=i.title),r}var Rs=class{get title(){return this.data?.[Gu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Sh=class extends Ch{constructor(e,t){super(t),this.url=e,Zy(this,t)}toString(){return zT(this._root)}};function Zy(n,e){e.value._routerState=n,e.children.forEach(t=>Zy(n,t))}function zT(n){let e=n.children.length>0?` { ${n.children.map(zT).join(", ")} } `:"";return`${n.value}${e}`}function Dy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wn(e.params,t.params)||n.paramsSubject.next(t.params),aL(e.url,t.url)||n.urlSubject.next(t.url),Wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Hy(n,e){let t=Wn(n.params,e.params)&&dL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Hy(n.parent,e.parent))}function GT(n){return typeof n.title=="string"||n.title===null}var Jy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=B(Qu),this.location=B(mu),this.changeDetector=B(Ji),this.inputBinder=B(Nh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new qy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ki]})}}return n})(),qy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===so?this.route:e===Qu?this.childContexts:this.parent.get(e,t)}},Nh=new W(""),CT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Xa([r.queryParams,r.params,r.data]).pipe(Qe(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Cb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function OL(n,e,t){let r=$u(n,e._root,t?t._root:void 0);return new bh(r,e)}function $u(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=FL(n,e,t);return new rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$u(n,a)),s}}let r=VL(e.value),i=e.children.map(o=>$u(n,o));return new rn(r,i)}}function FL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $u(n,r,i);return $u(n,r)})}function VL(n){return new so(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var Hu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},WT="ngNavigationCancelingError";function Ah(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=KT(!1,on.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function KT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[WT]=!0,t.cancellationCode=e,t}function LL(n){return QT(n)&&oo(n.url)}function QT(n){return!!n&&n[WT]}var jL=(n,e,t,r)=>Q(i=>(new zy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Dy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Dy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},xh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,t){this.component=e,this.route=t}};function BL(n,e,t){let r=n._root,i=e?e._root:null;return ku(r,i,t,[r.value])}function UL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ls(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!sD(n)?n:e.get(n):r}function ku(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xs(e);return n.children.forEach(s=>{$L(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Lu(a,t.getContext(s),i)),i}function $L(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=HL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new xh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ku(n,e,a?a.children:null,r,i):ku(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&Lu(e,a,i),i.canActivateChecks.push(new xh(r)),o.component?ku(n,null,a?a.children:null,r,i):ku(n,null,t,r,i);return i}function HL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!io(n.url,e.url)||!Wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hy(n,e)||!Wn(n.queryParams,e.queryParams);case"paramsChange":default:return!Hy(n,e)}}function Lu(n,e,t){let r=xs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Lu(s,e.children.getContext(o),t):Lu(s,null,t):Lu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Yu(n){return typeof n=="function"}function qL(n){return typeof n=="boolean"}function zL(n){return n&&Yu(n.canLoad)}function GL(n){return n&&Yu(n.canActivate)}function WL(n){return n&&Yu(n.canActivateChild)}function KL(n){return n&&Yu(n.canDeactivate)}function QL(n){return n&&Yu(n.canMatch)}function YT(n){return n instanceof lr||n?.name==="EmptyError"}var gh=Symbol("INITIAL_VALUE");function Vs(){return Qe(n=>Xa(n.map(e=>e.pipe(dr(1),Li(gh)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===gh)return gh;if(t===!1||YL(t))return t}return!0}),vt(e=>e!==gh),dr(1)))}function YL(n){return oo(n)||n instanceof Hu}function ZL(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(pe(P({},t),{guardsResult:!0})):JL(s,r,i,n).pipe(tt(a=>a&&qL(a)?XL(r,o,n,e):te(a)),Q(a=>pe(P({},t),{guardsResult:a})))})}function JL(n,e,t,r){return Ce(n).pipe(tt(i=>i2(i.component,i.route,t,e,r)),cn(i=>i!==!0,!0))}function XL(n,e,t,r){return Ce(e).pipe(Fi(i=>Qo(t2(i.route.parent,r),e2(i.route,r),r2(n,i.path,t),n2(n,i.route,t))),cn(i=>i!==!0,!0))}function e2(n,e){return n!==null&&e&&e(new Ly(n)),te(!0)}function t2(n,e){return n!==null&&e&&e(new Fy(n)),te(!0)}function n2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>Bl(()=>{let s=Ku(e)??t,a=Ls(o,s),u=GL(a)?a.canActivate(e,n):zn(s,()=>a(e,n));return si(u).pipe(cn())}));return te(i).pipe(Vs())}function r2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>UL(s)).filter(s=>s!==null).map(s=>Bl(()=>{let a=s.guards.map(u=>{let l=Ku(s.node)??t,h=Ls(u,l),p=WL(h)?h.canActivateChild(r,n):zn(l,()=>h(r,n));return si(p).pipe(cn())});return te(a).pipe(Vs())}));return te(o).pipe(Vs())}function i2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let u=Ku(e)??i,l=Ls(a,u),h=KL(l)?l.canDeactivate(n,e,t,r):zn(u,()=>l(n,e,t,r));return si(h).pipe(cn())});return te(s).pipe(Vs())}function o2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=zL(a)?a.canLoad(e,t):zn(n,()=>a(e,t));return si(u)});return te(o).pipe(Vs(),ZT(r))}function ZT(n){return Yp(ut(e=>{if(typeof e!="boolean")throw Ah(n,e)}),Q(e=>e===!0))}function s2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=QL(a)?a.canMatch(e,t):zn(n,()=>a(e,t));return si(u)});return te(o).pipe(Vs(),ZT(r))}var qu=class{constructor(e){this.segmentGroup=e||null}},zu=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return Ko(new qu(n))}function a2(n){return Ko(new J(4e3,!1))}function u2(n){return Ko(KT(!1,on.GuardRejected))}var Gy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[le])return a2(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:A}=i,x=zn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(x instanceof Cr)throw new zu(x);t=x}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new zu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Cr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Me(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function c2(n,e,t,r,i){let o=JT(n,e,t);return o.matched?(r=NL(e,r),s2(r,e,t,i).pipe(Q(s=>s===!0?o:P({},Wy)))):te(o)}function JT(n,e,t){if(e.path==="**")return l2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Wy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sL)(t,n,e);if(!i)return P({},Wy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function l2(n){return{matched:!0,parameters:n.length>0?RT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function bT(n,e,t,r){return t.length>0&&f2(n,t,r)?{segmentGroup:new Me(e,h2(r,new Me(t,n.children))),slicedSegments:[]}:t.length===0&&p2(n,t,r)?{segmentGroup:new Me(n.segments,d2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Me(n.segments,n.children),slicedSegments:t}}function d2(n,e,t,r){let i={};for(let o of t)if(Ph(n,e,o)&&!r[Mn(o)]){let s=new Me([],{});i[Mn(o)]=s}return P(P({},r),i)}function h2(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&Mn(r)!==le){let i=new Me([],{});t[Mn(r)]=i}return t}function f2(n,e,t){return t.some(r=>Ph(n,e,r)&&Mn(r)!==le)}function p2(n,e,t){return t.some(r=>Ph(n,e,r))}function Ph(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function g2(n,e,t){return e.length===0&&!n.children[t]}var Ky=class{};function m2(n,e,t,r,i,o,s="emptyOnly"){return new Qy(n,e,t,r,i,s,o).recognize()}var y2=31,Qy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Gy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=bT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new rn(r,t),o=new Sh("",i),s=bL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Rs([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Ur(r=>{if(r instanceof zu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof rn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ce(o).pipe(Fi(s=>{let a=r.children[s],u=PL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Vi((s,a)=>(s.push(...a),s)),$r(null),ag(),tt(s=>{if(s===null)return As(r);let a=XT(s);return v2(a),te(a)}))}processSegment(e,t,r,i,o,s,a){return Ce(t).pipe(Fi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Ur(l=>{if(l instanceof qu)return te(null);throw l}))),cn(u=>!!u),Ur(u=>{if(YT(u))return g2(r,i,o)?te(new Ky):As(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Mn(r)!==s&&(s===le||!Ph(i,o,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=JT(t,i,o);if(!u)return As(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y2&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,TT(i),Mn(i),i.component??i._loadedComponent??null,i,ST(i)),b=Th(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(tt(x=>this.processSegment(e,r,t,x.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=c2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Rs(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,TT(r),Mn(r),r.component??r._loadedComponent??null,r,ST(r)),A=Th(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:L}=bT(t,m,y,l);if(L.length===0&&x.hasChildren())return this.processChildren(h,l,x,b).pipe(Q(V=>new rn(b,V)));if(l.length===0&&L.length===0)return te(new rn(b,[]));let z=Mn(r)===o;return this.processSegment(h,l,x,L,z?le:o,!0,b).pipe(Q(V=>new rn(b,V instanceof rn?[V]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):o2(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(ut(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):u2(t))):te({routes:[],injector:e})}};function v2(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function _2(n){let e=n.value.routeConfig;return e&&e.path===""}function XT(n){let e=[],t=new Set;for(let r of n){if(!_2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=XT(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!t.has(r))}function TT(n){return n.data||{}}function ST(n){return n.resolve||{}}function w2(n,e,t,r,i,o){return tt(s=>m2(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>pe(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function E2(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of eS(u))s.add(l);let a=0;return Ce(s).pipe(Fi(u=>o.has(u)?I2(u,r,n,e):(u.data=Th(u,u.parent,n).resolve,te(void 0))),ut(()=>a++),Yo(1),tt(u=>a===s.size?te(t):Rt))})}function eS(n){let e=n.children.map(t=>eS(t)).flat();return[n,...e]}function I2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!GT(i)&&(o[Gu]=i.title),D2(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=Th(n,n.parent,t).resolve,null)))}function D2(n,e,t,r){let i=Ty(n);if(i.length===0)return te({});let o={};return Ce(i).pipe(tt(s=>C2(n[s],e,t,r).pipe(cn(),ut(a=>{if(a instanceof Hu)throw Ah(new ks,a);o[s]=a}))),Yo(1),og(o),Ur(s=>YT(s)?Rt:Ko(s)))}function C2(n,e,t,r){let i=Ku(e)??r,o=Ls(n,i),s=o.resolve?o.resolve(e,t):zn(i,()=>o(e,t));return si(s)}function Cy(n){return Qe(e=>{let t=n(e);return t?Ce(t).pipe(Q(()=>e)):te(e)})}var tS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[Gu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(b2),providedIn:"root"})}}return n})(),b2=(()=>{class n extends tS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(zb))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zu=new W("",{providedIn:"root",factory:()=>({})}),T2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[fb],decls:1,vars:0,template:function(r,i){r&1&&we(0,"router-outlet")},dependencies:[Jy],encapsulation:2})}}return n})();function Xy(n){let e=n.children&&n.children.map(Xy),t=e?pe(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=T2),t}var Mh=new W(""),ev=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Zd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=si(t.loadComponent()).pipe(Q(nS),ut(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),eu(()=>{this.componentLoaders.delete(t)})),i=new qo(r,()=>new $e).pipe(Ho());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=S2(r,this.compiler,t,this.onLoadEndListener).pipe(eu(()=>{this.childrenLoaders.delete(r)})),s=new qo(o,()=>new $e).pipe(Ho());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function S2(n,e,t,r){return si(n.loadChildren()).pipe(Q(nS),tt(i=>i instanceof cu||Array.isArray(i)?te(i):Ce(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Mh,[],{optional:!0,self:!0}).flat()),{routes:s.map(Xy),injector:o}}))}function A2(n){return n&&typeof n=="object"&&"default"in n}function nS(n){return A2(n)?n.default:n}var tv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(x2),providedIn:"root"})}}return n})(),x2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rS=new W(""),iS=new W("");function M2(n,e,t){let r=n.get(iS),i=n.get(zt);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),R2(n))),{onViewTransitionCreated:u}=r;return u&&zn(n,()=>u({transition:a,from:e,to:t})),s})}function R2(n){return new Promise(e=>{zm({read:()=>setTimeout(e)},{injector:n})})}var N2=new W(""),nv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=B(ev),this.environmentInjector=B(en),this.urlSerializer=B(Wu),this.rootContexts=B(Qu),this.location=B(Es),this.inputBindingEnabled=B(Nh,{optional:!0})!==null,this.titleStrategy=B(tS),this.options=B(Zu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(tv),this.createViewTransition=B(rS,{optional:!0}),this.navigationErrorHandler=B(N2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ky(i)),r=i=>this.events.next(new Oy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new yt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),Q(o=>pe(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qe(o=>{let s=!1,a=!1;return te(o).pipe(Qe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",on.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?pe(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.rawUrl),p,Eh.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Qe(p=>{let m=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Rt:Promise.resolve(p)}),w2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ut(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=pe(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Ih(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:A}=u,x=new Os(p,this.urlSerializer.serialize(m),y,b);this.events.next(x);let L=qT(this.rootComponentType).snapshot;return this.currentTransition=o=pe(P({},u),{targetSnapshot:L,urlAfterRedirects:m,extras:pe(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,te(o)}else{let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Eh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),ut(u=>{let l=new My(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=o=pe(P({},u),{guards:BL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),ZL(this.environmentInjector,u=>this.events.next(u)),ut(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ah(this.urlSerializer,u.guardsResult);let l=new Ry(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",on.GuardRejected),!1)),Cy(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(ut(l=>{let h=new Ny(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Qe(l=>{let h=!1;return te(l).pipe(E2(this.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",on.NoDataFromResolver)}}))}),ut(l=>{let h=new Py(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Cy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(ut(m=>{h.component=m}),Q(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Xa(l(u.targetSnapshot.root)).pipe($r(null),dr(1))}),Cy(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ce(h).pipe(Q(()=>o)):te(o)}),Q(u=>{let l=OL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=pe(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ut(()=>{this.events.next(new Uu)}),jL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),dr(1),ut({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),cg(this.transitionAbortSubject.pipe(ut(u=>{throw u}))),eu(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",on.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ur(u=>{if(a=!0,QT(u))this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),LL(u)?this.events.next(new Fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Bu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=zn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Hu){let{message:p,cancellationCode:m}=Ah(this.urlSerializer,h);this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new Dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P2(n){return n!==Vu}var k2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(O2),providedIn:"root"})}}return n})(),Yy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},O2=(()=>{class n extends Yy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pu(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(F2),providedIn:"root"})}}return n})(),F2=(()=>{class n extends oS{constructor(){super(...arguments),this.location=B(Es),this.urlSerializer=B(Wu),this.options=B(Zu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(tv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=qT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Os)this.stateMemento=this.createStateMemento();else if(t instanceof ii)this.rawUrlTree=r.initialUrl;else if(t instanceof Ih){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Uu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Dr&&(t.code===on.GuardRejected||t.code===on.NoDataFromResolver)?this.restoreHistory(r):t instanceof Bu?this.restoreHistory(r,!0):t instanceof Kn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Cr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pu(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ou=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ou||{});function sS(n,e){n.events.pipe(vt(t=>t instanceof Kn||t instanceof Dr||t instanceof Bu||t instanceof ii),Q(t=>t instanceof Kn||t instanceof ii?Ou.COMPLETE:(t instanceof Dr?t.code===on.Redirect||t.code===on.SupersededByNewNavigation:!1)?Ou.REDIRECTING:Ou.FAILED),vt(t=>t!==Ou.REDIRECTING),dr(1)).subscribe(()=>{e()})}function V2(n){throw n}var L2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(Wd),this.stateManager=B(oS),this.options=B(Zu,{optional:!0})||{},this.pendingTasks=B(ws),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(nv),this.urlSerializer=B(Wu),this.location=B(Es),this.urlHandlingStrategy=B(tv),this._events=new $e,this.errorHandler=this.options.errorHandler||V2,this.navigated=!1,this.routeReuseStrategy=B(k2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(Mh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Nh,{optional:!0}),this.eventsSubscription=new Ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==on.Redirect&&r.code!==on.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kn)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||P2(i.source)},s);this.scheduleNavigation(a,Vu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Xy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=BT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return UT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=oo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Vu,null,r)}navigate(t,r={skipLocationChange:!1}){return B2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},L2):r===!1?i=P({},j2):i=r,oo(t))return wT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return wT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return sS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function U2(n){return!(n instanceof Uu)&&!(n instanceof Fs)}var aS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Kn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(oo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:DC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:oo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(se(oi),se(so),Tm("tabindex"),se(Yi),se(Jr),se(Ir))}}static{this.\u0275dir=Ht({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ne("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&qd("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Xi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Xi],replaceUrl:[2,"replaceUrl","replaceUrl",Xi],routerLink:"routerLink"},standalone:!0,features:[qm,Ki]})}}return n})();var Rh=class{};var $2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vt(t=>t instanceof Kn),Fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Hd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ce(i).pipe(Br())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(tt(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ce([o,s]).pipe(Br())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(oi),F(Zd),F(en),F(Rh),F(ev))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uS=new W(""),H2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ii&&t.code===Eh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){FC()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function q2(n){return n.routerState.root}function Ju(n,e){return{\u0275kind:n,\u0275providers:e}}function z2(){let n=B(tn);return e=>{let t=n.get(ni);if(e!==t.components[0])return;let r=n.get(oi),i=n.get(cS);n.get(rv)===1&&r.initialNavigation(),n.get(lS,null,fe.Optional)?.setUpPreloading(),n.get(uS,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cS=new W("",{factory:()=>new $e}),rv=new W("",{providedIn:"root",factory:()=>1});function G2(){return Ju(2,[{provide:rv,useValue:0},{provide:Yd,multi:!0,deps:[tn],useFactory:e=>{let t=e.get(Mb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(oi),o=e.get(cS);sS(i,()=>{r(!0)}),e.get(nv).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function W2(){return Ju(3,[{provide:Yd,multi:!0,useFactory:()=>{let e=B(oi);return()=>{e.setUpLocationChangeListener()}}},{provide:rv,useValue:2}])}var lS=new W("");function K2(n){return Ju(0,[{provide:lS,useExisting:$2},{provide:Rh,useExisting:n}])}function Q2(){return Ju(8,[CT,{provide:Nh,useExisting:CT}])}function Y2(n){let e=[{provide:rS,useValue:M2},{provide:iS,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ju(9,e)}var AT=new W("ROUTER_FORROOT_GUARD"),Z2=[Es,{provide:Wu,useClass:ks},oi,Qu,{provide:so,useFactory:q2,deps:[oi]},ev,[]],iv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Z2,[],{provide:Mh,multi:!0,useValue:t},{provide:AT,useFactory:tj,deps:[[oi,new vs,new hm]]},{provide:Zu,useValue:r||{}},r?.useHash?X2():ej(),J2(),r?.preloadingStrategy?K2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?nj(r):[],r?.bindToComponentInputs?Q2().\u0275providers:[],r?.enableViewTransitions?Y2().\u0275providers:[],rj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Mh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(AT,8))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function J2(){return{provide:uS,useFactory:()=>{let n=B(Ob),e=B(_e),t=B(Zu),r=B(nv),i=B(Wu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new H2(i,r,n,e,t)}}}function X2(){return{provide:Ir,useClass:Nb}}function ej(){return{provide:Ir,useClass:iy}}function tj(n){return"guarded"}function nj(n){return[n.initialNavigation==="disabled"?W2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?G2().\u0275providers:[]]}var xT=new W("");function rj(){return[{provide:xT,useFactory:z2},{provide:Km,multi:!0,useExisting:xT}]}var kh=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="https://images.unsplash.com/photo-1557040135-9dc2a6b60411?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var aj=new Map,uj={activated:!1,tokenObservers:[]},cj={initialized:!1,enabled:!1};function Rn(n){return aj.get(n)||Object.assign({},uj)}function gS(){return cj}var lj="https://content-firebaseappcheck.googleapis.com/v1";var dj="exchangeDebugToken",dS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},r6=24*60*60*1e3;var sv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Op,this.pending.promise.catch(t=>{}),yield hj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Op,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function hj(n){return new Promise(e=>{setTimeout(e,n)})}var fj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ai=new NI("appCheck","AppCheck",fj);function mS(n){if(!Rn(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function yS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw ai.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ai.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ai.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function vS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lj}/projects/${t}/apps/${r}:${dj}?key=${i}`,body:{debug_token:e}}}var pj="firebase-app-check-database",gj=1,av="firebase-app-check-store";var Oh=null;function mj(){return Oh||(Oh=new Promise((n,e)=>{try{let t=indexedDB.open(pj,gj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ai.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(av,{keyPath:"compositeKey"})}}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t?.message}))}}),Oh)}function yj(n,e){return vj(_j(n),e)}function vj(n,e){return N(this,null,function*(){let r=(yield mj()).transaction(av,"readwrite"),o=r.objectStore(av).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ai.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function _j(n){return`${n.options.appId}-${n.name}`}var uv=new ll("@firebase/app-check");function ov(n,e){return cl()?yj(n,e).catch(t=>{uv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _S(){return gS().enabled}function wS(){return N(this,null,function*(){let n=gS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var wj={error:"UNKNOWN_ERROR"};function Ej(n){return xI.encodeString(JSON.stringify(n),!1)}function cv(n,e=!1){return N(this,null,function*(){let t=n.app;mS(t);let r=Rn(t),i=r.token,o;if(i&&!Xu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Xu(u)?i=u:yield ov(t,void 0))}if(!e&&i&&Xu(i))return{token:i.token};let s=!1;if(_S()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yS(vS(t,yield wS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield ov(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Rn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?uv.warn(u.message):uv.error(u),o=u}let a;return i?o?Xu(i)?a={token:i.token,internalError:o}:a=fS(o):(a={token:i.token},r.token=i,yield ov(t,i)):a=fS(o),s&&bj(t,a),a})}function Ij(n){return N(this,null,function*(){let e=n.app;mS(e);let{provider:t}=Rn(e);if(_S()){let r=yield wS(),{token:i}=yield yS(vS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Dj(n,e,t,r){let{app:i}=n,o=Rn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),hS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>hS(n))}function ES(n,e){let t=Rn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function hS(n){let{app:e}=n,t=Rn(e),r=t.tokenRefresher;r||(r=Cj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Cj(n){let{app:e}=n;return new sv(()=>N(this,null,function*(){let t=Rn(e),r;if(t.token?r=yield cv(n,!0):r=yield cv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Rn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},dS.RETRIAL_MIN_WAIT,dS.RETRIAL_MAX_WAIT)}function bj(n,e){let t=Rn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xu(n){return n.expireTimeMillis-Date.now()>0}function fS(n){return{token:Ej(wj),error:n}}var lv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Rn(this.app);for(let t of e)ES(this.app,t.next);return Promise.resolve()}};function Tj(n,e){return new lv(n,e)}function Sj(n){return{getToken:e=>cv(n,e),getLimitedUseToken:()=>Ij(n),addTokenListener:e=>Dj(n,"INTERNAL",e),removeTokenListener:e=>ES(n.app,e)}}var Aj="@firebase/app-check",xj="0.8.8";var Mj="app-check",pS="app-check-internal";function Rj(){Ga(new Ni(Mj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Tj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pS).initialize()})),Ga(new Ni(pS,n=>{let e=n.getProvider("app-check").getImmediate();return Sj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),jr(Aj,xj)}Rj();var Nj=["localhost","0.0.0.0","127.0.0.1"],g6=typeof window<"u"&&Nj.includes(window.location.hostname);var dv=new W("angularfire2.auth.use-emulator"),hv=new W("angularfire2.auth.settings"),fv=new W("angularfire2.auth.tenant-id"),pv=new W("angularfire2.auth.langugage-code"),gv=new W("angularfire2.auth.use-device-language"),mv=new W("angularfire.auth.persistence"),yv=(n,e,t,r,i,o,s,a)=>fh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),DS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let b=new $e,A=te(void 0).pipe(un(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Q(()=>Nu(t,o,r)),Q(x=>yv(x,o,a,l,h,p,u,m)),$l({bufferSize:1,refCount:!1}));if(eo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{A.pipe(cn()).subscribe();let x=A.pipe(Qe(V=>V.getRedirectResult().then(Z=>Z,()=>null)),Qt,$l({bufferSize:1,refCount:!1})),L=A.pipe(Qe(V=>new ge(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(ne=>Z.next(ne),ne=>Z.error(ne),()=>Z.complete()))})))),z=A.pipe(Qe(V=>new ge(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(ne=>Z.next(ne),ne=>Z.error(ne),()=>Z.complete()))}))));this.authState=x.pipe(Hl(L),Cn(s.outsideAngular),un(s.insideAngular)),this.user=x.pipe(Hl(z),Cn(s.outsideAngular),un(s.insideAngular)),this.idToken=this.user.pipe(Qe(V=>V?Ce(V.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Qe(V=>V?Ce(V.getIdTokenResult()):te(null))),this.credential=ig(x,b,this.authState.pipe(vt(V=>!V))).pipe(Q(V=>V?.user?V:null),Cn(s.outsideAngular),un(s.insideAngular))}return yT(this,A,o,{spy:{apply:(x,L,z)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&z.then(V=>b.next(V))}}})}static \u0275fac=function(r){return new(r||n)(F(Ts),F(Ss,8),F(qt),F(_e),F(dh),F(dv,8),F(hv,8),F(fv,8),F(pv,8),F(gv,8),F(mv,8),F(no,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var CS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bS={};var ui,vv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),or=2;or<arguments.length;or++)_[or-2]=arguments[or];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return x(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return x(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-x(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+x(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=Z(w,v).g;w=L(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=L(this,E),A(E)?-1:b(E)?0:1};function x(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?x(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(E,v){return E.add(x(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?x(this).j(x(E)):x(x(this).j(E));if(A(E))return x(this.j(x(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,or=E.i(D)>>>16,Ta=E.i(D)&65535;w[2*I+2*D]+=_*Ta,z(w,2*I+2*D),w[2*I+2*D+1]+=T*Ta,z(w,2*I+2*D+1),w[2*I+2*D+1]+=_*or,z(w,2*I+2*D+1),w[2*I+2*D+2]+=T*or,z(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function z(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function Z(E,v){if(b(v))throw Error("division by zero");if(b(E))return new V(p,p);if(A(E))return v=Z(x(E),v),new V(x(v.g),x(v.h));if(A(v))return v=Z(E,x(v)),new V(x(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ne(w),I=ne(I);var D=X(w,1),T=X(I,1);for(I=X(I,2),w=X(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=X(I,1),w=X(w,1)}return v=L(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=m),D=D.add(T),E=L(E,_)}return new V(D,E)}n.A=function(E){return Z(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ne(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function X(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vv=bS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ui=bS.Integer=s}).apply(typeof CS<"u"?CS:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},br={};var _v,kj,js,wv,ec,Vh,Ev,Iv,Dv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var M=f++;return{value:d(M,c[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,M){for(var j=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)j[Pe-2]=arguments[Pe];return d.prototype[C].apply(g,j)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,M=g.length||0;c.length=C+M;for(let j=0;j<M;j++)c[C+j]=g[j]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var ne=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let M=0;M<w.length;M++)f=w[M],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=cp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class or{constructor(){this.h=this.g=null}add(d,f){let g=Ta.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ta=new L(()=>new wR,c=>c.reset());class wR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Sa,Aa=!1,cp=new or,bE=()=>{let c=a.Promise.resolve(void 0);Sa=()=>{c.then(ER)}};var ER=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Ta;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Aa=!1};function Or(){this.s=this.s,this.C=this.C}Or.prototype.s=!1,Or.prototype.ma=function(){this.s||(this.s=!0,this.N())},Or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var IR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function xa(c,d){if(Et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ne){e:{try{Z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:DR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xa.aa.h.call(this)}}b(xa,Et);var DR={2:"touch",3:"pen",4:"mouse"};xa.prototype.h=function(){xa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ma="closure_listenable_"+(1e6*Math.random()|0),CR=0;function bR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++CR,this.da=this.fa=!1}function zc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gc(c){this.src=c,this.g={},this.h=0}Gc.prototype.add=function(c,d,f,g,C){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var j=dp(c,d,g,C);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new bR(d,this.src,M,!!g,C),d.fa=f,c.push(d)),d};function lp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=C)&&Array.prototype.splice.call(g,C,1),M&&(zc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function dp(c,d,f,g){for(var C=0;C<c.length;++C){var M=c[C];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==g)return C}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),fp={};function TE(c,d,f,g,C){if(g&&g.once)return AE(c,d,f,g,C);if(Array.isArray(d)){for(var M=0;M<d.length;M++)TE(c,d[M],f,g,C);return null}return f=yp(f),c&&c[Ma]?c.K(d,f,l(g)?!!g.capture:!!g,C):SE(c,d,f,!1,g,C)}function SE(c,d,f,g,C,M){if(!d)throw Error("Invalid event type");var j=l(C)?!!C.capture:!!C,Pe=gp(c);if(Pe||(c[hp]=Pe=new Gc(c)),f=Pe.add(d,f,g,j,M),f.proxy)return f;if(g=TR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)IR||(C=j),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(ME(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function TR(){function c(f){return d.call(c.src,c.listener,f)}let d=SR;return c}function AE(c,d,f,g,C){if(Array.isArray(d)){for(var M=0;M<d.length;M++)AE(c,d[M],f,g,C);return null}return f=yp(f),c&&c[Ma]?c.L(d,f,l(g)?!!g.capture:!!g,C):SE(c,d,f,!0,g,C)}function xE(c,d,f,g,C){if(Array.isArray(d))for(var M=0;M<d.length;M++)xE(c,d[M],f,g,C);else g=l(g)?!!g.capture:!!g,f=yp(f),c&&c[Ma]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],f=dp(M,f,g,C),-1<f&&(zc(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=gp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=dp(d,f,g,C)),(f=-1<c?d[c]:null)&&pp(f))}function pp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ma])lp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(ME(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=gp(d))?(lp(f,c),f.h==0&&(f.src=null,d[hp]=null)):zc(c)}}}function ME(c){return c in fp?fp[c]:fp[c]="on"+c}function SR(c,d){if(c.da)c=!0;else{d=new xa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&pp(c),c=f.call(g,d)}return c}function gp(c){return c=c[hp],c instanceof Gc?c:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(c){return typeof c=="function"?c:(c[mp]||(c[mp]=function(d){return c.handleEvent(d)}),c[mp])}function It(){Or.call(this),this.i=new Gc(this),this.M=this,this.F=null}b(It,Or),It.prototype[Ma]=!0,It.prototype.removeEventListener=function(c,d,f,g){xE(this,c,d,f,g)};function At(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Et(d,c);else if(d instanceof Et)d.target=d.target||c;else{var C=d;d=new Et(g,c),I(d,C)}if(C=!0,f)for(var M=f.length-1;0<=M;M--){var j=d.g=f[M];C=Wc(j,g,!0,d)&&C}if(j=d.g=c,C=Wc(j,g,!0,d)&&C,C=Wc(j,g,!1,d)&&C,f)for(M=0;M<f.length;M++)j=d.g=f[M],C=Wc(j,g,!1,d)&&C}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)zc(f[g]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},It.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Wc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,M=0;M<d.length;++M){var j=d[M];if(j&&!j.da&&j.capture==f){var Pe=j.listener,mt=j.ha||j.src;j.fa&&lp(c.i,j),C=Pe.call(mt,g)!==!1&&C}}return C&&!g.defaultPrevented}function RE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function NE(c){c.g=RE(()=>{c.g=null,c.i&&(c.i=!1,NE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class AR extends Or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:NE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(c){Or.call(this),this.h=c,this.g={}}b(Ra,Or);var PE=[];function kE(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&pp(d)},c),c.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),kE(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=a.JSON.stringify,xR=a.JSON.parse,MR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _p(){}_p.prototype.h=null;function OE(c){return c.h||(c.h=c.i())}function FE(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wp(){Et.call(this,"d")}b(wp,Et);function Ep(){Et.call(this,"c")}b(Ep,Et);var Ai={},VE=null;function Kc(){return VE=VE||new It}Ai.La="serverreachability";function LE(c){Et.call(this,Ai.La,c)}b(LE,Et);function Pa(c){let d=Kc();At(d,new LE(d))}Ai.STAT_EVENT="statevent";function jE(c,d){Et.call(this,Ai.STAT_EVENT,c),this.stat=d}b(jE,Et);function xt(c){let d=Kc();At(d,new jE(d,c))}Ai.Ma="timingevent";function BE(c,d){Et.call(this,Ai.Ma,c),this.size=d}b(BE,Et);function ka(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Oa(){this.g=!0}Oa.prototype.xa=function(){this.g=!1};function RR(c,d,f,g,C,M){c.info(function(){if(c.g)if(M)for(var j="",Pe=M.split("&"),mt=0;mt<Pe.length;mt++){var Te=Pe[mt].split("=");if(1<Te.length){var Dt=Te[0];Te=Te[1];var Ct=Dt.split("_");j=2<=Ct.length&&Ct[1]=="type"?j+(Dt+"="+Te+"&"):j+(Dt+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+j})}function NR(c,d,f,g,C,M,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+M+" "+j})}function Oo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+kR(c,f)+(g?" "+g:"")})}function PR(c,d){c.info(function(){return"TIMEOUT: "+d})}Oa.prototype.info=function(){};function kR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return vp(f)}catch{return d}}var Qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ip;function Yc(){}b(Yc,_p),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},Ip=new Yc;function Fr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $E}function $E(){this.i=null,this.g="",this.h=!1}var HE={},Dp={};function Cp(c,d,f){c.L=1,c.v=el(sr(d)),c.m=f,c.P=!0,qE(c,null)}function qE(c,d){c.F=Date.now(),Zc(c),c.A=sr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),iI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new $E,c.g=II(c.j,f?d:null,!c.m),0<c.O&&(c.M=new AR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(PE[0]=C.toString()),C=PE);for(var M=0;M<C.length;M++){var j=TE(f,C[M],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Pa(),RR(c.i,c.u,c.A,c.l,c.R,c.m)}Fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&ar(c)==3?d.j():this.Y(c)},Fr.prototype.Y=function(c){try{if(c==this.g)e:{let Ct=ar(this.g);var d=this.g.Ba();let Lo=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||dI(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Lo?Pa(3):Pa(2)),bp(this);var f=this.g.Z();this.X=f;t:if(zE(this)){var g=dI(this.g);c="";var C=g.length,M=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xi(this),Fa(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(M&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,NR(this.i,this.u,this.A,this.l,this.R,Ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,mt=this.g;if((Pe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Pe)){var Te=Pe;break t}}Te=null}if(f=Te)Oo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tp(this,f);else{this.o=!1,this.s=3,xt(12),xi(this),Fa(this);break e}}if(this.P){f=!0;let In;for(;!this.J&&this.C<j.length;)if(In=OR(this,j),In==Dp){Ct==4&&(this.s=4,xt(14),f=!1),Oo(this.i,this.l,null,"[Incomplete Response]");break}else if(In==HE){this.s=4,xt(15),Oo(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Oo(this.i,this.l,In,null),Tp(this,In);if(zE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||j.length!=0||this.h.h||(this.s=1,xt(16),f=!1),this.o=this.o&&f,!f)Oo(this.i,this.l,j,"[Invalid Chunked Response]"),xi(this),Fa(this);else if(0<j.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Np(Dt),Dt.M=!0,xt(11))}}else Oo(this.i,this.l,j,null),Tp(this,j);Ct==4&&xi(this),this.o&&!this.J&&(Ct==4?vI(this.j,this):(this.o=!1,Zc(this)))}else JR(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),xi(this),Fa(this)}}}catch{}finally{}};function zE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function OR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Dp:(f=Number(d.substring(f,g)),isNaN(f)?HE:(g+=1,g+f>d.length?Dp:(d=d.slice(g,g+f),c.C=g+f,d)))}Fr.prototype.cancel=function(){this.J=!0,xi(this)};function Zc(c){c.S=Date.now()+c.I,GE(c,c.I)}function GE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ka(m(c.ba,c),d)}function bp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(PR(this.i,this.A),this.L!=2&&(Pa(),xt(17)),xi(this),this.s=2,Fa(this)):GE(this,this.S-c)};function Fa(c){c.j.G==0||c.J||vI(c.j,c)}function xi(c){bp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,kE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Tp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Sp(f.h,c))){if(!c.K&&Sp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ol(f),rl(f);else break e;Rp(f),xt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ka(m(f.Za,f),6e3));if(1>=QE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ri(f,11)}else if((c.K||f.g==c)&&ol(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Te=C[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let Dt=Te[3];Dt!=null&&(f.la=Dt,f.j.info("VER="+f.la));let Ct=Te[4];Ct!=null&&(f.Aa=Ct,f.j.info("SVER="+f.Aa));let Lo=Te[5];Lo!=null&&typeof Lo=="number"&&0<Lo&&(g=1.5*Lo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let In=c.g;if(In){let al=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var M=g.h;M.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ap(M,M.h),M.h=null))}if(g.D){let Pp=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Pp&&(g.ya=Pp,Le(g.I,g.D,Pp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=EI(g,g.J?g.ia:null,g.W),j.K){YE(g.h,j);var Pe=j,mt=g.L;mt&&(Pe.I=mt),Pe.B&&(bp(Pe),Zc(Pe)),g.g=j}else mI(g);0<f.i.length&&il(f)}else Te[0]!="stop"&&Te[0]!="close"||Ri(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Ri(f,7):Mp(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}Pa(4)}catch{}}var FR=class{constructor(c,d){this.g=c,this.map=d}};function WE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function QE(c){return c.h?1:c.g?c.g.size:0}function Sp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ap(c,d){c.g?c.g.add(d):c.h=d}function YE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}WE.prototype.cancel=function(){if(this.i=ZE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function ZE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function VR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function LR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function JE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=LR(c),g=VR(c),C=g.length,M=0;M<C;M++)d.call(void 0,g[M],f&&f[M],c)}var XE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var M=c[f].substring(0,g);C=c[f].substring(g+1)}else M=c[f];d(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Mi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Mi){this.h=c.h,Jc(this,c.j),this.o=c.o,this.g=c.g,Xc(this,c.s),this.l=c.l;var d=c.i,f=new ja;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),eI(this,f),this.m=c.m}else c&&(d=String(c).match(XE))?(this.h=!1,Jc(this,d[1]||"",!0),this.o=Va(d[2]||""),this.g=Va(d[3]||"",!0),Xc(this,d[4]),this.l=Va(d[5]||"",!0),eI(this,d[6]||"",!0),this.m=Va(d[7]||"")):(this.h=!1,this.i=new ja(null,this.h))}Mi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(La(d,tI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(La(d,tI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(La(f,f.charAt(0)=="/"?$R:UR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",La(f,qR)),c.join("")};function sr(c){return new Mi(c)}function Jc(c,d,f){c.j=f?Va(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Xc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function eI(c,d,f){d instanceof ja?(c.i=d,zR(c.i,c.h)):(f||(d=La(d,HR)),c.i=new ja(d,c.h))}function Le(c,d,f){c.i.set(d,f)}function el(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Va(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function La(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,BR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function BR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tI=/[#\/\?@]/g,UR=/[#\?:]/g,$R=/[#\?]/g,HR=/[#\?@]/g,qR=/#/g;function ja(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Vr(c){c.g||(c.g=new Map,c.h=0,c.i&&jR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ja.prototype,n.add=function(c,d){Vr(this),this.i=null,c=Fo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function nI(c,d){Vr(c),d=Fo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function rI(c,d){return Vr(c),d=Fo(c,d),c.g.has(d)}n.forEach=function(c,d){Vr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){Vr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let M=0;M<C.length;M++)f.push(d[g])}return f},n.V=function(c){Vr(this);let d=[];if(typeof c=="string")rI(this,c)&&(d=d.concat(this.g.get(Fo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Vr(this),this.i=null,c=Fo(this,c),rI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function iI(c,d,f){nI(c,d),0<f.length&&(c.i=null,c.g.set(Fo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let M=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var C=M;j[g]!==""&&(C+="="+encodeURIComponent(String(j[g]))),c.push(C)}}return this.i=c.join("&")};function Fo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function zR(c,d){d&&!c.j&&(Vr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(nI(this,g),iI(this,C,f))},c)),c.j=d}function GR(c,d){let f=new Oa;if(a.Image){let g=new Image;g.onload=y(Lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Lr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function WR(c,d){let f=new Oa,g=new AbortController,C=setTimeout(()=>{g.abort(),Lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(C),M.ok?Lr(f,"TestPingServer: ok",!0,d):Lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Lr(f,"TestPingServer: error",!1,d)})}function Lr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function KR(){this.g=new MR}function QR(c,d,f){let g=f||"";try{JE(c,function(C,M){let j=C;l(C)&&(j=vp(C)),d.push(g+M+"="+encodeURIComponent(j))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ba(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ba,_p),Ba.prototype.g=function(){return new tl(this.l,this.j)},Ba.prototype.i=function(c){return function(){return c}}({});function tl(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tl,It),n=tl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,$a(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ua(this):$a(this),this.readyState==3&&oI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ua(this))},n.Qa=function(c){this.g&&(this.response=c,Ua(this))},n.ga=function(){this.g&&Ua(this)};function Ua(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$a(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sI(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function xp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=sI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Le(c,d,f))}function We(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,It);var YR=/^https?$/i,ZR=["POST","PUT"];n=We.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ip.g(),this.v=this.o?OE(this.o):OE(Ip),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){aI(this,M);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ZR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,j]of f)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lI(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){aI(this,M)}};function aI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,uI(c),nl(c)}function uI(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),nl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cI(this):this.bb())},n.bb=function(){cI(this)};function cI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||ar(c)!=4||c.Z()!=2)){if(c.u&&ar(c)==4)RE(c.Ea,0,c);else if(At(c,"readystatechange"),ar(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var C=String(c.D).match(XE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!YR.test(C?C.toLowerCase():"")}f=g}if(f)At(c,"complete"),At(c,"success");else{c.m=6;try{var M=2<ar(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",uI(c)}}finally{nl(c)}}}}function nl(c,d){if(c.g){lI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||At(c,"ready");try{f.onreadystatechange=g}catch{}}}function lI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function ar(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),xR(d)}};function dI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function JR(c){let d={};c=(c.g&&2<=ar(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[C]||[];d[C]=M,M.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function hI(c){this.Aa=0,this.i=[],this.j=new Oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,c),this.cb=Ha("retryDelaySeedMs",1e4,c),this.Wa=Ha("forwardChannelMaxRetries",2,c),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new WE(c&&c.concurrentRequestLimit),this.Da=new KR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){xt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=EI(this,null,this.W),il(this)};function Mp(c){if(fI(c),c.G==3){var d=c.U++,f=sr(c.I);if(Le(f,"SID",c.K),Le(f,"RID",d),Le(f,"TYPE","terminate"),qa(c,f),d=new Fr(c,c.j,d),d.L=2,d.v=el(sr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=II(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zc(d)}wI(c)}function rl(c){c.g&&(Np(c),c.g.cancel(),c.g=null)}function fI(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!KE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Sa||bE(),Aa||(Sa(),Aa=!0),cp.add(d,c),c.B=0}}function XR(c,d){return QE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ka(m(c.Ga,c,d),_I(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Fr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=gI(this,C,d),f=sr(this.I),Le(f,"RID",c),Le(f,"CVER",22),this.D&&Le(f,"X-HTTP-Session-Id",this.D),qa(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(sI(M)))+"&"+d:this.m&&xp(f,this.m,M)),Ap(this.h,C),this.Ua&&Le(f,"TYPE","init"),this.P?(Le(f,"$req",d),Le(f,"SID","null"),C.T=!0,Cp(C,f,null)):Cp(C,f,d),this.G=2}}else this.G==3&&(c?pI(this,c):this.i.length==0||KE(this.h)||pI(this))};function pI(c,d){var f;d?f=d.l:f=c.U++;let g=sr(c.I);Le(g,"SID",c.K),Le(g,"RID",f),Le(g,"AID",c.T),qa(c,g),c.m&&c.o&&xp(g,c.m,c.o),f=new Fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=gI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ap(c.h,f),Cp(f,g,d)}function qa(c,d){c.H&&X(c.H,function(f,g){Le(d,g,f)}),c.l&&JE({},function(f,g){Le(d,g,f)})}function gI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let M=-1;for(;;){let j=["count="+f];M==-1?0<f?(M=C[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Pe=!0;for(let mt=0;mt<f;mt++){let Te=C[mt].g,Dt=C[mt].map;if(Te-=M,0>Te)M=Math.max(0,C[mt].g-100),Pe=!1;else try{QR(Dt,j,"req"+Te+"_")}catch{g&&g(Dt)}}if(Pe){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function mI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Sa||bE(),Aa||(Sa(),Aa=!0),cp.add(d,c),c.v=0}}function Rp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ka(m(c.Fa,c),_I(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,yI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ka(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),rl(this),yI(this))};function Np(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yI(c){c.g=new Fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=sr(c.qa);Le(d,"RID","rpc"),Le(d,"SID",c.K),Le(d,"AID",c.T),Le(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(d,"TO",c.ja),Le(d,"TYPE","xmlhttp"),qa(c,d),c.m&&c.o&&xp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=el(sr(d)),f.m=null,f.P=!0,qE(f,c)}n.Za=function(){this.C!=null&&(this.C=null,rl(this),Rp(this),xt(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function vI(c,d){var f=null;if(c.g==d){ol(c),Np(c),c.g=null;var g=2}else if(Sp(c.h,d))f=d.D,YE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Kc(),At(g,new BE(g,f)),il(c)}else mI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&XR(c,d)||g==2&&Rp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function _I(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ri(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Mi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(g,"https"),el(g),C?GR(g.toString(),f):WR(g.toString(),f)}else xt(2);c.G=0,c.l&&c.l.sa(d),wI(c),fI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function wI(c){if(c.G=0,c.ka=[],c.l){let d=ZE(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function EI(c,d,f){var g=f instanceof Mi?sr(f):new Mi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Xc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var M=new Mi(null);g&&Jc(M,g),d&&(M.g=d),C&&Xc(M,C),f&&(M.l=f),g=M}return f=c.D,d=c.ya,f&&d&&Le(g,f,d),Le(g,"VER",c.la),qa(c,g),g}function II(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new Ba({eb:f})):new We(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function DI(){}n=DI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new Jt(c,d)};function Jt(c,d){It.call(this),this.g=new hI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Vo(this)}b(Jt,It),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Mp(this.g)},Jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=vp(c),c=f);d.i.push(new FR(d.Ya++,c)),d.G==3&&il(d)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,Jt.aa.N.call(this)};function CI(c){wp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(CI,wp);function bI(){Ep.call(this),this.status=1}b(bI,Ep);function Vo(c){this.g=c}b(Vo,DI),Vo.prototype.ua=function(){At(this.g,"a")},Vo.prototype.ta=function(c){At(this.g,new CI(c))},Vo.prototype.sa=function(c){At(this.g,new bI)},Vo.prototype.ra=function(){At(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Dv=br.createWebChannelTransport=function(){return new sl},Iv=br.getStatEventTarget=function(){return Kc()},Ev=br.Event=Ai,Vh=br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,ec=br.ErrorCode=Qc,UE.COMPLETE="complete",wv=br.EventType=UE,FE.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",It.prototype.listen=It.prototype.K,js=br.WebChannel=FE,kj=br.FetchXmlHttpFactory=Ba,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,_v=br.XhrIo=We}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});var TS="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var ma="10.14.0";var gi=new ll("@firebase/firestore");function qs(){return gi.logLevel}function xA(n){gi.setLogLevel(n)}function O(n,...e){if(gi.logLevel<=Vn.DEBUG){let t=e.map(Aw);gi.debug(`Firestore (${ma}): ${n}`,...t)}}function Ze(n,...e){if(gi.logLevel<=Vn.ERROR){let t=e.map(Aw);gi.error(`Firestore (${ma}): ${n}`,...t)}}function Nn(n,...e){if(gi.logLevel<=Vn.WARN){let t=e.map(Aw);gi.warn(`Firestore (${ma}): ${n}`,...t)}}function Aw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+n;throw Ze(e),new Error(e)}function Y(n,e){n||K()}function MA(n,e){n||K()}function $(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends RI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}},Mv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rv=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new Wh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new ot(e)}},Nv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Pv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Nv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ov=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Y(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Oj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Kh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Oj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function Xs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function RA(n){return n+"\0"}var ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends Qh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Je=class n extends Qh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var ea=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Fv(n){return n.fields.find(e=>e.kind===2)}function uo(n){return n.fields.filter(e=>e.kind!==2)}ea.UNKNOWN_ID=-1;var Ys=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var hc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,wn.min())}};function NA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new wn(i,H.empty(),e)}function PA(n){return new wn(n.readTime,n.key,-1)}var wn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),H.empty(),-1)}static max(){return new n(ee.max(),H.empty(),-1)}};function xw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var kA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==kA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Zh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new go(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Mw(r.target.error);this.V.reject(new go(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new go(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Lv(t)}},mi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(za())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),co(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cl())return!1;if(n.v())return!0;let e=za(),t=n.S(e),r=0<t&&t<10,i=OA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new go(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new go(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Zh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function OA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Vv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return co(this.B.delete())}},go=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ti(n){return n.name==="IndexedDbTransactionError"}var Lv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),co(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),co(this.store.add(e))}get(e){return co(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),co(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),co(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Mw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Vv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function co(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Mw(r.target.error);t(i)}})}var SS=!1;function Mw(n){let e=mi.S(za());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SS||(SS=!0,setTimeout(()=>{throw r},0)),r}}return n}var jv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ti(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield bi(t)}yield this.X(6e4)}))}},Bv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=PA(o);xw(s,r)>0&&(r=s)}),new wn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var sn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pc(n){return n==null}function fc(n){return n===0&&1/n==-1/0}function FA(n){return typeof n=="number"&&Number.isInteger(n)&&!fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Lt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AS(e)),e=Vj(n.get(t),e);return AS(e)}function Vj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function AS(n){return n+""}function Qn(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),Ie.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Ie(r)}var xS=["userId","batchId"];function $h(n,e){return[n,Lt(e)]}function VA(n,e,t){return[n,Lt(e),t]}var Lj={},jj=["prefixPath","collectionGroup","readTime","documentId"],Bj=["prefixPath","collectionGroup","documentId"],Uj=["collectionGroup","readTime","prefixPath","documentId"],$j=["canonicalId","targetId"],Hj=["targetId","path"],qj=["path","targetId"],zj=["collectionId","parent"],Gj=["indexId","uid"],Wj=["uid","sequenceNumber"],Kj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qj=["indexId","uid","orderedDocumentKey"],Yj=["userId","collectionPath","documentId"],Zj=["userId","collectionPath","largestBatchId"],Jj=["userId","collectionGroup","largestBatchId"],LA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xj=[...LA,"documentOverlays"],jA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BA=jA,Rw=[...BA,"indexConfiguration","indexState","indexEntries"],eB=Rw,tB=[...Rw,"globals"];var pc=class extends Yh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function dt(n,e){let t=$(n);return mi.F(t._e,e)}function MS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ue=class n{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qs(this.root,e,this.comparator,!0)}},Qs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class n{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jh(this.data.getIterator())}getIteratorFrom(e){return new Jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Bs(n){return n.hasNext()?n.getNext():void 0}var an=class n{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new n([])}unionWith(e){let t=new Oe(Je.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function $A(){return typeof atob<"u"}var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(Y(!!n),typeof n=="string"){let e=0,t=nB.exec(n);if(Y(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function zf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nw(n){let e=n.mapValue.fields.__previous_value__;return zf(e)?Nw(e):e}function gc(n){let e=Ar(n.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var Uv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},vi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hh={nullValue:"NULL_VALUE"};function mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zf(n)?4:HA(n)?9007199254740991:Gf(n)?10:11:K()}function er(n,e){if(n===e)return!0;let t=mo(n);if(t!==mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gc(n).isEqual(gc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ar(i.timestampValue),a=Ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?fc(s)===fc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Xs(n.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MS(s)!==MS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!er(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function mc(n,e){return(n.values||[]).find(t=>er(t,e))!==void 0}function _i(n,e){if(n===e)return 0;let t=mo(n),r=mo(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),u=He(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RS(n.timestampValue,e.timestampValue);case 4:return RS(gc(n),gc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),u=yi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(He(o.latitude),He(s.latitude));return a!==0?a:ae(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,A=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:NS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===fi.mapValue&&s===fi.mapValue)return 0;if(o===fi.mapValue)return 1;if(s===fi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ae(u[p],h[p]);if(m!==0)return m;let y=_i(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function RS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Ar(n),r=Ar(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function NS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=_i(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function ta(n){return $v(n)}function $v(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=$v(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$v(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function yo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hv(n){return!!n&&"integerValue"in n}function yc(n){return!!n&&"arrayValue"in n}function PS(n){return!!n&&"nullValue"in n}function kS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qh(n){return!!n&&"mapValue"in n}function Gf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ac(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return So(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ac(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(n.arrayValue.values[t]);return e}return Object.assign({},n)}function HA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var qA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rB(n){return"nullValue"in n?Hh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yo(vi.empty(),H.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Gf(n)?qA:{mapValue:{}}:K()}function iB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yo(vi.empty(),H.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?qA:"mapValue"in n?Gf(n)?{mapValue:{}}:fi:K()}function OS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function FS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=Je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ac(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ac(this.value))}};function zA(n){let e=[];return So(n.fields,(t,r)=>{let i=new Je([t]);if(qh(r)){let o=zA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var st=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var tr=class{constructor(e,t){this.position=e,this.inclusive=t}};function VS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=_i(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!er(n.position[t],e.position[t]))return!1;return!0}var vo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function oB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ef=class{},ve=class n extends ef{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Gv(e,t,r):t==="array-contains"?new Qv(e,r):t==="in"?new tf(e,r):t==="not-in"?new Yv(e,r):t==="array-contains-any"?new Zv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Wv(e,r):new Kv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_i(t,this.value)):t!==null&&mo(this.value)===mo(t)&&this.matchesComparison(_i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class n extends ef{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return na(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function na(n){return n.op==="and"}function qv(n){return n.op==="or"}function Pw(n){return GA(n)&&na(n)}function GA(n){for(let e of n.filters)if(e instanceof Re)return!1;return!0}function zv(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+ta(n.value);if(Pw(n))return n.filters.map(e=>zv(e)).join(",");{let e=n.filters.map(t=>zv(t)).join(",");return`${n.op}(${e})`}}function WA(n,e){return n instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(n,e):n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&WA(s,i.filters[a]),!0):!1}(n,e):void K()}function KA(n,e){let t=n.filters.concat(e);return Re.create(t,n.op)}function QA(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${ta(t.value)}`}(n):n instanceof Re?function(t){return t.op.toString()+" {"+t.getFilters().map(QA).join(" ,")+"}"}(n):"Filter"}var Gv=class extends ve{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},Wv=class extends ve{constructor(e,t){super(e,"in",t),this.keys=YA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Kv=class extends ve{constructor(e,t){super(e,"not-in",t),this.keys=YA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function YA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var Qv=class extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return yc(t)&&mc(t.arrayValue,this.value)}},tf=class extends ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mc(this.value.arrayValue,t)}},Yv=class extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!mc(this.value.arrayValue,t)}},Zv=class extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}};var Jv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Xv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Jv(n,e,t,r,i,o,s)}function _o(n){let e=$(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ta(r)).join(",")),e.ue=t}return e.ue}function kc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LS(n.startAt,e.startAt)&&LS(n.endAt,e.endAt)}function nf(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rf(n,e){return n.filters.filter(t=>t instanceof ve&&t.field.isEqual(e))}function jS(n,e,t){let r=Hh,i=!0;for(let o of rf(n,e)){let s=Hh,a=!0;switch(o.op){case"<":case"<=":s=rB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Hh}OS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];OS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function BS(n,e,t){let r=fi,i=!0;for(let o of rf(n,e)){let s=fi,a=!0;switch(o.op){case">=":case">":s=iB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=fi}FS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];FS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Pn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ZA(n,e,t,r,i,o,s,a){return new Pn(n,e,t,r,i,o,s,a)}function ya(n){return new Pn(n)}function US(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function Zs(n){let e=$(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Oe(Je.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new vo(o,r))}),t.has(Je.keyField().canonicalString())||e.ce.push(new vo(Je.keyField(),r))}return e.ce}function jt(n){let e=$(n);return e.le||(e.le=sB(e,Zs(n))),e.le}function sB(n,e){if(n.limitType==="F")return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new vo(i.field,o)});let t=n.endAt?new tr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new tr(n.startAt.position,n.startAt.inclusive):null;return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function e_(n,e){let t=n.filters.concat([e]);return new Pn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function of(n,e,t){return new Pn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oc(n,e){return kc(jt(n),jt(e))&&n.limitType===e.limitType}function JA(n){return`${_o(jt(n))}|lt:${n.limitType}`}function zs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>QA(i)).join(", ")}]`),Pc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ta(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ta(i)).join(",")),`Target(${r})`}(jt(n))}; limitType=${n.limitType})`}function Fc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Zs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=VS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Zs(r),i)||r.endAt&&!function(s,a,u){let l=VS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Zs(r),i))}(n,e)}function XA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ex(n){return(e,t)=>{let r=!1;for(let i of Zs(n)){let o=aB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aB(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?_i(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var nr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return UA(this.inner)}size(){return this.innerSize}};var uB=new Ue(H.comparator);function Yt(){return uB}var tx=new Ue(H.comparator);function oc(...n){let e=tx;for(let t of n)e=e.insert(t.key,t);return e}function nx(n){let e=tx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yn(){return uc()}function rx(){return uc()}function uc(){return new nr(n=>n.toString(),(n,e)=>n.isEqual(e))}var cB=new Ue(H.comparator),lB=new Oe(H.comparator);function ce(...n){let e=lB;for(let t of n)e=e.add(t);return e}var dB=new Oe(ae);function Ow(){return dB}function Fw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function ix(n){return{integerValue:""+n}}function ox(n,e){return FA(e)?ix(e):Fw(n,e)}var ra=class{constructor(){this._=void 0}};function hB(n,e,t){return n instanceof wi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zf(o)&&(o=Nw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof xr?ax(n,e):n instanceof Mr?ux(n,e):function(i,o){let s=sx(i,o),a=$S(s)+$S(i.Pe);return Hv(s)&&Hv(i.Pe)?ix(a):Fw(i.serializer,a)}(n,e)}function fB(n,e,t){return n instanceof xr?ax(n,e):n instanceof Mr?ux(n,e):t}function sx(n,e){return n instanceof Ei?function(r){return Hv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var wi=class extends ra{},xr=class extends ra{constructor(e){super(),this.elements=e}};function ax(n,e){let t=cx(e);for(let r of n.elements)t.some(i=>er(i,r))||t.push(r);return{arrayValue:{values:t}}}var Mr=class extends ra{constructor(e){super(),this.elements=e}};function ux(n,e){let t=cx(e);for(let r of n.elements)t=t.filter(i=>!er(i,r));return{arrayValue:{values:t}}}var Ei=class extends ra{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function $S(n){return He(n.integerValue||n.doubleValue)}function cx(n){return yc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var wo=class{constructor(e,t){this.field=e,this.transform=t}};function pB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xr&&i instanceof xr||r instanceof Mr&&i instanceof Mr?Xs(r.elements,i.elements,er):r instanceof Ei&&i instanceof Ei?er(r.Pe,i.Pe):r instanceof wi&&i instanceof wi}(n.transform,e.transform)}var t_=class{constructor(e,t){this.version=e,this.transformResults=t}},Ye=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ia=class{};function lx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Di(n.key,Ye.none()):new Ii(n.key,n.data,Ye.none());{let t=n.data,r=St.empty(),i=new Oe(Je.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new kn(n.key,r,new an(i.toArray()),Ye.none())}}function gB(n,e,t){n instanceof Ii?function(i,o,s){let a=i.value.clone(),u=qS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(i,o,s){if(!zh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(dx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function cc(n,e,t,r){return n instanceof Ii?function(o,s,a,u){if(!zh(o.precondition,s))return a;let l=o.value.clone(),h=zS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof kn?function(o,s,a,u){if(!zh(o.precondition,s))return a;let l=zS(o.fieldTransforms,u,s),h=s.data;return h.setAll(dx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return zh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function mB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=sx(r.transform,i||null);o!=null&&(t===null&&(t=St.empty()),t.set(r.field,o))}return t||null}function HS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xs(r,i,(o,s)=>pB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ii=class extends ia{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends ia{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function dx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qS(n,e,t){let r=new Map;Y(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fB(s,a,t[i]))}return r}function zS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,hB(o,s,e))}return r}var Di=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vc=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _c=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=rx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=lx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(t,r)=>HS(t,r))&&Xs(this.baseMutations,e.baseMutations,(t,r)=>HS(t,r))}},n_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length);let i=function(){return cB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var wc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var r_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rt,Ee;function hx(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function fx(n){if(n===void 0)return Ze("GRPC error has no .code"),R.UNKNOWN;switch(n){case rt.OK:return R.OK;case rt.CANCELLED:return R.CANCELLED;case rt.UNKNOWN:return R.UNKNOWN;case rt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case rt.INTERNAL:return R.INTERNAL;case rt.UNAVAILABLE:return R.UNAVAILABLE;case rt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case rt.NOT_FOUND:return R.NOT_FOUND;case rt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case rt.ABORTED:return R.ABORTED;case rt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case rt.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(Ee=rt||(rt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var GS=null;function px(){return new TextEncoder}var yB=new ui([4294967295,4294967295],0);function WS(n){let e=px().encode(n),t=new vv;return t.update(e),new Uint8Array(t.digest())}function KS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ui([t,r],0),new ui([i,o],0)]}var i_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new po(`Invalid padding: ${t}`);if(r<0)throw new po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new po(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new po(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ui.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ui.fromNumber(r)));return i.compare(yB)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=WS(e),[r,i]=KS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=WS(e),[r,i]=KS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},po=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ec=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Ue(ae),Yt(),ce())}},Ic=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var Js=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},sf=class{constructor(e,t){this.targetId=e,this.me=t}},af=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},uf=class{constructor(){this.fe=0,this.ge=YS(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Ic(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=YS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},o_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yt(),this.qe=QS(),this.Qe=new Ue(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(nf(o))if(r===0){let s=new H(o.path);this.Ue(t,s,st.newNoDocument(s,ee.min()))}else Y(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}GS?.et(function(h,p,m,y,b){var A,x,L,z,V,Z;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ne.bloomFilter={applied:b===0,hashCount:(A=X?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(z=(L=(x=X?.bits)===null||x===void 0?void 0:x.bitmap)===null||L===void 0?void 0:L.length)!==null&&z!==void 0?z:0,padding:(Z=(V=X?.bits)===null||V===void 0?void 0:V.padding)!==null&&Z!==void 0?Z:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ne}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(u){if(u instanceof Xh)return Nn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new i_(s,i,o)}catch(u){return Nn(u instanceof po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&nf(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,st.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ec(e,t,this.Qe,this.ke,r);return this.ke=Yt(),this.qe=QS(),this.Qe=new Ue(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Oe(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function QS(){return new Ue(H.comparator)}function YS(){return new Ue(H.comparator)}var vB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wB={and:"AND",or:"OR"},s_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function a_(n,e){return n.useProto3Json||Pc(e)?e:{value:e}}function oa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EB(n,e){return oa(n,e.toTimestamp())}function Xe(n){return Y(!!n),ee.fromTimestamp(function(t){let r=Ar(t);return new ze(r.seconds,r.nanos)}(n))}function Vw(n,e){return u_(n,e).canonicalString()}function u_(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mx(n){let e=Ie.fromString(n);return Y(Tx(e)),e}function Dc(n,e){return Vw(n.databaseId,e.path)}function Jn(n,e){let t=mx(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(_x(t))}function yx(n,e){return Vw(n.databaseId,e)}function vx(n){let e=mx(n);return e.length===4?Ie.emptyPath():_x(e)}function c_(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _x(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ZS(n,e,t){return{name:Dc(n,e),fields:t.value.mapValue.fields}}function wx(n,e,t){let r=Jn(n,e.name),i=Xe(e.updateTime),o=e.createTime?Xe(e.createTime):ee.min(),s=new St({mapValue:{fields:e.fields}}),a=st.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function IB(n,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let o=Jn(r,i.found.name),s=Xe(i.found.updateTime),a=i.found.createTime?Xe(i.found.createTime):ee.min(),u=new St({mapValue:{fields:i.found.fields}});return st.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let o=Jn(r,i.missing),s=Xe(i.readTime);return st.newNoDocument(o,s)}(n,e):K()}function DB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Y(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:fx(l.code);return new k(h,l.message||"")}(s);t=new af(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jn(n,r.document.name),o=Xe(r.document.updateTime),s=r.document.createTime?Xe(r.document.createTime):ee.min(),a=new St({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Js(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jn(n,r.document),o=r.readTime?Xe(r.readTime):ee.min(),s=st.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jn(n,r.document),o=r.removedTargetIds||[];t=new Js([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new r_(i,o),a=r.targetId;t=new sf(a,s)}}return t}function Cc(n,e){let t;if(e instanceof Ii)t={update:ZS(n,e.key,e.value)};else if(e instanceof Di)t={delete:Dc(n,e.key)};else if(e instanceof kn)t={update:ZS(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof vc))return K();t={verify:Dc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof wi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ei)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function l_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ye.updateTime(Xe(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),u=new wi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new xr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Mr(h)}else"increment"in a?u=new Ei(s,a.increment):K();let l=Je.fromServerFormat(a.fieldPath);return new wo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Jn(n,e.update.name),o=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new an(l.map(h=>Je.fromServerFormat(h)))}(e.updateMask);return new kn(i,o,s,t,r)}return new Ii(i,o,t,r)}if(e.delete){let i=Jn(n,e.delete);return new Di(i,t)}if(e.verify){let i=Jn(n,e.verify);return new vc(i,t)}return K()}function CB(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xe(i.updateTime):Xe(o);return s.isEqual(ee.min())&&(s=Xe(o)),new t_(s,i.transformResults||[])}(t,e))):[]}function Ex(n,e){return{documents:[yx(n,e.path)]}}function Ix(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yx(n,i);let o=function(l){if(l.length!==0)return bx(Re.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Gs(m.field),direction:TB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=a_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Dx(n){let e=vx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Cx(p);return m instanceof Re&&Pw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new vo(Ws(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Pc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new tr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new tr(y,m)}(t.endAt)),ZA(e,i,s,o,a,"F",u,l)}function bB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ws(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ws(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ws(t.unaryFilter.field);return ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ws(t.unaryFilter.field);return ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(Ws(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Re.create(t.compositeFilter.filters.map(r=>Cx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function TB(n){return vB[n]}function SB(n){return _B[n]}function AB(n){return wB[n]}function Gs(n){return{fieldPath:n.canonicalString()}}function Ws(n){return Je.fromServerFormat(n.fieldPath)}function bx(n){return n instanceof ve?function(t){if(t.op==="=="){if(kS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NAN"}};if(PS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NAN"}};if(PS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(t.field),op:SB(t.op),value:t.value}}}(n):n instanceof Re?function(t){let r=t.getFilters().map(i=>bx(i));return r.length===1?r[0]:{compositeFilter:{op:AB(t.op),filters:r}}}(n):K()}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var sa=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cf=class{constructor(e){this.ct=e}};function MB(n,e){let t;if(e.document)t=wx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=H.fromSegments(e.noDocument.path),i=Io(e.noDocument.readTime);t=st.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=H.fromSegments(e.unknownDocument.path),i=Io(e.unknownDocument.version);t=st.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ze(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function JS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Dc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:oa(o,s.version.toTimestamp()),createTime:oa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eo(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Eo(e.version)}}return r}function lf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Io(n){let e=new ze(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function lo(n,e){let t=(e.baseMutations||[]).map(o=>l_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>l_(n.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new _c(e.batchId,i,t,r)}function sc(n){let e=Io(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Io(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Y(o.documents.length===1),jt(ya(vx(o.documents[0])))}(n.query):function(o){return jt(Dx(o))}(n.query),new sa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,et.fromBase64String(n.resumeToken))}function Sx(n,e){let t=Eo(e.snapshotVersion),r=Eo(e.lastLimboFreeSnapshotVersion),i;i=nf(e.target)?Ex(n.ct,e.target):Ix(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_o(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lw(n){let e=Dx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?of(e,e.limit,"L"):e}function Cv(n,e){return new wc(e.largestBatchId,l_(n.ct,e.overlayMutation))}function XS(n,e){let t=e.path.lastSegment();return[n,Lt(e.path.popLast()),t]}function eA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Eo(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}var d_=class{getBundleMetadata(e,t){return tA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Io(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return tA(e).put(function(i){return{bundleId:i.id,createTime:Eo(Xe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return nA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Lw(o.bundledQuery),readTime:Io(o.readTime)}}(r)})}saveNamedQuery(e,t){return nA(e).put(function(i){return{name:i.name,readTime:Eo(Xe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function tA(n){return dt(n,"bundles")}function nA(n){return dt(n,"namedQueries")}var df=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return tc(e).get(XS(this.userId,t)).next(r=>r?Cv(this.serializer,r):null)}getOverlays(e,t){let r=Yn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new wc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Lt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(tc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Yn(),o=Lt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return tc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Cv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Yn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Cv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return tc(e).put(function(i,o,s){let[a,u,l]=XS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Cc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function tc(n){return dt(n,"documentOverlays")}var h_=class{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Tr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?HA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Gf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(He(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),H.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Tr.vt=new Tr;function RB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function rA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=RB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var f_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=rA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=rA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},p_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},g_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ho=class{constructor(){this.jt=new f_,this.Ht=new p_(this.jt),this.Jt=new g_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var fo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ci(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=iA(n.arrayValue,e.arrayValue),t!==0?t:(t=iA(n.directionalValue,e.directionalValue),t!==0?t:H.comparator(n.documentKey,e.documentKey)))}function iA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var hf=class{constructor(e){this.Xt=new Oe((t,r)=>Je.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Fv(e);if(t!==void 0&&!this.sn(t))return!1;let r=uo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Oe(Je.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ys(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ys(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ys(r.field,r.dir==="asc"?0:1)));return new ea(ea.UNKNOWN_ID,this.collectionId,t,hc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Ax(n){var e,t;if(Y(n instanceof ve||n instanceof Re),n instanceof ve){if(n instanceof tf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ve.create(n.field,"==",o)))||[];return Re.create(i,"or")}return n}let r=n.filters.map(i=>Ax(i));return Re.create(r,n.op)}function NB(n){if(n.getFilters().length===0)return[];let e=v_(Ax(n));return Y(xx(e)),m_(e)||y_(e)?[e]:e.getFilters()}function m_(n){return n instanceof ve}function y_(n){return n instanceof Re&&Pw(n)}function xx(n){return m_(n)||y_(n)||function(t){if(t instanceof Re&&qv(t)){for(let r of t.getFilters())if(!m_(r)&&!y_(r))return!1;return!0}return!1}(n)}function v_(n){if(Y(n instanceof ve||n instanceof Re),n instanceof ve)return n;if(n.filters.length===1)return v_(n.filters[0]);let e=n.filters.map(r=>v_(r)),t=Re.create(e,n.op);return t=ff(t),xx(t)?t:(Y(t instanceof Re),Y(na(t)),Y(t.filters.length>1),t.filters.reduce((r,i)=>jw(r,i)))}function jw(n,e){let t;return Y(n instanceof ve||n instanceof Re),Y(e instanceof ve||e instanceof Re),t=n instanceof ve?e instanceof ve?function(i,o){return Re.create([i,o],"and")}(n,e):oA(n,e):e instanceof ve?oA(e,n):function(i,o){if(Y(i.filters.length>0&&o.filters.length>0),na(i)&&na(o))return KA(i,o.getFilters());let s=qv(i)?i:o,a=qv(i)?o:i,u=s.filters.map(l=>jw(l,a));return Re.create(u,"or")}(n,e),ff(t)}function oA(n,e){if(na(e))return KA(e,n.getFilters());{let t=e.filters.map(r=>jw(n,r));return Re.create(t,"or")}}function ff(n){if(Y(n instanceof ve||n instanceof Re),n instanceof ve)return n;let e=n.getFilters();if(e.length===1)return ff(e[0]);if(GA(n))return n;let t=e.map(i=>ff(i)),r=[];return t.forEach(i=>{i instanceof ve?r.push(i):i instanceof Re&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,n.op)}var __=class{constructor(){this.un=new bc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(wn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(wn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},bc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oe(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(Ie.comparator)).toArray()}};var Lh=new Uint8Array(0),w_=class{constructor(e,t){this.databaseId=t,this.cn=new bc,this.ln=new nr(r=>_o(r),(r,i)=>kc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Lt(i)};return sA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[RA(t),""],!1,!0);return sA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Qn(s.parent))}return r})}addFieldIndex(e,t){let r=nc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=$s(e);return o.next(a=>{s.put(eA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=nc(e),i=$s(e),o=Us(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=nc(e),r=Us(e),i=$s(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new hf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Us(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(u)} to execute ${_o(t)}`);let h=function(V,Z){let ne=Fv(Z);if(ne===void 0)return null;for(let X of rf(V,ne.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(V,Z){let ne=new Map;for(let X of uo(Z))for(let E of rf(V,X.fieldPath))switch(E.op){case"==":case"in":ne.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ne.set(X.fieldPath.canonicalString(),E.value),Array.from(ne.values())}return null}(l,u),m=function(V,Z){let ne=[],X=!0;for(let E of uo(Z)){let v=E.kind===0?jS(V,E.fieldPath,V.startAt):BS(V,E.fieldPath,V.startAt);ne.push(v.value),X&&(X=v.inclusive)}return new tr(ne,X)}(l,u),y=function(V,Z){let ne=[],X=!0;for(let E of uo(Z)){let v=E.kind===0?BS(V,E.fieldPath,V.endAt):jS(V,E.fieldPath,V.endAt);ne.push(v.value),X&&(X=v.inclusive)}return new tr(ne,X)}(l,u),b=this.In(u,l,m),A=this.In(u,l,y),x=this.Tn(u,l,p),L=this.En(u.indexId,h,b,m.inclusive,A,y.inclusive,x);return S.forEach(L,z=>r.G(z,t.limit).next(V=>{V.forEach(Z=>{let ne=H.fromSegments(Z.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=NB(Re.create(e.filters,"and")).map(r=>Xv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Lh,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),A=a.map(x=>this.An(e,m,x,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new fo(e,H.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new fo(e,H.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new hf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Oe(Je.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new ho;for(let i of uo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Tr.vt.It(o,s)}return r.zt()}dn(e){let t=new ho;return Tr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new ho;return Tr.vt.It(yo(this.databaseId,t),r.Yt(function(o){let s=uo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new ho);let o=0;for(let s of uo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&yc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Tr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new ho;u.seed(a.zt()),Tr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=nc(e),i=$s(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new hc(p.sequenceNumber,new wn(Io(p.readTime),new H(Qn(p.documentKey)),p.largestBatchId)):hc.empty(),y=h.fields.map(([b,A])=>new Ys(Je.fromServerFormat(b),A));return new ea(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=nc(e),o=$s(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(eA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Us(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Us(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Us(e),o=new Oe(ci);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new fo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Oe(ci),i=this.Vn(t,e);if(i==null)return r;let o=Fv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(yc(s))for(let a of s.arrayValue.values||[])r=r.add(new fo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new fo(t.indexId,e.key,Lh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),A=Bs(y),x=Bs(b);for(;A||x;){let L=!1,z=!1;if(A&&x){let V=h(A,x);V<0?z=!0:V>0&&(L=!0)}else A!=null?z=!0:L=!0;L?(p(x),x=Bs(b)):z?(m(A),A=Bs(y)):(A=Bs(y),x=Bs(b))}}(i,o,ci,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ci(s,a)).filter((s,a,u)=>!a||ci(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ci(s,e),u=ci(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Lh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Lh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ci(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(aA)}};function sA(n){return dt(n,"collectionParents")}function Us(n){return dt(n,"indexEntries")}function nc(n){return dt(n,"indexConfiguration")}function $s(n){return dt(n,"indexState")}function aA(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new wn(e.readTime,e.documentKey,t)}var uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_n=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Mx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Y(a===1)}));let l=[];for(let h of t.mutations){let p=VA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function pf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(41943040,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);var gf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Y(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ks(e),s=li(e);return s.add({}).next(a=>{Y(typeof a=="number");let u=new _c(a,t,r,i),l=function(y,b,A){let x=A.baseMutations.map(z=>Cc(y.ct,z)),L=A.mutations.map(z=>Cc(y.ct,z));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:L}}(this.serializer,this.userId,u),h=[],p=new Oe((m,y)=>ae(m.canonicalString(),y.canonicalString()));for(let m of i){let y=VA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Lj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return li(e).get(t).next(r=>r?(Y(r.userId===this.userId),lo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return li(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r),o=lo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return li(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).U("userMutationsIndex",t).next(r=>r.map(i=>lo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=$h(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ks(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Qn(h);if(l===this.userId&&t.path.isEqual(m))return li(e).get(p).next(y=>{if(!y)throw K();Y(y.userId===this.userId),o.push(lo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ae),i=[];return t.forEach(o=>{let s=$h(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ks(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,A=Qn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=$h(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Oe(ae);return Ks(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,b=Qn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(li(e).get(o).next(s=>{if(s===null)throw K();Y(s.userId===this.userId),r.push(lo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Mx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ks(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Qn(o[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,t){return Rx(e,this.userId,t)}Nn(e){return Nx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Rx(n,e,t){let r=$h(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ks(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function li(n){return dt(n,"mutations")}function Ks(n){return dt(n,"documentMutations")}function Nx(n){return dt(n,"mutationQueues")}var aa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var E_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new aa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Hs(e).J((s,a)=>{let u=sc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Hs(e).J((r,i)=>{let o=sc(i);t(o)})}qn(e){return cA(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Qn(e,t){return cA(e).put("targetGlobalKey",t)}Kn(e,t){return Hs(e).put(Sx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=_o(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Hs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=sc(a);kc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=di(e);return t.forEach(s=>{let a=Lt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=di(e);return S.forEach(t,o=>{let s=Lt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=di(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=di(e),o=ce();return i.J({range:r,H:!0},(s,a,u)=>{let l=Qn(s[1]),h=new H(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Lt(t.path),i=IDBKeyRange.bound([r],[RA(r)],!1,!0),o=0;return di(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Hs(e).get(t).next(r=>r?sc(r):null)}};function Hs(n){return dt(n,"targets")}function cA(n){return dt(n,"targetGlobal")}function di(n){return dt(n,"targetDocuments")}function lA([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var I_=class{constructor(e){this.Un=e,this.buffer=new Oe(lA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();lA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},D_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ti(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield bi(t)}yield this.Hn(3e5)}))}},C_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(sn.oe);let r=new I_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(uA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),qs()<=Vn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function PB(n,e){return new C_(n,e)}var b_=class{constructor(e,t){this.db=e,this.garbageCollector=PB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return jh(e,r)}removeReference(e,t,r){return jh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jh(e,t)}nr(e,t){return function(i,o){let s=!1;return Nx(i).Y(a=>Rx(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),di(e).delete(function(p){return[0,Lt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jh(e,t)}tr(e,t){let r=di(e),i,o=sn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==sn.oe&&t(new H(Qn(i)),o),o=l,i=u):o=sn.oe}).next(()=>{o!==sn.oe&&t(new H(Qn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function jh(n,e){return di(n).put(function(r,i){return{targetId:0,path:Lt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var mf=class{constructor(){this.changes=new nr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var T_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ao(e).put(r)}removeEntry(e,t,r){return ao(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],lf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=st.newInvalidDocument(t);return ao(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:st.newInvalidDocument(t)};return ao(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r={document:this.ir(t,o),size:pf(o)}}).next(()=>r)}getEntries(e,t){let r=Yt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Yt(),i=new Ue(H.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,pf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Oe(fA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(rc(i.first()),rc(i.last())),s=i.getIterator(),a=s.getNext();return ao(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=H.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&fA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(rc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Yt();for(let p of l){let m=this.ir(H.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Fc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Yt(),s=hA(t,r),a=hA(t,wn.max());return ao(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(H.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new S_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dA(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}rr(e,t){return dA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=MB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return st.newInvalidDocument(e)}};function Px(n){return new T_(n)}var S_=class extends mf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new nr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Oe((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=JS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=pf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=JS(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function dA(n){return dt(n,"remoteDocumentGlobal")}function ao(n){return dt(n,"remoteDocumentsV14")}function rc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hA(n,e){let t=e.documentKey.path.toArray();return[n,lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var A_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var yf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cc(r.mutation,i,an.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=Yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=oc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Yt(),s=uc(),a=function(){return uc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof kn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),cc(h.mutation,l,h.mutation.getFieldMask(),ze.now())):s.set(l.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new A_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=uc(),i=new Ue((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||an.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=rx();h.forEach(m=>{if(!o.has(m)){let y=lx(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Yn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:nx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=oc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new Pn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,st.newInvalidDocument(h)))});let a=oc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&cc(h.mutation,l,an.empty(),ze.now()),Fc(t,l)&&(a=a.insert(u,l))}),a})}};var x_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Lw(i.bundledQuery),readTime:Xe(i.readTime)}}(t)),S.resolve()}};var M_=class{constructor(){this.overlays=new Ue(H.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Yn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Yn(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Yn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Yn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var R_=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Tc=class{constructor(){this.Tr=new Oe(it.Er),this.dr=new Oe(it.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new it(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new it(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new H(new Ie([])),r=new it(t,e),i=new it(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new H(new Ie([])),r=new it(t,e),i=new it(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new it(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return H.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||H.comparator(e.key,t.key)}};var N_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Oe(it.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _c(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new it(t,0),i=new it(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ae);return t.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new it(new H(o),0),a=new Oe(ae);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new it(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new it(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var P_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ue(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():st.newInvalidDocument(t))}getEntries(e,t){let r=Yt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():st.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Yt(),s=t.path,a=new H(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xw(PA(h),r)<=0||(i.has(h.key)||Fc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k_(this)}getSize(e){return S.resolve(this.size)}},k_=class extends mf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var O_=class{constructor(e){this.persistence=e,this.Nr=new nr(t=>_o(t),kc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tc,this.targetCount=0,this.kr=aa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var vf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new sn(0),this.Kr=!1,this.Kr=!0,this.$r=new R_,this.referenceDelegate=e(this),this.Ur=new O_(this),this.indexManager=new __,this.remoteDocumentCache=function(i){return new P_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cf(t),this.Gr=new x_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new N_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new F_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},F_=class extends Yh{constructor(e){super(),this.currentSequenceNumber=e}},_f=class n{constructor(e){this.persistence=e,this.Jr=new Tc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var V_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Zh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xS,{unique:!0}),u.createObjectStore("documentMutations")}(e),pA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),pA(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:Yj});l.createIndex("collectionPathOverlayIndex",Zj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Jj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:jj});l.createIndex("documentKeyIndex",Bj),l.createIndex("collectionGroupIndex",Uj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Gj}).createIndex("sequenceNumberIndex",Wj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Kj}).createIndex("documentKeyIndex",Qj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=pf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Y(u.userId===o.userId);let l=lo(this.serializer,u);return Mx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ie(s),l=function(p){return[0,Lt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Lt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:zj});let r=t.store("collectionParents"),i=new bc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Lt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ie(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Qn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=sc(i),s=Sx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new H(Ie.fromString(p.document.name).popFirst(5)):p.noDocument?H.fromSegments(p.noDocument.path):p.unknownDocument?H.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Px(this.serializer),o=new vf(_f.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ce();lo(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new ot(l),p=df.lt(this.serializer,h),m=o.getIndexManager(h),y=gf.lt(h,this.serializer,m,o.referenceDelegate);return new yf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new pc(t,sn.oe),u).next()})})}};function pA(n){n.createObjectStore("targetDocuments",{keyPath:Hj}).createIndex("documentTargetsIndex",qj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$j,{unique:!0}),n.createObjectStore("targetGlobal")}var bv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",L_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new b_(this,i),this.Ai=t+"main",this.serializer=new cf(u),this.Ri=new mi(this.Ai,this.hi,new V_(this.serializer)),this.$r=new h_,this.Ur=new E_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Px(this.serializer),this.Gr=new d_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,bv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new sn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ti(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ic(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Bh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=dt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,bv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new pc(e,sn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Bh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return gf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new w_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return df.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?tB:u===16?eB:u===15?Rw:u===14?BA:u===13?jA:u===12?Xj:u===11?LA:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new pc(a,this.Qr?this.Qr.next():sn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,kA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,bv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put("owner",t)}static D(){return mi.D()}bi(e){let t=ic(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Fp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ic(n){return dt(n,"owner")}function Bh(n){return dt(n,"clientMetadata")}function Bw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var j_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var B_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fp()?8:OA(za())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new B_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(qs()<=Vn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",zs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(qs()<=Vn.DEBUG&&O("QueryEngine","Query:",zs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(qs()<=Vn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",zs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(t))):S.resolve())}Yi(e,t){if(US(t))return S.resolve(null);let r=jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=of(t,null,"F"),r=jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,of(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return US(t)||i.isEqual(ee.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(qs()<=Vn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zs(t)),this.rs(e,s,t,NA(i,-1)).next(a=>a))})}ts(e,t){let r=new Oe(ex(e));return t.forEach((i,o)=>{Fc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return qs()<=Vn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",zs(t)),this.Ji.getDocumentsMatchingQuery(e,t,wn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var U_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ue(ae),this._s=new nr(o=>_o(o),kc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function kx(n,e,t,r){return new U_(n,e,t,r)}function Ox(n,e){return N(this,null,function*(){let t=$(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function kB(n,e){let t=$(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let x=l.docVersions.get(b);Y(x!==null),A.version.compareTo(x)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fx(n){let e=$(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function OB(n,e){let t=$(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,x,L){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Yt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Vx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function Vx(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Yt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function FB(n,e){let t=$(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ua(n,e){let t=$(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new sa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ca(n,e,t){return N(this,null,function*(){let r=$(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ti(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Ef(n,e,t){let r=$(n),i=ee.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=$(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ce())).next(a=>(Bx(r,XA(e),a),{documents:a,Ts:o})))}function Lx(n,e){let t=$(n),r=$(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function jx(n,e){let t=$(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,NA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Bx(t,e,i),i))}function Bx(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function VB(n,e,t,r){return N(this,null,function*(){let i=$(n),o=ce(),s=Yt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield ua(i,function(h){return jt(ya(Ie.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Vx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function LB(r,i){return N(this,arguments,function*(n,e,t=ce()){let o=yield ua(n,jt(Lw(e.bundledQuery))),s=$(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Xe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function gA(n,e){return`firestore_clients_${n}_${e}`}function mA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Tv(n,e){return`firestore_targets_${n}_${e}`}var If=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},lc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Df=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Ow();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=FA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},$_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Sc=class{constructor(){this.activeTargetIds=Ow()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},dc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ue(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=gA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Sc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(gA(this.persistenceKey,r));if(i){let o=Df.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Tv(this.persistenceKey,e));if(i){let o=lc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=sn.oe;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==sn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new If(this.currentUser,e,t,r),o=mA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=mA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Tv(this.persistenceKey,e),o=new lc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Df.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return If.Rs(new ot(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return lc.Rs(i,t)}Ls(e){return $_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Ow();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Cf=class{constructor(){this.so=new Sc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var H_=class{_o(e){}shutdown(){}};var bf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Uh=null;function Sv(){return Uh===null?Uh=function(){return 268435456+Math.round(2147483648*Math.random())}():Uh++,"0x"+Uh.toString(16)}var jB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var q_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Tt="WebChannelConnection",z_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Sv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Nn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=jB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Sv();return new Promise((s,a)=>{let u=new _v;u.setWithCredentials(!0),u.listenOnce(wv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ec.NO_ERROR:let h=u.getResponseJson();O(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ec.TIMEOUT:O(Tt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:let p=u.getStatus();if(O(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(x){let L=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(L)>=0?L:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Sv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Dv(),a=Iv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,b=new q_({Io:x=>{y?O(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(O(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Tt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),A=(x,L,z)=>{x.listen(L,V=>{try{z(V)}catch(Z){setTimeout(()=>{throw Z},0)}})};return A(p,js.EventType.OPEN,()=>{y||(O(Tt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,js.EventType.CLOSE,()=>{y||(y=!0,O(Tt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,js.EventType.ERROR,x=>{y||(y=!0,Nn(Tt,`RPC '${e}' stream ${i} transport errored:`,x),b.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,js.EventType.MESSAGE,x=>{var L;if(!y){let z=x.data[0];Y(!!z);let V=z,Z=V.error||((L=V[0])===null||L===void 0?void 0:L.error);if(Z){O(Tt,`RPC '${e}' stream ${i} received error:`,Z);let ne=Z.status,X=function(w){let I=rt[w];if(I!==void 0)return fx(I)}(ne),E=Z.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+ne+" with message "+Z.message),y=!0,b.So(new k(X,E)),p.close()}else O(Tt,`RPC '${e}' stream ${i} received:`,z),b.bo(z)}}),A(a,Ev.STAT_EVENT,x=>{x.stat===Vh.PROXY?O(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Vh.NOPROXY&&O(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Ux(){return typeof window<"u"?window:null}function Gh(){return typeof document<"u"?document:null}function Vc(n){return new s_(n,!0)}var Ac=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Tf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ac(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ze(t.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},G_=class extends Tf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=DB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Xe(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=c_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=nf(u)?{documents:Ex(o,u)}:{query:Ix(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=gx(o,s.resumeToken);let l=a_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=oa(o,s.snapshotVersion.toTimestamp());let l=a_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=c_(this.serializer),t.removeTarget=e,this.a_(t)}},W_=class extends Tf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=CB(e.writeResults,e.commitTime),r=Xe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=c_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Cc(this.serializer,r))};this.a_(t)}};var K_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,u_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,u_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Q_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ze(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Y_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Si(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=$(u);l.L_.add(4),yield va(l),l.q_.set("Unknown"),l.L_.delete(4),yield Lc(l)})}(this))}))}),this.q_=new Q_(r,i)}};function Lc(n){return N(this,null,function*(){if(Si(n))for(let e of n.B_)yield e(!0)})}function va(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Wf(n,e){let t=$(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Hw(t)?$w(t):wa(t).r_()&&Uw(t,e))}function la(n,e){let t=$(n),r=wa(t);t.N_.delete(e),r.r_()&&$x(t,e),t.N_.size===0&&(r.r_()?r.o_():Si(t)&&t.q_.set("Unknown"))}function Uw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(n).A_(e)}function $x(n,e){n.Q_.xe(e),wa(n).R_(e)}function $w(n){n.Q_=new o_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wa(n).start(),n.q_.v_()}function Hw(n){return Si(n)&&!wa(n).n_()&&n.N_.size>0}function Si(n){return $(n).L_.size===0}function Hx(n){n.Q_=void 0}function BB(n){return N(this,null,function*(){n.q_.set("Online")})}function UB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Uw(n,e)})})}function $B(n,e){return N(this,null,function*(){Hx(n),Hw(n)?(n.q_.M_(e),$w(n)):n.q_.set("Unknown")})}function HB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof af&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sf(n,r)}else if(e instanceof Js?n.Q_.Ke(e):e instanceof sf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield Fx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),$x(o,u);let p=new sa(h.target,u,l,h.sequenceNumber);Uw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Sf(n,r)}})}function Sf(n,e,t){return N(this,null,function*(){if(!Ti(e))throw e;n.L_.add(1),yield va(n),n.q_.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Lc(n)}))})}function qx(n,e){return e().catch(t=>Sf(n,t,e))}function _a(n){return N(this,null,function*(){let e=$(n),t=Ci(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qB(e);)try{let i=yield FB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,zB(e,i)}catch(i){yield Sf(e,i)}zx(e)&&Gx(e)})}function qB(n){return Si(n)&&n.O_.length<10}function zB(n,e){n.O_.push(e);let t=Ci(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zx(n){return Si(n)&&!Ci(n).n_()&&n.O_.length>0}function Gx(n){Ci(n).start()}function GB(n){return N(this,null,function*(){Ci(n).p_()})}function WB(n){return N(this,null,function*(){let e=Ci(n);for(let t of n.O_)e.m_(t.mutations)})}function KB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=n_.from(r,e,t);yield qx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _a(n)})}function QB(n,e){return N(this,null,function*(){e&&Ci(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return hx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ci(r).s_(),yield qx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _a(r)}})}(n,e)),zx(n)&&Gx(n)})}function yA(n,e){return N(this,null,function*(){let t=$(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Si(t);t.L_.add(3),yield va(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Lc(t)})}function Z_(n,e){return N(this,null,function*(){let t=$(n);e?(t.L_.delete(2),yield Lc(t)):e||(t.L_.add(2),yield va(t),t.q_.set("Unknown"))})}function wa(n){return n.K_||(n.K_=function(t,r,i){let o=$(t);return o.w_(),new G_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BB.bind(null,n),Ro:UB.bind(null,n),mo:$B.bind(null,n),d_:HB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Hw(n)?$w(n):n.q_.set("Unknown")):(yield n.K_.stop(),Hx(n))}))),n.K_}function Ci(n){return n.U_||(n.U_=function(t,r,i){let o=$(t);return o.w_(),new W_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GB.bind(null,n),mo:QB.bind(null,n),f_:WB.bind(null,n),g_:KB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield _a(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var J_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ea(n,e){if(Ze("AsyncQueue",`${e}: ${n}`),Ti(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Af=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xf=class{constructor(){this.W_=new Ue(H.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},da=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Af.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var X_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ew=class{constructor(){this.queries=vA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=$(t),o=i.queries;i.queries=vA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function vA(){return new nr(n=>JA(n),Oc)}function qw(n,e){return N(this,null,function*(){let t=$(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new X_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ea(s,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Gw(t)})}function zw(n,e){return N(this,null,function*(){let t=$(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function YB(n,e){let t=$(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Gw(t)}function ZB(n,e,t){let r=$(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Gw(n){n.Y_.forEach(e=>{e.next()})}var tw,_A;(_A=tw||(tw={})).ea="default",_A.Cache="cache";var xc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tw.Cache}};var nw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Mf=class{constructor(e){this.serializer=e}Es(e){return Jn(this.serializer,e)}ds(e){return e.metadata.exists?wx(this.serializer,e.document,!1):st.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},rw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ie.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Mf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield VB(this.localStore,new Mf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield LB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Wx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Rf=class{constructor(e){this.key=e}},Nf=class{constructor(e){this.key=e}},Pf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=ex(e),this.Ra=new Af(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new xf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Fc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),x=!0):this.ga(m,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new da(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Nf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Rf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return da.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},iw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ow=class{constructor(e){this.key=e,this.va=!1}},sw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new nr(a=>JA(a),Oc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(H.comparator),this.Na=new Map,this.La=new Tc,this.Ba={},this.ka=new Map,this.qa=aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function JB(n,e,t=!0){return N(this,null,function*(){let r=Kf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Kx(r,e,t,!0),i})}function XB(n,e){return N(this,null,function*(){let t=Kf(n);yield Kx(t,e,!0,!1)})}function Kx(n,e,t,r){return N(this,null,function*(){let i=yield ua(n.localStore,jt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Ww(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wf(n.remoteStore,i),a})}function Ww(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,x,L,z){return N(this,null,function*(){let V=x.view.ma(L);V.ns&&(V=yield Ef(A.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,V)));let Z=z&&z.targetChanges.get(x.targetId),ne=z&&z.targetMismatches.get(x.targetId)!=null,X=x.view.applyChanges(V,A.isPrimaryClient,Z,ne);return aw(A,x.targetId,X.wa),X.snapshot})}(n,p,m,y);let o=yield Ef(n.localStore,e,!0),s=new Pf(e,o.Ts),a=s.ma(o.documents),u=Ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);aw(n,t,l.wa);let h=new iw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function eU(n,e,t){return N(this,null,function*(){let r=$(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Oc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ca(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&la(r.remoteStore,i.targetId),ha(r,i.targetId)}).catch(bi))):(ha(r,i.targetId),yield ca(r.localStore,i.targetId,!0))})}function tU(n,e){return N(this,null,function*(){let t=$(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),la(t.remoteStore,r.targetId))})}function nU(n,e,t){return N(this,null,function*(){let r=Zw(n);try{let i=yield function(s,a){let u=$(s),l=ze.now(),h=a.reduce((y,b)=>y.add(b.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Yt(),A=ce();return u.cs.getEntries(y,h).next(x=>{b=x,b.forEach((L,z)=>{z.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(x=>{p=x;let L=[];for(let z of a){let V=mB(z,p.get(z.key).overlayedDocument);V!=null&&L.push(new kn(z.key,V,zA(V.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(x=>{m=x;let L=x.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,x.batchId,L)})}).then(()=>({batchId:m.batchId,changes:nx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ue(ae)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Pr(r,i.changes),yield _a(r.remoteStore)}catch(i){let o=Ea(i,"Failed to persist write");t.reject(o)}})}function Qx(n,e){return N(this,null,function*(){let t=$(n);try{let r=yield OB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Y(s.va):i.removedDocuments.size>0&&(Y(s.va),s.va=!1))}),yield Pr(t,r,e)}catch(r){yield bi(r)}})}function wA(n,e,t){let r=$(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=$(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Gw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rU(n,e,t){return N(this,null,function*(){let r=$(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ue(H.comparator);s=s.insert(o,st.newNoDocument(o,ee.min()));let a=ce().add(o),u=new Ec(ee.min(),new Map,new Ue(ae),s,a);yield Qx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Yw(r)}else yield ca(r.localStore,e,!1).then(()=>ha(r,e,t)).catch(bi)})}function iU(n,e){return N(this,null,function*(){let t=$(n),r=e.batch.batchId;try{let i=yield kB(t.localStore,e);Qw(t,r,null),Kw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pr(t,i)}catch(i){yield bi(i)}})}function oU(n,e,t){return N(this,null,function*(){let r=$(n);try{let i=yield function(s,a){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Y(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Qw(r,e,t),Kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pr(r,i)}catch(i){yield bi(i)}})}function sU(n,e){return N(this,null,function*(){let t=$(n);Si(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ea(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Kw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Qw(n,e,t){let r=$(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ha(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Yx(n,r)})}function Yx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(la(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Yw(n))}function aw(n,e,t){for(let r of t)r instanceof Rf?(n.La.addReference(r.key,e),aU(n,r)):r instanceof Nf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Yx(n,r.key)):K()}function aU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),Yw(n))}function Yw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new H(Ie.fromString(e)),r=n.qa.next();n.Na.set(r,new ow(t)),n.Oa=n.Oa.insert(t,r),Wf(n.remoteStore,new sa(jt(ya(t.path)),r,"TargetPurposeLimboResolution",sn.oe))}}function Pr(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=j_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=$(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ti(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function uU(n,e){return N(this,null,function*(){let t=$(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield Ox(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pr(t,r.hs)}})}function cU(n,e){let t=$(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function lU(n,e){return N(this,null,function*(){let t=$(n),r=yield Ef(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&aw(t,e.targetId,i.wa),i})}function dU(n,e){return N(this,null,function*(){let t=$(n);return jx(t.localStore,e).then(r=>Pr(t,r))})}function hU(n,e,t,r){return N(this,null,function*(){let i=$(n),o=yield function(a,u){let l=$(a),h=$(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield _a(i.remoteStore):t==="acknowledged"||t==="rejected"?(Qw(i,e,r||null),Kw(i,e),function(a,u){$($(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield Pr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function fU(n,e){return N(this,null,function*(){let t=$(n);if(Kf(t),Zw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield EA(t,r.toArray());t.Qa=!0,yield Z_(t.remoteStore,!0);for(let o of i)Wf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ha(t,s),ca(t.localStore,s,!0))),la(t.remoteStore,s)}),yield i,yield EA(t,r),function(s){let a=$(s);a.Na.forEach((u,l)=>{la(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ue(H.comparator)}(t),t.Qa=!1,yield Z_(t.remoteStore,!1)}})}function EA(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield ua(r.localStore,jt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield lU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Lx(r.localStore,s);a=yield ua(r.localStore,l),yield Ww(r,Zx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Zx(n){return ZA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pU(n){return function(t){return $($(t).persistence).Qi()}($(n).localStore)}function gU(n,e,t,r){return N(this,null,function*(){let i=$(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield jx(i.localStore,XA(o[0])),a=Ec.createSynthesizedRemoteEventForCurrentChange(e,t==="current",et.EMPTY_BYTE_STRING);yield Pr(i,s,a);break}case"rejected":yield ca(i.localStore,e,!0),ha(i,e,r);break;default:K()}})}function mU(n,e,t){return N(this,null,function*(){let r=Kf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Lx(r.localStore,i),s=yield ua(r.localStore,o);yield Ww(r,Zx(o),s.targetId,!1,s.resumeToken),Wf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ca(r.localStore,i,!1).then(()=>{la(r.remoteStore,i),ha(r,i)}).catch(bi))}})}function Kf(n){let e=$(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rU.bind(null,e),e.Ca.d_=YB.bind(null,e.eventManager),e.Ca.$a=ZB.bind(null,e.eventManager),e}function Zw(n){let e=$(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}function yU(n,e,t){let r=$(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=$(y),x=Xe(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",L=>A.Gr.getBundleMetadata(L,b.id)).then(L=>!!L&&L.createTime.compareTo(x)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(Wx(u));let l=new rw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Pr(o,p.Ia,void 0),yield function(y,b){let A=$(y);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Nn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var uw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return kx(this.persistence,new wf,t.initialUser,this.serializer)}Ga(t){return new vf(_f.Zr,this.serializer)}Wa(t){return new Cf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var kf=class n extends uw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield kp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Zw(this.Ja.syncEngine),yield _a(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return kx(this.persistence,new wf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new D_(r,e.asyncQueue,t)}Ha(e,t){let r=new Bv(t,this.persistence);return new jv(e.asyncQueue,r)}Ga(e){let t=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new L_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ux(),Gh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Cf}},cw=class n extends kf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield kp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof dc&&(this.sharedClientState.syncEngine={no:hU.bind(null,t),ro:gU.bind(null,t),io:mU.bind(null,t),Qi:pU.bind(null,t),eo:dU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield fU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Ux();if(!dc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Jw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uU.bind(null,this.syncEngine),yield Z_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ew}()}createDatastore(t){let r=Vc(t.databaseInfo.databaseId),i=function(s){return new z_(s)}(t.databaseInfo);return function(s,a,u,l){return new K_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Y_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>wA(this.syncEngine,r,0),function(){return bf.D()?new bf:new H_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new sw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=$(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield va(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function IA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var fa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var lw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new lt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new nw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var dw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=$(i),a={documents:o.map(p=>Dc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ie.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=IB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Y(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Di(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=H.fromPath(r);this.mutations.push(new vc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=$(r),s={writes:i.map(a=>Cc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Ye.exists(!1):Ye.updateTime(t):Ye.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(t)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var hw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Ac(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new dw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Pc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hx(t)}return!1}};var fw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ea(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Av(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Ox(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function DA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Xw(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>yA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>yA(e.remoteStore,i)),n._onlineComponents=e})}function Xw(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Av(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Nn("Error using user provided cache. Falling back to memory cache: "+t),yield Av(n,new uw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Av(n,new uw);return n._offlineComponents})}function Qf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield DA(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield DA(n,new Jw))),n._onlineComponents})}function Jx(n){return Xw(n).then(e=>e.persistence)}function eE(n){return Xw(n).then(e=>e.localStore)}function Xx(n){return Qf(n).then(e=>e.remoteStore)}function tE(n){return Qf(n).then(e=>e.syncEngine)}function vU(n){return Qf(n).then(e=>e.datastore)}function pa(n){return N(this,null,function*(){let e=yield Qf(n),t=e.eventManager;return t.onListen=JB.bind(null,e.syncEngine),t.onUnlisten=eU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tU.bind(null,e.syncEngine),t})}function _U(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Jx(n),t=yield Xx(n);return e.setNetworkEnabled(!0),function(i){let o=$(i);return o.L_.delete(0),Lc(o)}(t)}))}function wU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Jx(n),t=yield Xx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=$(i);o.L_.add(0),yield va(o),o.q_.set("Offline")})}(t)}))}function EU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=$(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ea(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield eE(n),e,t)})),t.promise}function eM(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new fa({next:m=>{h.Za(),s.enqueueAndForget(()=>zw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(ya(a.path),h,{includeMetadataChanges:!0,_a:!0});return qw(o,p)}(yield pa(n),n.asyncQueue,e,t,r)})),r.promise}function IU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Ef(i,o,!0),u=new Pf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ea(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield eE(n),e,t)})),t.promise}function tM(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new fa({next:m=>{h.Za(),s.enqueueAndForget(()=>zw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(a,h,{includeMetadataChanges:!0,_a:!0});return qw(o,p)}(yield pa(n),n.asyncQueue,e,t,r)})),r.promise}function DU(n,e){let t=new fa(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.add(o),o.next()}(yield pa(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.delete(o)}(yield pa(n),t)}))}}function CU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?px().encode(s):s,function(h,p){return new lw(h,p)}(function(h,p){if(h instanceof Uint8Array)return IA(h,p);if(h instanceof ArrayBuffer)return IA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Vc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){yU(yield tE(n),i,r)}))}function bU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=$(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield eE(n),e)}))}function nM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var CA=new Map;function nE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bA(n){if(!H.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TA(n){if(H.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yf(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rM(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Of=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Do=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Of({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Of(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xv;switch(r.type){case"firstParty":return new Pv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=CA.get(t);r&&(O("ComponentProvider","Removing Datastore"),CA.delete(t),r.terminate())}(this),Promise.resolve()}};function iM(n,e,t,r={}){var i;let o=(n=be(n,Do))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Nn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ot.MOCK_USER;else{a=MI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ot(l)}n._authCredentials=new Mv(new Wh(a,u))}}var _t=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ve=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xn=class n extends _t{constructor(e,t,r){super(e,t,ya(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function iE(n,e,...t){if(n=qe(n),nE("collection","path",e),n instanceof Do){let r=Ie.fromString(e,...t);return TA(r),new Xn(n,null,r)}{if(!(n instanceof Ve||n instanceof Xn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return TA(r),new Xn(n.firestore,null,r)}}function oM(n,e){if(n=be(n,Do),nE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _t(n,null,function(r){return new Pn(Ie.emptyPath(),r)}(e))}function jc(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Kh.newId()),nE("doc","path",e),n instanceof Do){let r=Ie.fromString(e,...t);return bA(r),new Ve(n,null,new H(r))}{if(!(n instanceof Ve||n instanceof Xn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return bA(r),new Ve(n.firestore,n instanceof Xn?n.converter:null,new H(r))}}function oE(n,e){return n=qe(n),e=qe(e),(n instanceof Ve||n instanceof Xn)&&(e instanceof Ve||e instanceof Xn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sE(n,e){return n=qe(n),e=qe(e),n instanceof _t&&e instanceof _t&&n.firestore===e.firestore&&Oc(n._query,e._query)&&n.converter===e.converter}var Ff=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ac(this,"async_queue_retry"),this.Vu=()=>{let r=Gh();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new lt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=J_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function pw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var gw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var sM=-1,Ge=class extends Do{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ff,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ff(e),this._firestoreClient=void 0,yield e}})}};function wt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aM(n),n._firestoreClient}function aM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Uv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nM(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new fw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function uM(n,e){Nn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return lM(n,Jw.provider,{build:r=>new kf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function cM(n){return N(this,null,function*(){Nn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();lM(n,Jw.provider,{build:t=>new cw(t,e.cacheSizeBytes)})})}function lM(n,e,t){if((n=be(n,Ge))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},aM(n)}function dM(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!mi.D())return Promise.resolve();let i=r+"main";yield mi.delete(i)})}(Bw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function hM(n){return function(t){let r=new lt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return sU(yield tE(t),r)})),r.promise}(wt(n=be(n,Ge)))}function fM(n){return _U(wt(n=be(n,Ge)))}function pM(n){return wU(wt(n=be(n,Ge)))}function gM(n,e){let t=wt(n=be(n,Ge)),r=new gw;return CU(t,n._databaseId,e,r),r}function mM(n,e){return bU(wt(n=be(n,Ge)),e).then(t=>t?new _t(n,null,t.query):null)}var rr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var On=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Rr=class{constructor(e){this._methodName=e}};var Co=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Mc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var TU=/^__.*__$/,mw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ii(e,this.data,t,this.fieldTransforms)}},Vf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function yM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Lf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yM(this.Cu)&&TU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},yw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vc(e)}Qu(e,t,r,i=!1){return new Lf({Cu:e,methodName:t,qu:r,path:Je.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ao(n){let e=n._freezeSettings(),t=Vc(n._databaseId);return new yw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);cE("Data must be an object, but it was:",s,r);let a=wM(r,s),u,l;if(o.merge)u=new an(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Iw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);IM(h,m)||h.push(m)}u=new an(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new mw(new St(a),u,l)}var Rc=class n extends Rr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function vM(n,e,t){return new Lf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var vw=class n extends Rr{_toFieldTransform(e){return new wo(e.path,new wi)}isEqual(e){return e instanceof n}},_w=class n extends Rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=vM(this,e,!0),r=this.Ku.map(o=>xo(o,t)),i=new xr(r);return new wo(e.path,i)}isEqual(e){return e instanceof n&&Vp(this.Ku,e.Ku)}},ww=class n extends Rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=vM(this,e,!0),r=this.Ku.map(o=>xo(o,t)),i=new Mr(r);return new wo(e.path,i)}isEqual(e){return e instanceof n&&Vp(this.Ku,e.Ku)}},Ew=class n extends Rr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ei(e.serializer,ox(e.serializer,this.$u));return new wo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function aE(n,e,t,r){let i=n.Qu(1,e,t);cE("Data must be an object, but it was:",i,r);let o=[],s=St.empty();So(r,(u,l)=>{let h=lE(e,u,t);l=qe(l);let p=i.Nu(h);if(l instanceof Rc)o.push(h);else{let m=xo(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new an(o);return new Vf(s,a,i.fieldTransforms)}function uE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Iw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Iw(e,o[m])),u.push(o[m+1]);let l=[],h=St.empty();for(let m=a.length-1;m>=0;--m)if(!IM(l,a[m])){let y=a[m],b=u[m];b=qe(b);let A=s.Nu(y);if(b instanceof Rc)l.push(y);else{let x=xo(b,A);x!=null&&(l.push(y),h.set(y,x))}}let p=new an(l);return new Vf(h,p,s.fieldTransforms)}function _M(n,e,t,r=!1){return xo(t,n.Qu(r?4:3,e))}function xo(n,e){if(EM(n=qe(n)))return cE("Unsupported field value:",e,n),wM(n,e);if(n instanceof Rr)return function(r,i){if(!yM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=xo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ox(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:oa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oa(i.serializer,o)}}if(r instanceof Co)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:gx(i.serializer,r._byteString)};if(r instanceof Ve){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Vw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Fw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Yf(r)}`)}(n,e)}function wM(n,e){let t={};return UA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,(r,i)=>{let o=xo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function EM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof Co||n instanceof rr||n instanceof Ve||n instanceof Rr||n instanceof Mc)}function cE(n,e,t){if(!EM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Yf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Iw(n,e,t){if((e=qe(e))instanceof On)return e._internalPath;if(typeof e=="string")return lE(n,e);throw jf("Field path arguments must be of type string or ",n,!1,void 0,t)}var SU=new RegExp("[~\\*/\\[\\]]");function lE(n,e,t){if(e.search(SU)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new On(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function IM(n,e){return n.some(t=>t.isEqual(e))}var bo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Dw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Dw=class extends bo{data(){return super.data()}};function Jf(n,e){return typeof e=="string"?lE(n,e):e instanceof On?e._internalPath:e._delegate._internalPath}function DM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nc=class{},To=class extends Nc{};function kr(n,e,...t){let r=[];e instanceof Nc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Cw).length,a=o.filter(u=>u instanceof Bf).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Bf=class n extends To{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return PM(e._query,t),new _t(e.firestore,e.converter,e_(e._query,t))}_parse(e){let t=Ao(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){AA(p,h);let y=[];for(let b of p)y.push(SA(u,o,b));m={arrayValue:{values:y}}}else m=SA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||AA(p,h),m=_M(a,s,p,h==="in"||h==="not-in");return ve.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CM(n,e,t){let r=e,i=Jf("where",n);return Bf._create(i,r,t)}var Cw=class n extends Nc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Re.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)PM(s,u),s=e_(s,u)}(e._query,t),new _t(e.firestore,e.converter,e_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bw=class n extends To{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vo(o,s)}(e._query,this._field,this._direction);return new _t(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Pn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bM(n,e="asc"){let t=e,r=Jf("orderBy",n);return bw._create(r,t)}var Uf=class n extends To{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new _t(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}};function TM(n){return rM("limit",n),Uf._create("limit",n,"F")}function SM(n){return rM("limitToLast",n),Uf._create("limitToLast",n,"L")}var $f=class n extends To{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=NM(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function AM(...n){return $f._create("startAt",n,!0)}function xM(...n){return $f._create("startAfter",n,!1)}var Hf=class n extends To{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=NM(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function MM(...n){return Hf._create("endBefore",n,!1)}function RM(...n){return Hf._create("endAt",n,!0)}function NM(n,e,t,r){if(t[0]=qe(t[0]),t[0]instanceof bo)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Zs(o))if(p.field.isKeyField())h.push(yo(s,u.key));else{let m=u.data.field(p.field);if(zf(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new tr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ao(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!kw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let x=s.path.child(Ie.fromString(A));if(!H.isDocumentKey(x))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let L=new H(x);y.push(yo(a,L))}else{let x=_M(u,l,A);y.push(x)}}return new tr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function SA(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ie.fromString(t));if(!H.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yo(n,new H(r))}if(t instanceof Ve)return yo(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(t)}.`)}function AA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ga=class{convertValue(e,t="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return So(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new Mc(o)}convertGeoPoint(e){return new Co(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Nw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){let t=Ar(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);Y(Tx(r));let i=new vi(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||Ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Xf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Tw=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};var Sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},En=class extends bo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},pi=class extends En{data(e={}){return super.data(e)}},Fn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pi(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:AU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function dE(n,e){return n instanceof En&&e instanceof En?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fn&&e instanceof Fn&&n._firestore===e._firestore&&sE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kM(n){n=be(n,Ve);let e=be(n.firestore,Ge);return eM(wt(e),n._key).then(t=>gE(e,n,t))}var Nr=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};function OM(n){n=be(n,Ve);let e=be(n.firestore,Ge),t=wt(e),r=new Nr(e);return EU(t,n._key).then(i=>new En(e,r,n._key,i,new Sr(i!==null&&i.hasLocalMutations,!0),n.converter))}function FM(n){n=be(n,Ve);let e=be(n.firestore,Ge);return eM(wt(e),n._key,{source:"server"}).then(t=>gE(e,n,t))}function VM(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Nr(e);return DM(n._query),tM(t,n._query).then(i=>new Fn(e,r,n,i))}function LM(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Nr(e);return IU(t,n._query).then(i=>new Fn(e,r,n,i))}function jM(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Nr(e);return tM(t,n._query,{source:"server"}).then(i=>new Fn(e,r,n,i))}function hE(n,e,t){n=be(n,Ve);let r=be(n.firestore,Ge),i=Xf(n.converter,e,t);return Ia(r,[Zf(Ao(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ye.none())])}function fE(n,e,t,...r){n=be(n,Ve);let i=be(n.firestore,Ge),o=Ao(i),s;return s=typeof(e=qe(e))=="string"||e instanceof On?uE(o,"updateDoc",n._key,e,t,r):aE(o,"updateDoc",n._key,e),Ia(i,[s.toMutation(n._key,Ye.exists(!0))])}function BM(n){return Ia(be(n.firestore,Ge),[new Di(n._key,Ye.none())])}function UM(n,e){let t=be(n.firestore,Ge),r=jc(n),i=Xf(n.converter,e);return Ia(t,[Zf(Ao(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function pE(n,...e){var t,r,i;n=qe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ve)l=be(n.firestore,Ge),h=ya(n._key.path),u={next:p=>{e[s]&&e[s](gE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=be(n,_t);l=be(p.firestore,Ge),h=p._query;let m=new Nr(l);u={next:y=>{e[s]&&e[s](new Fn(l,m,p,y))},error:e[s+1],complete:e[s+2]},DM(n._query)}return function(m,y,b,A){let x=new fa(A),L=new xc(y,x,b);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return qw(yield pa(m),L)})),()=>{x.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return zw(yield pa(m),L)}))}}(wt(l),h,a,u)}function $M(n,e){return DU(wt(n=be(n,Ge)),pw(e)?e:{next:e})}function Ia(n,e){return function(r,i){let o=new lt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nU(yield tE(r),i,o)})),o.promise}(wt(n),e)}function gE(n,e,t){let r=t.docs.get(e._key),i=new Nr(n);return new En(n,i,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}var xU={maxAttempts:5};var qf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ao(e)}set(e,t,r){this._verifyNotCommitted();let i=hi(e,this._firestore),o=Xf(i.converter,t,r),s=Zf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=hi(e,this._firestore),s;return s=typeof(t=qe(t))=="string"||t instanceof On?uE(this._dataReader,"WriteBatch.update",o._key,t,r,i):aE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hi(e,this._firestore);return this._mutations=this._mutations.concat(new Di(t._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hi(n,e){if((n=qe(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Sw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ao(t)}get(t){let r=hi(t,this._firestore),i=new Tw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new bo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new bo(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=hi(t,this._firestore),s=Xf(o.converter,r,i),a=Zf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=hi(t,this._firestore),a;return a=typeof(r=qe(r))=="string"||r instanceof On?uE(this._dataReader,"Transaction.update",s._key,r,i,o):aE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=hi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=hi(e,this._firestore),r=new Nr(this._firestore);return super.get(e).then(i=>new En(this._firestore,r,t._key,i._document,new Sr(!1,!1),t.converter))}};function HM(n,e,t){n=be(n,Ge);let r=Object.assign(Object.assign({},xU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new lt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield vU(o);new hw(o.asyncQueue,l,a,s,u).au()})),u.promise}(wt(n),i=>e(new Sw(n,i)),r)}function qM(){return new Rc("deleteField")}function zM(){return new vw("serverTimestamp")}function GM(...n){return new _w("arrayUnion",n)}function WM(...n){return new ww("arrayRemove",n)}function KM(n){return new Ew("increment",n)}(function(e,t=!0){(function(i){ma=i})(PI),Ga(new Ni("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ge(new Rv(r.getProvider("auth-internal")),new Ov(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),jr(TS,"4.7.3",e),jr(TS,"4.7.3","esm2017")})();var MU="@firebase/firestore-compat",RU="0.3.38";function EE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QM(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function YM(){if(!$A())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ep=class n{constructor(e){this._delegate=e}static fromBase64String(e){return YM(),new n(rr.fromBase64String(e))}static fromUint8Array(e){return QM(),new n(rr.fromUint8Array(e))}toBase64(){return YM(),this._delegate.toBase64()}toUint8Array(){return QM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function mE(n){return NU(n,["next","error","complete"])}function NU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var yE=class{enableIndexedDbPersistence(e,t){return uM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return cM(e._delegate)}clearIndexedDbPersistence(e){return dM(e._delegate)}},tp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){iM(this._delegate,e,t,r)}enableNetwork(){return fM(this._delegate)}disableNetwork(){return pM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hM(this._delegate)}onSnapshotsInSync(e){return $M(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ba(this,iE(this._delegate,e))}catch(t){throw Bt(t,"collection()","Firestore.collection()")}}doc(e){try{return new ir(this,jc(this._delegate,e))}catch(t){throw Bt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Po(this,oM(this._delegate,e))}catch(t){throw Bt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HM(this._delegate,t=>e(new np(this,t)))}batch(){return wt(this._delegate),new rp(new qf(this._delegate,e=>Ia(this._delegate,e)))}loadBundle(e){return gM(this._delegate,e)}namedQuery(e){return mM(this._delegate,e).then(t=>t?new Po(this,t):null)}},Da=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new ep(new rr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ir.forKey(t,this.firestore,null)}};function PU(n){xA(n)}var np=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}get(e){let t=Mo(e);return this._delegate.get(t).then(r=>new Ro(this._firestore,new En(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Mo(e);return r?(EE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Mo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Mo(e);return this._delegate.delete(t),this}},rp=class{constructor(e){this._delegate=e}set(e,t,r){let i=Mo(e);return r?(EE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Mo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Mo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ca=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new pi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new No(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Da(e),t),i.set(t,o)),o}};Ca.INSTANCES=new WeakMap;var ir=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ve(t._delegate,r,new H(e)))}static forKey(e,t,r){return new n(t,new Ve(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ba(this.firestore,iE(this._delegate,e))}catch(t){throw Bt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof Ve?oE(this._delegate,e):!1}set(e,t){t=EE("DocumentReference.set",t);try{return t?hE(this._delegate,e,t):hE(this._delegate,e)}catch(r){throw Bt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?fE(this._delegate,e):fE(this._delegate,e,t,...r)}catch(i){throw Bt(i,"updateDoc()","DocumentReference.update()")}}delete(){return BM(this._delegate)}onSnapshot(...e){let t=ZM(e),r=JM(e,i=>new Ro(this.firestore,new En(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=OM(this._delegate):e?.source==="server"?t=FM(this._delegate):t=kM(this._delegate),t.then(r=>new Ro(this.firestore,new En(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Bt(n,e,t){return n.message=n.message.replace(e,t),n}function ZM(n){for(let e of n)if(typeof e=="object"&&!mE(e))return e;return{}}function JM(n,e){var t,r;let i;return mE(n[0])?i=n[0]:mE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ro=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dE(this._delegate,e._delegate)}},No=class extends Ro{data(e){let t=this._delegate.data(e);return this._delegate._converter||MA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Po=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}where(e,t,r){try{return new n(this.firestore,kr(this._delegate,CM(e,t,r)))}catch(i){throw Bt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,kr(this._delegate,bM(e,t)))}catch(r){throw Bt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,kr(this._delegate,TM(e)))}catch(t){throw Bt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,kr(this._delegate,SM(e)))}catch(t){throw Bt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,kr(this._delegate,AM(...e)))}catch(t){throw Bt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,kr(this._delegate,xM(...e)))}catch(t){throw Bt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,kr(this._delegate,MM(...e)))}catch(t){throw Bt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,kr(this._delegate,RM(...e)))}catch(t){throw Bt(t,"endAt()","Query.endAt()")}}isEqual(e){return sE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=LM(this._delegate):e?.source==="server"?t=jM(this._delegate):t=VM(this._delegate),t.then(r=>new Bc(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=ZM(e),r=JM(e,i=>new Bc(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},vE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new No(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Bc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new No(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new No(this._firestore,r))})}isEqual(e){return dE(this._delegate,e._delegate)}},ba=class n extends Po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ir(this.firestore,e):null}doc(e){try{return e===void 0?new ir(this.firestore,jc(this._delegate)):new ir(this.firestore,jc(this._delegate,e))}catch(t){throw Bt(t,"doc()","CollectionReference.doc()")}}add(e){return UM(this._delegate,e).then(t=>new ir(this.firestore,t))}isEqual(e){return oE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mo(n){return be(n,Ve)}var _E=class n{constructor(...e){this._delegate=new On(...e)}static documentId(){return new n(Je.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof On?this._delegate._internalPath.isEqual(e._internalPath):!1}};var wE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=zM();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=qM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=GM(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=WM(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=KM(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var kU={Firestore:tp,GeoPoint:Co,Timestamp:ze,Blob:ep,Transaction:np,WriteBatch:rp,DocumentReference:ir,DocumentSnapshot:Ro,Query:Po,QueryDocumentSnapshot:No,QuerySnapshot:Bc,CollectionReference:ba,FieldPath:_E,FieldValue:wE,setLogLevel:PU,CACHE_SIZE_UNLIMITED:sM};function OU(n,e){n.INTERNAL.registerComponent(new Ni("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kU)))}function FU(n){OU(n,(e,t)=>new tp(e,t,new yE)),n.registerVersion(MU,RU)}FU(Xt);function VU(n,e=Ja){return new ge(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function XM(n,e){return VU(n,e)}function LU(n,e){return XM(n,e).pipe(Li(void 0),tu(),Q(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function CE(n,e){return XM(n,e).pipe(Q(t=>({payload:t,type:"query"})))}var ip=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=nR(r,t);return new sp(i,o,this.afs)}snapshotChanges(){return LU(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return this.snapshotChanges().pipe(Q(({payload:t})=>e.idField?pe(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ce(this.ref.get(e)).pipe(Qt)}};function op(n,e){return CE(n,e).pipe(Li(void 0),tu(),Q(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function eR(n,e,t){return op(n,t).pipe(Vi((r,i)=>jU(r,i.map(o=>o.payload),e),[]),sg(),Q(r=>r.map(i=>({type:i.type,payload:i}))))}function jU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=BU(n,r))}),n}function IE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function BU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return IE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return IE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IE(n,e.oldIndex,1);break}return n}function tR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var sp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=op(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Q(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Li(void 0),tu(),vt(([r,i])=>i.length>0||!r),Q(([,r])=>r),Qt)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tR(e);return eR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return CE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.payload.docs.map(r=>e.idField?pe(P({},r.data()),{[e.idField]:r.id}):r.data())),Qt)}get(e){return Ce(this.query.get(e)).pipe(Qt)}add(e){return this.ref.add(e)}doc(e){return new ip(this.ref.doc(e),this.afs)}},DE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?op(this.query,this.afs.schedulers.outsideAngular).pipe(Qt):op(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.filter(r=>e.indexOf(r.type)>-1)),vt(t=>t.length>0),Qt)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tR(e);return eR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return CE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),Qt)}get(e){return Ce(this.query.get(e)).pipe(Qt)}},UU=new W("angularfire2.enableFirestorePersistence"),$U=new W("angularfire2.firestore.persistenceSettings"),HU=new W("angularfire2.firestore.settings"),qU=new W("angularfire2.firestore.use-emulator");function nR(n,e=t=>t){return{query:e(n),ref:n}}var Zt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,b,A,x,L,z){this.schedulers=u;let V=Nu(t,a,r),Z=h;p&&yv(V,a,m,b,A,x,y,L),[this.firestore,this.persistenceEnabled$]=fh(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let ne=a.runOutsideAngular(()=>V.firestore());if(o&&ne.settings(o),Z&&ne.useEmulator(...Z),i&&!eo(s)){let X=()=>{try{return Ce(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),te(!1)}};return[ne,a.runOutsideAngular(X)]}else return[ne,te(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=nR(i,r),a=this.schedulers.ngZone.run(()=>o);return new sp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new DE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new ip(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(Ts),F(Ss,8),F(UU,8),F(HU,8),F(qt),F(_e),F(dh),F($U,8),F(qU,8),F(DS,8),F(dv,8),F(hv,8),F(fv,8),F(pv,8),F(gv,8),F(mv,8),F(no,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var rR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var iR=(()=>{class n{constructor(t){this.headerService=t,this.btntxt="Actualizar",this.goalText="",this.header=new kh,this.isEditMode=!1,this.editId=null,this.headerService.getHeader().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}updateHeader(t){this.header&&this.header.id&&this.headerService.updateHeader(this.header.id,{name:this.header.name,goalLife:this.header.goalLife,photoUrl:this.header.photoUrl,email:this.header.email,phoneNumber:this.header.phoneNumber,location:this.header.location,socialNetwork:this.header.socialNetwork})}static{this.\u0275fac=function(r){return new(r||n)(se(rR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-header"]],decls:22,vars:8,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","name",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","goalLife",1,"input",3,"ngModelChange","ngModel"],["type","text","name","img","placeholder","photoUrl",1,"input",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","email",1,"input",3,"ngModelChange","ngModel"],["type","text","name","phone","placeholder","phone",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location",1,"input",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","socialNetwork",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Header"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.updateHeader()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.header.name,s)||(i.header.name=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.header.goalLife,s)||(i.header.goalLife=s),s}),G(),we(9,"br"),U(10,"input",6),Ae("ngModelChange",function(s){return xe(i.header.photoUrl,s)||(i.header.photoUrl=s),s}),G(),we(11,"br"),U(12,"input",7),Ae("ngModelChange",function(s){return xe(i.header.email,s)||(i.header.email=s),s}),G(),we(13,"br"),U(14,"input",8),Ae("ngModelChange",function(s){return xe(i.header.phoneNumber,s)||(i.header.phoneNumber=s),s}),G(),we(15,"br"),U(16,"input",9),Ae("ngModelChange",function(s){return xe(i.header.location,s)||(i.header.location=s),s}),G(),we(17,"br"),U(18,"input",10),Ae("ngModelChange",function(s){return xe(i.header.socialNetwork,s)||(i.header.socialNetwork=s),s}),G(),we(19,"br"),U(20,"button",11),ue(21),G()()()()),r&2&&(re(6),Se("ngModel",i.header.name),re(2),Se("ngModel",i.header.goalLife),re(2),Se("ngModel",i.header.photoUrl),re(2),Se("ngModel",i.header.email),re(2),Se("ngModel",i.header.phoneNumber),re(2),Se("ngModel",i.header.location),re(2),Se("ngModel",i.header.socialNetwork),re(3),Ot(i.btntxt))},dependencies:[Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Uc=class{constructor(){this.startDate="mm-yy",this.endDate="mm-yy",this.location="city-country",this.position="my position",this.company="my company",this.accomplishment="item1, item2 ..."}};var oR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}updateEducation(t,r){return this.workExperienceRef.doc(t).update(P({},r))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WU(n,e){if(n&1){let t=ti();U(0,"div",13)(1,"div",14),ue(2),G(),U(3,"div",15)(4,"button",16),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.deleteJob(i.id))}),ue(5,"Delete"),G(),U(6,"button",17),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.updateJob(i.id))}),ue(7,"Update"),G()()()}if(n&2){let t=e.$implicit;re(2),_r("",t.company," - ",t.position,"")}}var sR=(()=>{class n{constructor(t){this.WorkExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new Uc,this.isEditMode=!1,this.editId=null,this.WorkExperienceService.getWorkExperience().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}AgregarJob(){this.isEditMode&&this.editId?this.WorkExperienceService.updateEducation(this.editId,this.myWorkExperience).then(()=>{console.log("Updated item successfully!"),this.resetForm()}):this.WorkExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully!"),this.resetForm()})}updateJob(t){let r=this.workExperience.find(i=>i.id===t);r&&(this.myWorkExperience=P({},r),this.btntxt="Actualizar",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){this.WorkExperienceService.deleteWorkExperience(t).then(()=>{console.log("Deleted item successfully!")}),console.log(t)}resetForm(){this.myWorkExperience=new Uc,this.btntxt="Agregar",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(se(oR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-workexperience"]],decls:22,vars:8,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","position",1,"input",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","company",1,"input",3,"ngModelChange","ngModel"],["type","text","name","accomplishment","placeholder","accomplishment",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"work-experience items"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.AgregarJob()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),G(),we(9,"br"),U(10,"input",6),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),G(),we(11,"br"),U(12,"input",7),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),G(),we(13,"br"),U(14,"input",8),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),G(),we(15,"br"),U(16,"input",9),Ae("ngModelChange",function(s){return xe(i.myWorkExperience.accomplishment,s)||(i.myWorkExperience.accomplishment=s),s}),G(),we(17,"br"),U(18,"button",10),ue(19),G()()(),U(20,"div",11),yr(21,WU,8,2,"div",12),G()()),r&2&&(re(6),Se("ngModel",i.myWorkExperience.startDate),re(2),Se("ngModel",i.myWorkExperience.endDate),re(2),Se("ngModel",i.myWorkExperience.location),re(2),Se("ngModel",i.myWorkExperience.position),re(2),Se("ngModel",i.myWorkExperience.company),re(2),Se("ngModel",i.myWorkExperience.accomplishment),re(3),Ot(i.btntxt),re(2),vr("ngForOf",i.workExperience))},dependencies:[ri,Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var $c=class{constructor(){this.date="date",this.educativeInstitute="institute",this.grade="grade"}};var aR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}getWorkExperience(){return this.educationRef}createWorkExperience(t){return this.educationRef.add(P({},t))}updateEducation(t,r){return this.educationRef.doc(t).update(P({},r))}deleteWorkExperience(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QU(n,e){if(n&1){let t=ti();U(0,"div",10)(1,"div",11),ue(2),G(),U(3,"div",12)(4,"button",13),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.deleteJob(i.id))}),ue(5,"Delete"),G(),U(6,"button",14),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.updateJob(i.id))}),ue(7,"Update"),G()()()}if(n&2){let t=e.$implicit;re(2),_r("",t.educativeInstitute," - ",t.grade,"")}}var uR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.educations=[],this.myeducation=new $c,this.isEditMode=!1,this.editId=null,this.educationService.getEducation().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log(this.educations)})}AgregarJob(){this.isEditMode&&this.editId?this.educationService.updateEducation(this.editId,this.myeducation).then(()=>{console.log("Updated item successfully!"),this.resetForm()}):this.educationService.createWorkExperience(this.myeducation).then(()=>{console.log("Created new item successfully!"),this.resetForm()})}updateJob(t){let r=this.educations.find(i=>i.id===t);r&&(this.myeducation=P({},r),this.btntxt="Actualizar",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){this.educationService.deleteWorkExperience(t).then(()=>{console.log("Deleted item successfully!")}),console.log(t)}resetForm(){this.myeducation=new $c,this.btntxt="Agregar",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(se(aR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-education"]],decls:16,vars:5,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Education institute",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","grade",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Education items"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.AgregarJob()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.myeducation.date,s)||(i.myeducation.date=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.myeducation.educativeInstitute,s)||(i.myeducation.educativeInstitute=s),s}),G(),we(9,"br"),U(10,"input",6),Ae("ngModelChange",function(s){return xe(i.myeducation.grade,s)||(i.myeducation.grade=s),s}),G(),we(11,"br"),U(12,"button",7),ue(13),G()()(),U(14,"div",8),yr(15,QU,8,2,"div",9),G()()),r&2&&(re(6),Se("ngModel",i.myeducation.date),re(2),Se("ngModel",i.myeducation.educativeInstitute),re(2),Se("ngModel",i.myeducation.grade),re(3),Ot(i.btntxt),re(2),vr("ngForOf",i.educations))},dependencies:[ri,Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var Hc=class{constructor(){this.Institute="institute example",this.title="title",this.date="date"}};var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificates(t){return this.certificatesRef.add(P({},t))}updateCertificates(t,r){return this.certificatesRef.doc(t).update(P({},r))}deleteCertificates(t){return this.certificatesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZU(n,e){if(n&1){let t=ti();U(0,"div",10)(1,"div",11),ue(2),G(),U(3,"div",12)(4,"button",13),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.deleteJob(i.id))}),ue(5,"Delete"),G(),U(6,"button",14),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.updateJob(i.id))}),ue(7,"Update"),G()()()}if(n&2){let t=e.$implicit;re(2),_r("",t.Institute," - ",t.title,"")}}var lR=(()=>{class n{constructor(t){this.CertificatesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificatess=[],this.myCertificates=new Hc,this.isEditMode=!1,this.editId=null,this.CertificatesService.getCertificates().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificatess=r,console.log(this.certificatess)})}AgregarJob(){this.isEditMode&&this.editId?this.CertificatesService.updateCertificates(this.editId,this.myCertificates).then(()=>{console.log("Updated item successfully!"),this.resetForm()}):this.CertificatesService.createCertificates(this.myCertificates).then(()=>{console.log("Created new item successfully!"),this.resetForm()})}updateJob(t){let r=this.certificatess.find(i=>i.id===t);r&&(this.myCertificates=P({},r),this.btntxt="Actualizar",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){this.CertificatesService.deleteCertificates(t).then(()=>{console.log("Deleted item successfully!")})}resetForm(){this.myCertificates=new Hc,this.btntxt="Agregar",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(se(cR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-certificates"]],decls:16,vars:5,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Certificates items"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.AgregarJob()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.myCertificates.title,s)||(i.myCertificates.title=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.myCertificates.Institute,s)||(i.myCertificates.Institute=s),s}),G(),we(9,"br"),U(10,"input",6),Ae("ngModelChange",function(s){return xe(i.myCertificates.date,s)||(i.myCertificates.date=s),s}),G(),we(11,"br"),U(12,"button",7),ue(13),G()()(),U(14,"div",8),yr(15,ZU,8,2,"div",9),G()()),r&2&&(re(6),Se("ngModel",i.myCertificates.title),re(2),Se("ngModel",i.myCertificates.Institute),re(2),Se("ngModel",i.myCertificates.date),re(3),Ot(i.btntxt),re(2),vr("ngForOf",i.certificatess))},dependencies:[ri,Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var ap=class{constructor(){this.languagues="value1, value2, value3 ...",this.Areas="value1, value2, value3 ..."}};var dR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}updateSkills(t,r){return this.skillsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hR=(()=>{class n{constructor(t){this.skillsService=t,this.btntxt="Actualizar",this.goalText="",this.skills=new ap,this.isEditMode=!1,this.editId=null,this.skillsService.getSkills().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log(this.skills)})}updateInterest(t){this.skills&&this.skills.id&&this.skillsService.updateSkills(this.skills.id,{languagues:this.skills.languagues,Areas:this.skills.Areas})}static{this.\u0275fac=function(r){return new(r||n)(se(dR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-skills"]],decls:12,vars:3,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","date (mm/yyyy)",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Education institute",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Skills items"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.updateInterest()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.skills.languagues,s)||(i.skills.languagues=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.skills.Areas,s)||(i.skills.Areas=s),s}),G(),we(9,"br"),U(10,"button",6),ue(11),G()()()()),r&2&&(re(6),Se("ngModel",i.skills.languagues),re(2),Se("ngModel",i.skills.Areas),re(3),Ot(i.btntxt))},dependencies:[Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var qc=class{constructor(){this.language="language",this.percentage="100%"}};var fR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguages(t){return this.languagesRef.add(P({},t))}updateLanguages(t,r){return this.languagesRef.doc(t).update(P({},r))}deleteLanguages(t){return this.languagesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e$(n,e){if(n&1){let t=ti();U(0,"div",9)(1,"div",10),ue(2),G(),U(3,"div",11)(4,"button",12),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.deleteJob(i.id))}),ue(5,"Delete"),G(),U(6,"button",13),Ne("click",function(){let i=gn(t).$implicit,o=yn();return mn(o.updateJob(i.id))}),ue(7,"Update"),G()()()}if(n&2){let t=e.$implicit;re(2),_r("",t.language," - ",t.percentage,"")}}var pR=(()=>{class n{constructor(t){this.languagesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.languages=[],this.myLanguages=new qc,this.isEditMode=!1,this.editId=null,this.languagesService.getLanguages().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarJob(){this.isEditMode&&this.editId?this.languagesService.updateLanguages(this.editId,this.myLanguages).then(()=>{console.log("Updated item successfully!"),this.resetForm()}):this.languagesService.createLanguages(this.myLanguages).then(()=>{console.log("Created new item successfully!"),this.resetForm()})}updateJob(t){let r=this.languages.find(i=>i.id===t);r&&(this.myLanguages=P({},r),this.btntxt="Actualizar",this.isEditMode=!0,this.editId=t||null)}deleteJob(t){this.languagesService.deleteLanguages(t).then(()=>{console.log("Deleted item successfully!")}),console.log(t)}resetForm(){this.myLanguages=new qc,this.btntxt="Agregar",this.isEditMode=!1,this.editId=null}static{this.\u0275fac=function(r){return new(r||n)(se(fR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-languages"]],decls:14,vars:4,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["type","text","name","startDate","placeholder","language",1,"input",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","percentage",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-info"],[1,"job-actions"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Languages items"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.AgregarJob()}),U(6,"input",4),Ae("ngModelChange",function(s){return xe(i.myLanguages.language,s)||(i.myLanguages.language=s),s}),G(),we(7,"br"),U(8,"input",5),Ae("ngModelChange",function(s){return xe(i.myLanguages.percentage,s)||(i.myLanguages.percentage=s),s}),G(),we(9,"br"),U(10,"button",6),ue(11),G()()(),U(12,"div",7),yr(13,e$,8,2,"div",8),G()()),r&2&&(re(6),Se("ngModel",i.myLanguages.language),re(2),Se("ngModel",i.myLanguages.percentage),re(3),Ot(i.btntxt),re(2),vr("ngForOf",i.languages))},dependencies:[ri,Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#565e64}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b02a37}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}"]})}}return n})();var up=class{constructor(){this.interest="history"}};var gR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}updateInterest(t,r){return this.interestsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mR=(()=>{class n{constructor(t){this.interestService=t,this.itemCount=0,this.btntxt="Actualizar",this.goalText="",this.Interests=new up,this.isEditMode=!1,this.editId=null,this.interestService.getInterests().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.Interests=r[0],console.log(this.Interests)})}updateInterest(t){this.Interests&&this.Interests.id&&this.interestService.updateInterest(this.Interests.id,{interest:this.Interests.interest})}static{this.\u0275fac=function(r){return new(r||n)(se(gR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-interests"]],decls:9,vars:2,consts:[[1,"container-main"],[1,"title"],[1,"form-container"],[1,"form-box",3,"submit"],["name","interest","placeholder","Write about your interests...","rows","5",1,"input","textarea",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ue(3,"Inteters"),G()(),U(4,"div",2)(5,"form",3),Ne("submit",function(){return i.updateInterest()}),U(6,"textarea",4),Ae("ngModelChange",function(s){return xe(i.Interests.interest,s)||(i.Interests.interest=s),s}),G(),U(7,"button",5),ue(8),G()()()()),r&2&&(re(6),Se("ngModel",i.Interests.interest),re(2),Ot(i.btntxt))},dependencies:[Kt,bt,Gt,Wt,Vt,Ft],styles:[".container-main[_ngcontent-%COMP%]{min-height:100vh;padding:40px 20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Segoe UI,sans-serif}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:25px;border-radius:20px;box-shadow:0 4px 10px #0003;width:90%;max-width:400px;margin-bottom:40px}.input[_ngcontent-%COMP%]{width:100%;text-align:right;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:12px;font-size:14px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:12px;font-size:14px;cursor:pointer;margin:5px 4px 0 0;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.job-list[_ngcontent-%COMP%]{width:100%;max-width:600px}.job-card[_ngcontent-%COMP%]{background-color:#e9ecef;color:#333;border-radius:15px;padding:15px 20px;margin-bottom:15px;box-shadow:0 2px 6px #00000026;display:flex;justify-content:space-between;align-items:center}.job-info[_ngcontent-%COMP%]{font-weight:700}.job-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.textarea[_ngcontent-%COMP%]{resize:none;overflow-y:auto;font-family:inherit;text-align:justify;line-height:1.4}"]})}}return n})();var n$=[{path:"header",component:iR},{path:"workexperience",component:sR},{path:"education",component:uR},{path:"certificates",component:lR},{path:"skills",component:hR},{path:"languages",component:pR},{path:"interests",component:mR}],yR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[iv.forRoot(n$),iv]})}}return n})();var vR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"nav-menu"],["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(U(0,"h3")(1,"b"),ue(2," admin-Cv "),G()(),U(3,"nav")(4,"ul",0)(5,"li")(6,"a",1),ue(7," header "),G()(),U(8,"li")(9,"a",2),ue(10," work-experience "),G()(),U(11,"li")(12,"a",3),ue(13," education "),G()(),U(14,"li")(15,"a",4),ue(16," certificates "),G()(),U(17,"li")(18,"a",5),ue(19," skills "),G()(),U(20,"li")(21,"a",6),ue(22," languages "),G()(),U(23,"li")(24,"a",7),ue(25," interests "),G()()()(),we(26,"router-outlet"))},dependencies:[Jy,aS],styles:["nav[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.nav-menu[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;flex-wrap:wrap;justify-content:center;gap:20px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:22px;color:#fff;transition:transform .2s ease-in-out,color .2s ease-in-out;display:inline-block;padding:5px 10px;border-radius:10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.15);background-color:#ffffff26;color:#fff}"]})}}return n})();var _R=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n,bootstrap:[vR]})}static{this.\u0275inj=ht({imports:[qb,yR,pT,vT.initializeApp(_T.firebase)]})}}return n})();Hb().bootstrapModule(_R,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
